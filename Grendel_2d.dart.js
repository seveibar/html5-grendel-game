// Generated by dart2js, the Dart to JavaScript compiler.
// The code supports the following hooks:
// dartPrint(message)   - if this function is defined it is called
//                        instead of the Dart [print] method.
// dartMainRunner(main) - if this function is defined, the Dart [main]
//                        method will not be invoked directly.
//                        Instead, a closure that will invoke [main] is
//                        passed to [dartMainRunner].
function Isolate() {}
init();

var $$ = {};
var $ = Isolate.$isolateProperties;
$$.ListIterator = {"":"Object;i,list",
 get$hasNext: function() {
  return $.lt(this.i, this.list.length);
},
 next$0: function() {
  var value, t1;
  if (this.get$hasNext() !== true)
    throw $.$$throw($.StateError$("No more elements"));
  value = this.list[this.i];
  t1 = this.i;
  if (typeof t1 !== 'number')
    return this.next$0$bailout0(1, t1, value);
  this.i = t1 + 1;
  return value;
},
 next$0$bailout0: function(state0, t1, value) {
  this.i = $.add(t1, 1);
  return value;
}
};

$$.Closure = {"":"Object;",
 toString$0: function() {
  return "Closure";
}
};

$$.Null = {"":"Object;"
};

$$.ConstantMap = {"":"Object;length>,_jsObject,_keys",
 containsKey$1: function(key) {
  if ($.eqB(key, "__proto__"))
    return false;
  return this._jsObject.hasOwnProperty(key);
},
 operator$index$1: function(key) {
  if (this.containsKey$1(key) !== true)
    return;
  return this._jsObject[key];
},
 forEach$1: function(f) {
  var t1 = this._keys;
  $.getInterceptor$JSArray(t1).forEach$1(t1, new $.ConstantMap_forEach_anon(this, f));
},
 get$isEmpty: function() {
  return $.eq(this.length, 0);
},
 toString$0: function() {
  return $.Maps_mapToString(this);
},
 _throwUnmodifiable$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot modify unmodifiable Map"));
},
 operator$indexSet$2: function(key, val) {
  return this._throwUnmodifiable$0();
},
 clear$0: function() {
  return this._throwUnmodifiable$0();
},
 is$Map: function() { return true; }
};

$$.MetaInfo = {"":"Object;_tag>,_tags,_set>"
};

$$.JSSyntaxRegExp = {"":"Object;_liblib1$_pattern,_multiLine,_ignoreCase",
 firstMatch$1: function(str) {
  var m, matchStart, t1, matchEnd;
  m = $.regExpExec(this, $.checkString(str));
  if (m == null)
    return;
  matchStart = m.index;
  t1 = $.getInterceptor$JSStringJSArray(m).operator$index$1(m, 0);
  t1 = $.getInterceptor$JSStringJSArray(t1).get$length(t1);
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  matchEnd = matchStart + t1;
  return $._MatchImplementation$(this.get$pattern(), str, matchStart, matchEnd, m);
},
 hasMatch$1: function(str) {
  return $.regExpTest(this, $.checkString(str));
},
 allMatches$1: function(str) {
  $.checkString(str);
  return $._AllMatchesIterable$(this, str);
},
 get$pattern: function() {
  return this._liblib1$_pattern;
},
 get$multiLine: function() {
  return this._multiLine;
},
 get$ignoreCase: function() {
  return this._ignoreCase;
},
 is$JSSyntaxRegExp: true
};

$$._MatchImplementation = {"":"Object;pattern>,str,start,end,_groups",
 operator$index$1: function(index) {
  var t1 = this._groups;
  if (typeof t1 !== 'string' && (typeof t1 !== 'object' || t1 === null || t1.constructor !== Array && !t1.is$JavaScriptIndexingBehavior()))
    return this.operator$index$1$bailout2(1, index, t1);
  if (index !== (index | 0))
    throw $.iae(index);
  if (index < 0 || index >= t1.length)
    throw $.ioore(index);
  return t1[index];
},
 operator$index$1$bailout2: function(state0, index, t1) {
  return $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, index);
}
};

$$._AllMatchesIterable = {"":"Object;_re,_str",
 iterator$0: function() {
  return $._AllMatchesIterator$(this._re, this._str);
}
};

$$._AllMatchesIterator = {"":"Object;_re,_str,_liblib1$_next=,_done",
 next$0: function() {
  if (this.get$hasNext() !== true)
    throw $.$$throw($.StateError$("No more elements"));
  var next = this._liblib1$_next;
  this._liblib1$_next = null;
  return next;
},
 get$hasNext: function() {
  if (this._done)
    return false;
  else if (!(this._liblib1$_next == null))
    return true;
  this._liblib1$_next = this._re.firstMatch$1(this._str);
  if (this._liblib1$_next == null) {
    this._done = true;
    return false;
  } else
    return true;
}
};

$$.StringMatch = {"":"Object;start,str,pattern>",
 operator$index$1: function(g) {
  return this.group$1(g);
},
 group$1: function(group_) {
  if (!$.eqB(group_, 0))
    throw $.$$throw($.RangeError$value(group_));
  return this.pattern;
}
};

$$.NullThrownError = {"":"Object;",
 toString$0: function() {
  return "Throw of null.";
}
};

$$.ArgumentError = {"":"Object;message",
 toString$0: function() {
  var t1 = this.message;
  if (!(t1 == null))
    return "Illegal argument(s): " + $.S(t1);
  return "Illegal argument(s)";
}
};

$$.RangeError = {"":"ArgumentError;message",
 toString$0: function() {
  return "RangeError: " + $.S(this.message);
}
};

$$.NoSuchMethodError = {"":"Object;_receiver,_memberName,_arguments,_namedArguments,_existingArgumentNames",
 toString$0: function() {
  var t1, t2, t3, t4, t5, actualParameters, i, formalParameters;
  t1 = {};
  t1.sb_0 = $.StringBuffer_StringBuffer("");
  t1.i_1 = 0;
  t2 = this._arguments;
  if (typeof t2 !== 'string' && (typeof t2 !== 'object' || t2 === null || t2.constructor !== Array && !t2.is$JavaScriptIndexingBehavior()))
    return this.toString$0$bailout(1, t1, t2);
  for (; $.ltB(t1.i_1, t2.length); t1.i_1 = $.add(t1.i_1, 1)) {
    if ($.gtB(t1.i_1, 0)) {
      t3 = t1.sb_0;
      $.getInterceptor$JSArray(t3).add$1(t3, ", ");
    }
    t3 = t1.sb_0;
    t4 = $.getInterceptor$JSArray(t3);
    t5 = t1.i_1;
    if (t5 !== (t5 | 0))
      throw $.iae(t5);
    if (t5 < 0 || t5 >= t2.length)
      throw $.ioore(t5);
    t4.add$1(t3, $.Error_safeToString(t2[t5]));
  }
  t2 = this._namedArguments;
  if (!(t2 == null))
    $.getInterceptor$JSArray(t2).forEach$1(t2, new $.NoSuchMethodError_toString_anon(t1));
  t2 = this._existingArgumentNames;
  if (typeof t2 !== 'string' && (typeof t2 !== 'object' || t2 === null || t2.constructor !== Array && !t2.is$JavaScriptIndexingBehavior()))
    return this.toString$0$bailout(2, t1, t2);
  t3 = t1.sb_0;
  actualParameters = $.getInterceptor(t3).toString$0(t3);
  t1.sb_0 = $.StringBuffer_StringBuffer("");
  for (i = 0; i < t2.length; ++i) {
    if (i > 0) {
      t3 = t1.sb_0;
      $.getInterceptor$JSArray(t3).add$1(t3, ", ");
    }
    t3 = t1.sb_0;
    t4 = $.getInterceptor$JSArray(t3);
    if (i >= t2.length)
      throw $.ioore(i);
    t4.add$1(t3, t2[i]);
  }
  t1 = t1.sb_0;
  formalParameters = $.getInterceptor(t1).toString$0(t1);
  t1 = this._memberName;
  return "NoSuchMethodError: incorrect number of arguments passed to method named '" + $.S(t1) + "'\n" + "Receiver: " + $.S($.Error_safeToString(this._receiver)) + "\n" + "Tried calling: " + $.S(t1) + "(" + $.S(actualParameters) + ")\n" + "Found: " + $.S(t1) + "(" + $.S(formalParameters) + ")";
},
 toString$0$bailout: function(state0, env0, env1) {
  switch (state0) {
    case 1:
      t2 = env1;
      t1 = env0;
      break;
    case 2:
      t2 = env1;
      t1 = env0;
      break;
  }
  switch (state0) {
    case 0:
      t1 = {};
      t1.sb_0 = $.StringBuffer_StringBuffer("");
      t1.i_1 = 0;
      t2 = this._arguments;
    case 1:
      state0 = 0;
      if (!(t2 == null))
        for (t3 = $.getInterceptor$JSStringJSArray(t2); $.ltB(t1.i_1, t3.get$length(t2)); t1.i_1 = $.add(t1.i_1, 1)) {
          if ($.gtB(t1.i_1, 0)) {
            t4 = t1.sb_0;
            $.getInterceptor$JSArray(t4).add$1(t4, ", ");
          }
          t4 = t1.sb_0;
          $.getInterceptor$JSArray(t4).add$1(t4, $.Error_safeToString(t3.operator$index$1(t2, t1.i_1)));
        }
      t2 = this._namedArguments;
      if (!(t2 == null))
        $.getInterceptor$JSArray(t2).forEach$1(t2, new $.NoSuchMethodError_toString_anon(t1));
      t2 = this._existingArgumentNames;
    case 2:
      var t1, t2, t3, t4, actualParameters, i, formalParameters;
      state0 = 0;
      if (t2 == null)
        return "NoSuchMethodError : method not found: '" + $.S(this._memberName) + "'\n" + "Receiver: " + $.S($.Error_safeToString(this._receiver)) + "\n" + "Arguments: [" + $.S(t1.sb_0) + "]";
      else {
        t3 = t1.sb_0;
        actualParameters = $.getInterceptor(t3).toString$0(t3);
        t1.sb_0 = $.StringBuffer_StringBuffer("");
        for (t3 = $.getInterceptor$JSStringJSArray(t2), i = 0; $.ltB(i, t3.get$length(t2)); ++i) {
          if (i > 0) {
            t4 = t1.sb_0;
            $.getInterceptor$JSArray(t4).add$1(t4, ", ");
          }
          t4 = t1.sb_0;
          $.getInterceptor$JSArray(t4).add$1(t4, t3.operator$index$1(t2, i));
        }
        t1 = t1.sb_0;
        formalParameters = $.getInterceptor(t1).toString$0(t1);
        t1 = this._memberName;
        return "NoSuchMethodError: incorrect number of arguments passed to method named '" + $.S(t1) + "'\n" + "Receiver: " + $.S($.Error_safeToString(this._receiver)) + "\n" + "Tried calling: " + $.S(t1) + "(" + $.S(actualParameters) + ")\n" + "Found: " + $.S(t1) + "(" + $.S(formalParameters) + ")";
      }
  }
}
};

$$.UnsupportedError = {"":"Object;message",
 toString$0: function() {
  return "Unsupported operation: " + this.message;
}
};

$$.StateError = {"":"Object;message",
 toString$0: function() {
  return "Bad state: " + this.message;
}
};

$$.StackOverflowError = {"":"Object;",
 toString$0: function() {
  return "Stack Overflow";
}
};

$$.RuntimeError = {"":"Object;message",
 toString$0: function() {
  return "RuntimeError: " + this.message;
}
};

$$._ExceptionImplementation = {"":"Object;message",
 toString$0: function() {
  var t1 = this.message;
  if (t1 == null)
    return "Exception";
  return "Exception: " + $.S(t1);
}
};

$$.FormatException = {"":"Object;message",
 toString$0: function() {
  return "FormatException: " + $.S(this.message);
}
};

$$.IllegalJSRegExpException = {"":"Object;_pattern,_errmsg",
 toString$0: function() {
  return "IllegalJSRegExpException: '" + $.S(this._pattern) + "' '" + this._errmsg + "'";
}
};

$$._HashMapImpl = {"":"Object;_liblib0$_keys,_values,_loadLimit,_numberOfEntries,_numberOfDeleted",
 _probeForAdding$1: function(key) {
  var t1, hash, insertionIndex, numberOfProbes, existingKey, numberOfProbes0;
  if (key == null)
    throw $.$$throw($.ArgumentError$(null));
  t1 = $.getInterceptor(key).get$hashCode(key);
  if (t1 !== (t1 | 0))
    return this._probeForAdding$1$bailout(1, key, t1);
  hash = (t1 & this._liblib0$_keys.length - 1) >>> 0;
  for (insertionIndex = -1, numberOfProbes = 1; true; numberOfProbes = numberOfProbes0) {
    t1 = this._liblib0$_keys;
    if (hash < 0 || hash >= t1.length)
      throw $.ioore(hash);
    existingKey = t1[hash];
    if (existingKey == null) {
      if (insertionIndex < 0)
        return hash;
      return insertionIndex;
    } else if ($.eqB(existingKey, key))
      return hash;
    else if (insertionIndex < 0 && existingKey === $.CONSTANT5)
      insertionIndex = hash;
    numberOfProbes0 = numberOfProbes + 1;
    hash = $._HashMapImpl__nextProbe(hash, numberOfProbes, this._liblib0$_keys.length);
    if (hash !== (hash | 0))
      return this._probeForAdding$1$bailout(2, key, insertionIndex, hash, numberOfProbes0);
  }
},
 _probeForAdding$1$bailout: function(state0, env0, env1, env2, env3) {
  switch (state0) {
    case 1:
      t1 = env1;
      key = env0;
      break;
    case 2:
      numberOfProbes0 = env3;
      hash = env2;
      insertionIndex = env1;
      key = env0;
      break;
  }
  switch (state0) {
    case 0:
      if (key == null)
        throw $.$$throw($.ArgumentError$(null));
      t1 = $.getInterceptor(key).get$hashCode(key);
    case 1:
      state0 = 0;
      hash = $.and(t1, this._liblib0$_keys.length - 1);
      insertionIndex = -1;
      numberOfProbes = 1;
    case 2:
      var t1, key, hash, insertionIndex, numberOfProbes, existingKey, numberOfProbes0;
      L0:
        while (true)
          switch (state0) {
            case 0:
              if (!true)
                break L0;
              t1 = this._liblib0$_keys;
              if (hash !== (hash | 0))
                throw $.iae(hash);
              if (hash < 0 || hash >= t1.length)
                throw $.ioore(hash);
              existingKey = t1[hash];
              if (existingKey == null) {
                if (insertionIndex < 0)
                  return hash;
                return insertionIndex;
              } else if ($.eqB(existingKey, key))
                return hash;
              else if (insertionIndex < 0 && existingKey === $.CONSTANT5)
                insertionIndex = hash;
              numberOfProbes0 = numberOfProbes + 1;
              hash = $._HashMapImpl__nextProbe(hash, numberOfProbes, this._liblib0$_keys.length);
            case 2:
              state0 = 0;
              numberOfProbes = numberOfProbes0;
          }
  }
},
 _probeForLookup$1: function(key) {
  var hash, numberOfProbes, t1, existingKey, numberOfProbes0;
  if (key == null)
    throw $.$$throw($.ArgumentError$(null));
  hash = $.and($.getInterceptor(key).get$hashCode(key), this._liblib0$_keys.length - 1);
  if (hash !== (hash | 0))
    return this._probeForLookup$1$bailout(1, key, hash);
  for (numberOfProbes = 1; true; numberOfProbes = numberOfProbes0) {
    t1 = this._liblib0$_keys;
    if (hash !== (hash | 0))
      throw $.iae(hash);
    if (hash < 0 || hash >= t1.length)
      throw $.ioore(hash);
    existingKey = t1[hash];
    if (existingKey == null)
      return -1;
    if ($.eqB(existingKey, key))
      return hash;
    numberOfProbes0 = numberOfProbes + 1;
    hash = $._HashMapImpl__nextProbe(hash, numberOfProbes, this._liblib0$_keys.length);
  }
},
 _probeForLookup$1$bailout: function(state0, key, hash) {
  var numberOfProbes, t1, existingKey, numberOfProbes0;
  for (numberOfProbes = 1; true; numberOfProbes = numberOfProbes0) {
    t1 = this._liblib0$_keys;
    if (hash !== (hash | 0))
      throw $.iae(hash);
    if (hash < 0 || hash >= t1.length)
      throw $.ioore(hash);
    existingKey = t1[hash];
    if (existingKey == null)
      return -1;
    if ($.eqB(existingKey, key))
      return hash;
    numberOfProbes0 = numberOfProbes + 1;
    hash = $._HashMapImpl__nextProbe(hash, numberOfProbes, this._liblib0$_keys.length);
  }
},
 _ensureCapacity$0: function() {
  var newNumberOfEntries, capacity, numberOfFreeOrDeleted, t1;
  newNumberOfEntries = $.add(this._numberOfEntries, 1);
  if ($.geB(newNumberOfEntries, this._loadLimit)) {
    this._grow$1(this._liblib0$_keys.length * 2);
    return;
  }
  capacity = this._liblib0$_keys.length;
  if (typeof newNumberOfEntries !== 'number')
    throw $.iae(newNumberOfEntries);
  numberOfFreeOrDeleted = capacity - newNumberOfEntries;
  t1 = this._numberOfDeleted;
  if (t1 > numberOfFreeOrDeleted - t1)
    this._grow$1(capacity);
},
 _grow$1: function(newCapacity) {
  var capacity, oldKeys, oldValues, i, key, value, newIndex, t1;
  capacity = this._liblib0$_keys.length;
  this._loadLimit = $.tdiv($.mul(newCapacity, 3), 4);
  oldKeys = this._liblib0$_keys;
  oldValues = this._values;
  this._liblib0$_keys = $.List_List(newCapacity);
  this._values = $.List_List(newCapacity);
  for (i = 0; i < capacity; ++i) {
    if (i >= oldKeys.length)
      throw $.ioore(i);
    key = oldKeys[i];
    if (key == null || key === $.CONSTANT5)
      continue;
    if (i >= oldValues.length)
      throw $.ioore(i);
    value = oldValues[i];
    newIndex = this._probeForAdding$1(key);
    t1 = this._liblib0$_keys;
    if (newIndex !== (newIndex | 0))
      throw $.iae(newIndex);
    if (newIndex < 0 || newIndex >= t1.length)
      throw $.ioore(newIndex);
    t1[newIndex] = key;
    t1 = this._values;
    if (newIndex >= t1.length)
      throw $.ioore(newIndex);
    t1[newIndex] = value;
  }
  this._numberOfDeleted = 0;
},
 clear$0: function() {
  var t1, length$, t2, t3, i;
  this._numberOfEntries = 0;
  this._numberOfDeleted = 0;
  t1 = this._liblib0$_keys;
  length$ = t1.length;
  for (t2 = this._values, t3 = t2.length, i = 0; i < length$; ++i) {
    t1[i] = null;
    if (i >= t3)
      throw $.ioore(i);
    t2[i] = null;
  }
},
 operator$indexSet$2: function(key, value) {
  var index, t1;
  this._ensureCapacity$0();
  index = this._probeForAdding$1(key);
  t1 = this._liblib0$_keys;
  if (index !== (index | 0))
    throw $.iae(index);
  if (index < 0 || index >= t1.length)
    throw $.ioore(index);
  t1 = t1[index];
  if (t1 == null || t1 === $.CONSTANT5)
    this._numberOfEntries = $.add(this._numberOfEntries, 1);
  t1 = this._liblib0$_keys;
  if (index >= t1.length)
    throw $.ioore(index);
  t1[index] = key;
  t1 = this._values;
  if (index >= t1.length)
    throw $.ioore(index);
  t1[index] = value;
},
 operator$index$1: function(key) {
  var index, t1;
  index = this._probeForLookup$1(key);
  if (typeof index !== 'number')
    return this.operator$index$1$bailout0(1, index);
  if (index < 0)
    return;
  t1 = this._values;
  if (index !== (index | 0))
    throw $.iae(index);
  if (index < 0 || index >= t1.length)
    throw $.ioore(index);
  return t1[index];
},
 operator$index$1$bailout0: function(state0, index) {
  var t1;
  if ($.ltB(index, 0))
    return;
  t1 = this._values;
  if (index !== (index | 0))
    throw $.iae(index);
  if (index < 0 || index >= t1.length)
    throw $.ioore(index);
  return t1[index];
},
 get$isEmpty: function() {
  return $.eq(this._numberOfEntries, 0);
},
 get$length: function() {
  return this._numberOfEntries;
},
 forEach$1: function(f) {
  var length$, i, t1, key;
  length$ = this._liblib0$_keys.length;
  for (i = 0; i < length$; ++i) {
    t1 = this._liblib0$_keys;
    if (i >= t1.length)
      throw $.ioore(i);
    key = t1[i];
    if (!(key == null) && !(key === $.CONSTANT5)) {
      t1 = this._values;
      if (i >= t1.length)
        throw $.ioore(i);
      f.call$2(key, t1[i]);
    }
  }
},
 containsKey$1: function(key) {
  return !$.eqB(this._probeForLookup$1(key), -1);
},
 toString$0: function() {
  return $.Maps_mapToString(this);
},
 _HashMapImpl$0: function() {
  this._numberOfEntries = 0;
  this._numberOfDeleted = 0;
  this._loadLimit = $._HashMapImpl__computeLoadLimit(8);
  this._liblib0$_keys = $.List_List(8);
  this._values = $.List_List(8);
},
 is$Map: function() { return true; }
};

$$._DeletedKeySentinel = {"":"Object;"
};

$$._KeyValuePair = {"":"Object;key>,value=",
 key$1: function(arg0) {
  return this.key.call$1(arg0);
}
};

$$._LinkedHashMapImpl = {"":"Object;_list,_map",
 operator$indexSet$2: function(key, value) {
  var t1;
  if (this._map.containsKey$1(key) === true) {
    t1 = this._map;
    $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, key).get$element().set$value(value);
  } else {
    this._list.addLast$1($._KeyValuePair$(key, value));
    $.indexSet(this._map, key, this._list.lastEntry$0());
  }
},
 operator$index$1: function(key) {
  var t1, entry;
  t1 = this._map;
  if (typeof t1 !== 'string' && (typeof t1 !== 'object' || t1 === null || t1.constructor !== Array && !t1.is$JavaScriptIndexingBehavior()))
    return this.operator$index$1$bailout(1, key, t1);
  if (key !== (key | 0))
    throw $.iae(key);
  if (key < 0 || key >= t1.length)
    throw $.ioore(key);
  entry = t1[key];
  if (entry == null)
    return;
  return entry.get$element().get$value();
},
 operator$index$1$bailout: function(state0, key, t1) {
  var entry = $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, key);
  if (entry == null)
    return;
  return entry.get$element().get$value();
},
 forEach$1: function(f) {
  this._list.forEach$1(new $._LinkedHashMapImpl_forEach_anon(f));
},
 containsKey$1: function(key) {
  return this._map.containsKey$1(key);
},
 get$length: function() {
  var t1 = this._map;
  return $.getInterceptor$JSStringJSArray(t1).get$length(t1);
},
 get$isEmpty: function() {
  return $.eq(this.get$length(), 0);
},
 clear$0: function() {
  var t1 = this._map;
  $.getInterceptor$JSArray(t1).clear$0(t1);
  this._list.clear$0();
},
 toString$0: function() {
  return $.Maps_mapToString(this);
},
 _LinkedHashMapImpl$0: function() {
  this._map = $.HashMap_HashMap();
  this._list = $.DoubleLinkedQueue$();
},
 is$Map: function() { return true; }
};

$$.Object = {"":";",
 operator$eq$1: function(other) {
  return this === other;
},
 get$hashCode: function() {
  return $.Primitives_objectHashCode(this);
},
 toString$0: function() {
  return $.Primitives_objectToString(this);
}
};

$$.DoubleLinkedQueueEntry = {"":"Object;_previous=,_next=,_element>",
 _link$2: function(p, n) {
  this._next = n;
  this._previous = p;
  p.set$_next(this);
  n.set$_previous(this);
},
 prepend$1: function(e) {
  $.DoubleLinkedQueueEntry$(e)._link$2(this._previous, this);
},
 remove$0: function() {
  var t1 = this._next;
  this._previous.set$_next(t1);
  t1 = this._previous;
  this._next.set$_previous(t1);
  this._next = null;
  this._previous = null;
  return this._element;
},
 _asNonSentinelEntry$0: function() {
  return this;
},
 previousEntry$0: function() {
  return this._previous._asNonSentinelEntry$0();
},
 get$element: function() {
  return this._element;
},
 DoubleLinkedQueueEntry$1: function(e) {
  this._element = e;
}
};

$$._DoubleLinkedQueueEntrySentinel = {"":"DoubleLinkedQueueEntry;_previous,_next,_element",
 remove$0: function() {
  throw $.$$throw($.StateError$("Empty queue"));
},
 _asNonSentinelEntry$0: function() {
  return;
},
 get$element: function() {
  throw $.$$throw($.StateError$("Empty queue"));
},
 _DoubleLinkedQueueEntrySentinel$0: function() {
  this._link$2(this, this);
}
};

$$.DoubleLinkedQueue = {"":"Object;_sentinel",
 addLast$1: function(value) {
  this._sentinel.prepend$1(value);
},
 add$1: function(value) {
  this._sentinel.prepend$1(value);
},
 addAll$1: function(collection) {
  var t1, t2;
  for (t1 = $.getInterceptor$JSArray(collection).iterator$0(collection); t1.get$hasNext() === true;) {
    t2 = t1.next$0();
    this._sentinel.prepend$1(t2);
  }
},
 removeLast$0: function() {
  return this._sentinel._previous.remove$0();
},
 get$last: function() {
  return this._sentinel._previous.get$element();
},
 lastEntry$0: function() {
  return this._sentinel.previousEntry$0();
},
 get$length: function() {
  var t1 = {};
  t1.counter_0 = 0;
  this.forEach$1(new $.DoubleLinkedQueue_length_anon(t1));
  return t1.counter_0;
},
 get$isEmpty: function() {
  var t1 = this._sentinel;
  return t1._next === t1;
},
 clear$0: function() {
  var t1 = this._sentinel;
  t1._next = t1;
  t1 = this._sentinel;
  t1._previous = t1;
},
 forEach$1: function(f) {
  var entry, nextEntry;
  entry = this._sentinel._next;
  for (; !(entry === this._sentinel); entry = nextEntry) {
    nextEntry = entry.get$_next();
    f.call$1(entry.get$_element());
  }
},
 some$1: function(f) {
  var entry, nextEntry;
  entry = this._sentinel._next;
  for (; !(entry === this._sentinel); entry = nextEntry) {
    nextEntry = entry.get$_next();
    if (f.call$1(entry.get$_element()) === true)
      return true;
  }
  return false;
},
 map$1: function(f) {
  var other, entry, t1, nextEntry;
  other = $.Queue_Queue();
  entry = this._sentinel._next;
  for (t1 = $.getInterceptor$JSArray(other); !(entry === this._sentinel); entry = nextEntry) {
    nextEntry = entry.get$_next();
    t1.addLast$1(other, f.call$1(entry.get$_element()));
  }
  return other;
},
 filter$1: function(f) {
  var other, entry, t1, nextEntry;
  other = $.Queue_Queue();
  entry = this._sentinel._next;
  for (t1 = $.getInterceptor$JSArray(other); !(entry === this._sentinel); entry = nextEntry) {
    nextEntry = entry.get$_next();
    if (f.call$1(entry.get$_element()) === true)
      t1.addLast$1(other, entry.get$_element());
  }
  return other;
},
 iterator$0: function() {
  return $._DoubleLinkedQueueIterator$(this._sentinel);
},
 toString$0: function() {
  return $.Collections_collectionToString(this);
},
 DoubleLinkedQueue$0: function() {
  this._sentinel = $._DoubleLinkedQueueEntrySentinel$();
},
 is$Collection: function() { return true; }
};

$$._DoubleLinkedQueueIterator = {"":"Object;_sentinel,_currentEntry",
 get$hasNext: function() {
  var t1, t2;
  t1 = this._currentEntry.get$_next();
  t2 = this._sentinel;
  return !(t1 == null ? t2 == null : t1 === t2);
},
 next$0: function() {
  if (this.get$hasNext() !== true)
    throw $.$$throw($.StateError$("No more elements"));
  this._currentEntry = this._currentEntry.get$_next();
  return this._currentEntry.get$element();
},
 _DoubleLinkedQueueIterator$1: function(_sentinel) {
  this._currentEntry = this._sentinel;
}
};

$$._StringBufferImpl = {"":"Object;_buffer,_length",
 get$length: function() {
  return this._length;
},
 get$isEmpty: function() {
  return $.eq(this._length, 0);
},
 add$1: function(obj) {
  var str, t1;
  str = $.getInterceptor(obj).toString$0(obj);
  if (!(typeof str === 'string'))
    throw $.$$throw($.ArgumentError$("toString() did not return a string"));
  if ($.CONSTANT1.get$isEmpty(str) === true)
    return;
  t1 = this._buffer;
  $.getInterceptor$JSArray(t1).add$1(t1, str);
  t1 = this._length;
  if (typeof t1 !== 'number')
    return this.add$1$bailout(1, t1, str);
  this._length = t1 + str.length;
},
 add$1$bailout: function(state0, t1, str) {
  this._length = $.add(t1, str.length);
},
 addAll$1: function(objects) {
  var t1;
  for (t1 = $.getInterceptor$JSArray(objects).iterator$0(objects); t1.get$hasNext() === true;)
    this.add$1(t1.next$0());
},
 clear$0: function() {
  this._buffer = $.List_List(null);
  this._length = 0;
},
 toString$0: function() {
  var t1, result;
  t1 = this._buffer;
  if ($.eqB($.getInterceptor$JSStringJSArray(t1).get$length(t1), 0))
    return "";
  t1 = this._buffer;
  if ($.eqB($.getInterceptor$JSStringJSArray(t1).get$length(t1), 1)) {
    t1 = this._buffer;
    return $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, 0);
  }
  result = $.stringJoinUnchecked($.Strings__toJsStringArray(this._buffer), "");
  t1 = this._buffer;
  $.getInterceptor$JSArray(t1).clear$0(t1);
  t1 = this._buffer;
  $.getInterceptor$JSArray(t1).add$1(t1, result);
  return result;
},
 _StringBufferImpl$1: function(content$) {
  this.clear$0();
  this.add$1(content$);
}
};

$$.ObjectInterceptor = {"":"Object;",
 toString$0: function(receiver) {
  return receiver.toString$0();
},
 charCodeAt$1: function(receiver, a0) {
  return receiver.charCodeAt$1(a0);
},
 substring$1: function(receiver, a0) {
  return receiver.substring$1(a0);
},
 iterator$0: function(receiver) {
  return receiver.iterator$0();
},
 add$1: function(receiver, a0) {
  return receiver.add$1(a0);
},
 removeRange$2: function(receiver, a0, a1) {
  return receiver.removeRange$2(a0, a1);
},
 removeLast$0: function(receiver) {
  return receiver.removeLast$0();
},
 operator$index$1: function(receiver, a0) {
  return receiver.operator$index$1(a0);
},
 replaceAll$2: function(receiver, a0, a1) {
  return receiver.replaceAll$2(a0, a1);
},
 map$1: function(receiver, a0) {
  return receiver.map$1(a0);
},
 abs$0: function(receiver) {
  return receiver.abs$0();
},
 set$length: function(receiver, value) {
  return receiver.set$length(value);
},
 getRange$2: function(receiver, a0, a1) {
  return receiver.getRange$2(a0, a1);
},
 toLowerCase$0: function(receiver) {
  return receiver.toLowerCase$0();
},
 get$length: function(receiver) {
  return receiver.get$length();
},
 forEach$1: function(receiver, a0) {
  return receiver.forEach$1(a0);
},
 contains$2: function(receiver, a0, a1) {
  return receiver.contains$2(a0, a1);
},
 ceil$0: function(receiver) {
  return receiver.ceil$0();
},
 addLast$1: function(receiver, a0) {
  return receiver.addLast$1(a0);
},
 indexOf$2: function(receiver, a0, a1) {
  return receiver.indexOf$2(a0, a1);
},
 toInt$0: function(receiver) {
  return receiver.toInt$0();
},
 indexOf$1: function(receiver, a0) {
  return receiver.indexOf$1(a0);
},
 truncate$0: function(receiver) {
  return receiver.truncate$0();
},
 get$hashCode: function(receiver) {
  return receiver.get$hashCode();
},
 endsWith$1: function(receiver, a0) {
  return receiver.endsWith$1(a0);
},
 clear$0: function(receiver) {
  return receiver.clear$0();
},
 filter$1: function(receiver, a0) {
  return receiver.filter$1(a0);
},
 get$last: function(receiver) {
  return receiver.get$last();
},
 some$1: function(receiver, a0) {
  return receiver.some$1(a0);
},
 get$isNaN: function(receiver) {
  return receiver.get$isNaN();
},
 get$isEmpty: function(receiver) {
  return receiver.get$isEmpty();
},
 allMatches$1: function(receiver, a0) {
  return receiver.allMatches$1(a0);
},
 floor$0: function(receiver) {
  return receiver.floor$0();
},
 addAll$1: function(receiver, a0) {
  return receiver.addAll$1(a0);
},
 removeAt$1: function(receiver, a0) {
  return receiver.removeAt$1(a0);
},
 get$isInfinite: function(receiver) {
  return receiver.get$isInfinite();
}
};

$$.JSFunction = {"":"Object;",
 toString$0: function(receiver) {
  return "Closure";
}
};

$$.JSBool = {"":"Object;",
 toString$0: function(receiver) {
  return String(receiver);
},
 get$hashCode: function(receiver) {
  return receiver ? 519018 : 218159;
},
 is$bool: true
};

$$.JSNull = {"":"Object;",
 toString$0: function(receiver) {
  return "null";
},
 get$hashCode: function(receiver) {
  return 0;
}
};

$$.JSArray = {"":"Object;",
 add$1: function(receiver, value) {
  $.checkGrowable(receiver, "add");
  receiver.push(value);
},
 removeAt$1: function(receiver, index) {
  if (!(typeof index === 'number' && Math.floor(index) === index))
    throw $.$$throw($.ArgumentError$(index));
  if (index < 0 || index >= receiver.length)
    throw $.$$throw($.RangeError$value(index));
  $.checkGrowable(receiver, "removeAt");
  return receiver.splice(index, 1)[0];
},
 removeLast$0: function(receiver) {
  $.checkGrowable(receiver, "removeLast");
  if (receiver.length === 0)
    throw $.$$throw($.RangeError$value(-1));
  return receiver.pop();
},
 filter$1: function(receiver, f) {
  return $.Collections_filter(receiver, [], f);
},
 addAll$1: function(receiver, collection) {
  var t1;
  for (t1 = $.getInterceptor$JSArray(collection).iterator$0(collection); t1.get$hasNext() === true;)
    $.CONSTANT0.add$1(receiver, t1.next$0());
},
 addLast$1: function(receiver, value) {
  $.checkGrowable(receiver, "addLast");
  receiver.push(value);
},
 clear$0: function(receiver) {
  this.set$length(receiver, 0);
},
 forEach$1: function(receiver, f) {
  return $.Collections_forEach(receiver, f);
},
 map$1: function(receiver, f) {
  return $.Collections_map(receiver, [], f);
},
 getRange$2: function(receiver, start, length$) {
  var t1, end;
  if (0 === length$)
    return [];
  $.checkNull(start);
  $.checkNull(length$);
  t1 = length$ < 0;
  if (t1)
    throw $.$$throw($.ArgumentError$(length$));
  if (start < 0)
    throw $.$$throw($.RangeError$value(start));
  end = start + length$;
  if (end > receiver.length)
    throw $.$$throw($.RangeError$value(length$));
  if (t1)
    throw $.$$throw($.ArgumentError$(length$));
  return receiver.slice(start, end);
},
 get$last: function(receiver) {
  var t1, t2;
  t1 = receiver.length;
  t2 = t1 - 1;
  if (t2 < 0)
    throw $.ioore(t2);
  return receiver[t2];
},
 removeRange$2: function(receiver, start, length$) {
  var receiverLength, t1, t2;
  $.checkGrowable(receiver, "removeRange");
  if (length$ === 0)
    return;
  $.checkNull(start);
  $.checkNull(length$);
  if (length$ < 0)
    throw $.$$throw($.ArgumentError$(length$));
  receiverLength = receiver.length;
  if (start < 0 || start >= receiverLength)
    throw $.$$throw($.RangeError$value(start));
  t1 = start + length$;
  if (t1 > receiverLength)
    throw $.$$throw($.RangeError$value(t1));
  t2 = receiverLength - length$;
  $.Arrays_copy(receiver, t1, receiver, start, t2 - start);
  $.CONSTANT0.set$length(receiver, t2);
},
 some$1: function(receiver, f) {
  return $.Collections_some(receiver, f);
},
 indexOf$2: function(receiver, element, start) {
  if (!(typeof start === 'number' && Math.floor(start) === start))
    throw $.$$throw($.ArgumentError$(start));
  return $.Arrays_indexOf(receiver, element, start, receiver.length);
},
 indexOf$1: function($receiver, element) {
  return this.indexOf$2($receiver, element, 0);
},
 get$isEmpty: function(receiver) {
  return receiver.length === 0;
},
 toString$0: function(receiver) {
  return $.Collections_collectionToString(receiver);
},
 iterator$0: function(receiver) {
  return $.ListIterator$(receiver);
},
 get$hashCode: function(receiver) {
  return $.Primitives_objectHashCode(receiver);
},
 get$length: function(receiver) {
  return receiver.length;
},
 set$length: function(receiver, newLength) {
  if (!(typeof newLength === 'number' && Math.floor(newLength) === newLength))
    throw $.$$throw($.ArgumentError$(newLength));
  if (newLength < 0)
    throw $.$$throw($.RangeError$value(newLength));
  $.checkGrowable(receiver, "set length");
  receiver.length = newLength;
},
 operator$index$1: function(receiver, index) {
  if (!(typeof index === 'number' && Math.floor(index) === index))
    throw $.$$throw($.ArgumentError$(index));
  if (index >= receiver.length || index < 0)
    throw $.$$throw($.RangeError$value(index));
  return receiver[index];
},
 is$List: function() { return true; },
 is$Collection: function() { return true; }
};

$$.JSNumber = {"":"Object;",
 get$isNaN: function(receiver) {
  return isNaN(receiver);
},
 abs$0: function(receiver) {
  return Math.abs(receiver);
},
 toInt$0: function(receiver) {
  var truncated, t1;
  if (this.get$isNaN(receiver) === true)
    throw $.$$throw($.FormatException$("NaN"));
  if (this.get$isInfinite(receiver) === true)
    throw $.$$throw($.FormatException$("Infinity"));
  truncated = this.truncate$0(receiver);
  if (typeof truncated !== 'number')
    return this.toInt$0$bailout(1, truncated);
  if (truncated == -0.0)
    t1 = 0;
  else
    t1 = truncated;
  return t1;
},
 toInt$0$bailout: function(state0, truncated) {
  return truncated == -0.0 ? 0 : truncated;
},
 ceil$0: function(receiver) {
  return Math.ceil(receiver);
},
 floor$0: function(receiver) {
  return Math.floor(receiver);
},
 get$isInfinite: function(receiver) {
  return receiver == Infinity || receiver == -Infinity;
},
 truncate$0: function(receiver) {
  return receiver < 0 ? this.ceil$0(receiver) : this.floor$0(receiver);
},
 toString$0: function(receiver) {
  if (receiver === 0 && (1 / receiver) < 0)
    return "-0.0";
  else
    return String(receiver);
},
 get$hashCode: function(receiver) {
  return receiver & 536870911;
}
};

$$.JSInt = {"":"JSNumber;"
};

$$.JSDouble = {"":"JSNumber;"
};

$$.JSString = {"":"Object;",
 charCodeAt$1: function(receiver, index) {
  if (index < 0)
    throw $.$$throw($.RangeError$value(index));
  if (index >= receiver.length)
    throw $.$$throw($.RangeError$value(index));
  return receiver.charCodeAt(index);
},
 allMatches$1: function(receiver, str) {
  $.checkString(str);
  return $.allMatchesInStringUnchecked(receiver, str);
},
 endsWith$1: function(receiver, other) {
  var otherLength, t1;
  $.checkString(other);
  otherLength = other.length;
  t1 = receiver.length;
  if (otherLength > t1)
    return false;
  return other === this.substring$1(receiver, t1 - otherLength);
},
 replaceAll$2: function(receiver, from, to) {
  $.checkString(to);
  return $.stringReplaceAllUnchecked(receiver, from, to);
},
 substring$2: function(receiver, startIndex, endIndex) {
  $.checkNum(startIndex);
  if (endIndex == null)
    endIndex = receiver.length;
  $.checkNum(endIndex);
  if ($.ltB(startIndex, 0))
    throw $.$$throw($.RangeError$value(startIndex));
  if ($.gtB(startIndex, endIndex))
    throw $.$$throw($.RangeError$value(startIndex));
  if ($.gtB(endIndex, receiver.length))
    throw $.$$throw($.RangeError$value(endIndex));
  return receiver.substring(startIndex, endIndex);
},
 substring$1: function($receiver, startIndex) {
  return this.substring$2($receiver, startIndex, null);
},
 toLowerCase$0: function(receiver) {
  return receiver.toLowerCase();
},
 indexOf$2: function(receiver, other, start) {
  $.checkNull(other);
  if (!(typeof start === 'number' && Math.floor(start) === start))
    throw $.$$throw($.ArgumentError$(start));
  if (!(typeof other === 'string'))
    throw $.$$throw($.ArgumentError$(other));
  if (start < 0)
    return -1;
  return receiver.indexOf(other, start);
},
 indexOf$1: function($receiver, other) {
  return this.indexOf$2($receiver, other, 0);
},
 contains$2: function(receiver, other, startIndex) {
  $.checkNull(other);
  return $.stringContainsUnchecked(receiver, other, startIndex);
},
 get$isEmpty: function(receiver) {
  return receiver.length === 0;
},
 toString$0: function(receiver) {
  return receiver;
},
 get$hashCode: function(receiver) {
  var hash, i, hash0, hash1;
  for (hash = 0, i = 0; i < receiver.length; ++i, hash = hash1) {
    hash0 = 536870911 & hash + receiver.charCodeAt(i);
    hash1 = 536870911 & hash0 + ((524287 & hash0) << 10 >>> 0);
    hash1 = hash1 ^ (hash1 >> 6);
  }
  hash0 = 536870911 & hash + ((67108863 & hash) << 3 >>> 0);
  hash0 = hash0 ^ (hash0 >> 11);
  return 536870911 & hash0 + ((16383 & hash0) << 15 >>> 0);
},
 get$length: function(receiver) {
  return receiver.length;
},
 operator$index$1: function(receiver, index) {
  if (!(typeof index === 'number' && Math.floor(index) === index))
    throw $.$$throw($.ArgumentError$(index));
  if (index >= receiver.length || index < 0)
    throw $.$$throw($.RangeError$value(index));
  return receiver[index];
},
 is$String: true
};

$$.Assets = {"":"Object;onComplete>,test=,tree=,bush=,warrior=,note1=,note2=,zodiac_taurus=,zodiac_leo=,zodiac_capricorn=,zodiac_pisces<,zodiac_cancer=,dragon_part=,dragon_head=,gold=,grendel=,fireball=,statue=,stone1=,stone2=,bull=,gear=,gear_particle=,blood1=,blood2=,blood3=,cake=,person=,rabbit=,red_warrior=,warrior_attack=,red_warrior_attack=,happybirthday=,dragon_lair=,ork_temple=,cliff=,meadhall=,meadhall_door=,dark_zone=,img_fog=,img_title=,img_play=,img_credits=,img_select=,healthbar=,health=",
 onComplete$0: function() {
  return this.onComplete.call$0();
},
 Assets$1: function(onComplete, box_0) {
  var t1;
  box_0.completedAnimations_0 = 0;
  t1 = new $.loadImg(new $.complete(box_0, this, 45));
  t1.call$2("img/test.png", new $.anon(this));
  t1.call$2("img/tree.png", new $.anon0(this));
  t1.call$2("img/bush.png", new $.anon1(this));
  t1.call$2("img/note1.png", new $.anon2(this));
  t1.call$2("img/note2.png", new $.anon3(this));
  t1.call$2("img/grendel.png", new $.anon4(this));
  t1.call$2("img/warrior.png", new $.anon5(this));
  t1.call$2("img/red_warrior.png", new $.anon6(this));
  t1.call$2("img/red_warrior_attack.png", new $.anon7(this));
  t1.call$2("img/warrior_attack.png", new $.anon8(this));
  t1.call$2("img/dragon_block.png", new $.anon9(this));
  t1.call$2("img/dragon_head.png", new $.anon10(this));
  t1.call$2("img/gold.png", new $.anon11(this));
  t1.call$2("img/fireball.png", new $.anon12(this));
  t1.call$2("img/statue.png", new $.anon13(this));
  t1.call$2("img/stone1.png", new $.anon14(this));
  t1.call$2("img/stone2.png", new $.anon15(this));
  t1.call$2("img/bull.png", new $.anon16(this));
  t1.call$2("img/gear.png", new $.anon17(this));
  t1.call$2("img/gear_particle.png", new $.anon18(this));
  t1.call$2("img/blood1.png", new $.anon19(this));
  t1.call$2("img/blood2.png", new $.anon20(this));
  t1.call$2("img/blood3.png", new $.anon21(this));
  t1.call$2("img/cake.png", new $.anon22(this));
  t1.call$2("img/happybirthday.png", new $.anon23(this));
  t1.call$2("img/person.png", new $.anon24(this));
  t1.call$2("img/rabbit.png", new $.anon25(this));
  t1.call$2("img/fog.png", new $.anon26(this));
  t1.call$2("img/title.png", new $.anon27(this));
  t1.call$2("img/select.png", new $.anon28(this));
  t1.call$2("img/credits.png", new $.anon29(this));
  t1.call$2("img/play.png", new $.anon30(this));
  t1.call$2("img/health.png", new $.anon31(this));
  t1.call$2("img/healthbar_bg.png", new $.anon32(this));
  t1.call$2("img/dragon_lair.png", new $.anon33(this));
  t1.call$2("img/ork_temple.png", new $.anon34(this));
  t1.call$2("img/meadhall.png", new $.anon35(this));
  t1.call$2("img/meadhall_door.png", new $.anon36(this));
  t1.call$2("img/cliff.png", new $.anon37(this));
  t1.call$2("img/darkzone.png", new $.anon38(this));
  t1.call$2("img/zodiac_taurus.png", new $.anon39(this));
  t1.call$2("img/zodiac_leo.png", new $.anon40(this));
  t1.call$2("img/zodiac_cancer.png", new $.anon41(this));
  t1.call$2("img/zodiac_capricorn.png", new $.anon42(this));
  t1.call$2("img/zodiac_pisces.png", new $.anon43(this));
}
};

$$.Animation = {"":"Object;gridX,gridY,sizeX,sizeY,image,anim_frames",
 setAnimation$1: function(animationType) {
  switch (animationType) {
    case 0:
      this.anim_frames = [[0, 1, 2, 3], [4, 5, 6, 7], [8, 9, 10, 11], [12, 13, 14, 15]];
      break;
    case 1:
      this.anim_frames = [[0, 1, 2], [3, 4, 5]];
      break;
    case 2:
      this.anim_frames = [[0, 1, 2], [3, 4, 5], [3, 4, 5], [3, 4, 5]];
      break;
    case 3:
      this.anim_frames = [[0, 1, 2, 3], [4, 5, 6, 7]];
      break;
    case 4:
      this.anim_frames = [[0, 1, 2]];
      break;
    case 5:
      this.anim_frames = [[0, 1, 2, 3], [4, 5, 6, 7], [4, 5, 6, 7], [4, 5, 6, 7]];
      break;
    case 6:
      this.anim_frames = [[0, 1]];
      break;
  }
},
 basicRender$4: function(context, t, width, height) {
  var frame;
  width = !(width == null) ? width : this.gridX;
  height = !(height == null) ? height : this.gridY;
  frame = $.mod($.tdiv(t, 4), this.sizeX);
  context.drawImage$9(this.image, $.mul($.mod(frame, this.sizeX), this.gridX), 0, this.gridX, this.gridY, $.div($.neg(width), 2), $.div($.neg(height), 2), width, height);
},
 render$5: function(context, anim, t, width, height) {
  var t1, t2, t3, t4, frame;
  width = !(width == null) ? width : this.gridX;
  height = !(height == null) ? height : this.gridY;
  if ($.ltB(anim, 0)) {
    anim = $.getInterceptor$JSNumber(anim).abs$0(anim);
    context.scale$2(-1, 1);
  }
  t1 = this.anim_frames;
  t1 = $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, anim);
  t2 = $.getInterceptor$JSStringJSArray(t1);
  t3 = $.tdiv(t, 4);
  t4 = this.anim_frames;
  t4 = $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, anim);
  frame = t2.operator$index$1(t1, $.mod(t3, $.getInterceptor$JSStringJSArray(t4).get$length(t4)));
  context.drawImage$9(this.image, $.mul($.mod(frame, this.sizeX), this.gridX), $.mul($.tdiv(frame, this.sizeX), this.gridY), this.gridX, this.gridY, $.div($.neg(width), 2), $.div($.neg(height), 2), width, height);
},
 flipRenderX$5: function(context, flip, t, width, height) {
  var frame;
  width = !(width == null) ? width : this.gridX;
  height = !(height == null) ? height : this.gridY;
  if (flip === true)
    context.scale$2(-1, 1);
  frame = $.mod($.tdiv(t, 4), this.sizeX);
  context.drawImage$9(this.image, $.mul($.mod(frame, this.sizeX), this.gridX), 0, this.gridX, this.gridY, $.div($.neg(width), 2), $.div($.neg(height), 2), width, height);
},
 complexRender$7: function(context, flipx, flipy, anim, t, width, height) {
  var t1, t2, t3, t4, frame;
  width = !(width == null) ? width : this.gridX;
  height = !(height == null) ? height : this.gridY;
  t1 = flipx === true ? -1 : 1;
  context.scale$2(t1, flipy === true ? -1 : 1);
  t1 = this.anim_frames;
  t1 = $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, anim);
  t2 = $.getInterceptor$JSStringJSArray(t1);
  t3 = $.tdiv(t, 4);
  t4 = this.anim_frames;
  t4 = $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, anim);
  frame = t2.operator$index$1(t1, $.mod(t3, $.getInterceptor$JSStringJSArray(t4).get$length(t4)));
  context.drawImage$9(this.image, $.mul($.mod(frame, this.sizeX), this.gridX), $.mul($.tdiv(frame, this.sizeX), this.gridY), this.gridX, this.gridY, $.div($.neg(width), 2), $.div($.neg(height), 2), width, height);
},
 Animation$4: function(image, gridX, gridY, animationType) {
  var t1 = this.image;
  this.sizeX = $.tdiv(t1.get$width(), this.gridX);
  this.sizeY = $.tdiv(t1.get$height(), this.gridY);
  this.setAnimation$1(animationType);
},
 Animation$Seg$4: function(image, sizeX, sizeY, animationType) {
  var t1 = this.image;
  this.gridX = $.tdiv(t1.get$width(), this.sizeX);
  this.gridY = $.tdiv(t1.get$height(), this.sizeY);
  this.setAnimation$1(animationType);
}
};

$$.MenuScreen = {"":"Object;scene>,rng>,grendel=,trees,interval<,intro_started>,intro_start,menuAlpha,screenAlpha=,ps,hs,t=,menu_button_hover,UPWARD_SPEED>",
 controlMenu$0: function() {
  var t1, t2;
  t1 = $.sub($.ui.get$mouse().get$x(), 960);
  if ($.ltB($.getInterceptor$JSNumber(t1).abs$0(t1), 200)) {
    t1 = $.ui.get$mouse().get$y();
    t2 = 994 - this.hs;
    t1 = $.gtB(t1, t2 - 60) && $.ltB($.ui.get$mouse().get$y(), t2 + 250 * this.ps + 60);
  } else
    t1 = false;
  if (t1)
    this.menu_button_hover = $.tdiv($.sub($.ui.get$mouse().get$y(), 994 - this.hs), $.CONSTANT7.toInt$0(120 * this.ps));
  else
    this.menu_button_hover = -1;
},
 startIntro$0: function() {
  this.intro_started = true;
  this.grendel.set$visible(true);
  this.grendel.set$alpha(0);
  this.intro_start = this.t;
},
 get$startIntro: function() {
  return new $.BoundClosure(this, 'startIntro$0');
},
 controlIntro$0: function() {
  var t1 = this.menuAlpha;
  if (t1 > 0)
    this.menuAlpha = t1 - 0.05;
  if ($.ltB(this.grendel.get$alpha(), 1)) {
    t1 = this.grendel;
    t1.set$alpha($.add(t1.get$alpha(), 0.01));
  }
  if ($.ltB($.sub(this.t, this.intro_start), 120)) {
    if ($.gtB(this.screenAlpha, 0))
      this.screenAlpha = $.sub(this.screenAlpha, 0.05);
  } else if ($.ltB(this.screenAlpha, 1))
    this.screenAlpha = $.add(this.screenAlpha, 0.01);
  else {
    this.scene.cleanUp$0();
    $.window().clearInterval$1(this.interval);
    $.nextLevel("bull");
  }
  t1 = this.scene.get$camera().get$y();
  this.grendel.set$y(t1);
},
 drawMainMenu$1: function(c) {
  var t1, t2, t3, t4, t5, img, t6, t7;
  if ($.gtB(this.screenAlpha, 0)) {
    c.set$fillStyle("#fff");
    c.set$globalAlpha(this.screenAlpha);
    c.fillRect$4(0, 0, 1920, 994);
  }
  c.set$globalAlpha(1);
  c.drawImage$5($.assets.get$img_fog(), 0, 0, 1920, 994);
  t1 = this.menuAlpha;
  if (t1 <= 0)
    return;
  c.set$globalAlpha(t1);
  t1 = $.assets.get$img_title();
  t2 = $.mul($.div(t1.get$height(), 3), $.mod($.tdiv(this.t, 4), 3));
  t3 = $.assets.get$img_title().get$width();
  t4 = $.div($.assets.get$img_title().get$height(), 3);
  t5 = $.div($.assets.get$img_title().get$width(), 2);
  if (typeof t5 !== 'number')
    throw $.iae(t5);
  c.drawImage$9(t1, 0, t2, t3, t4, 960 - t5, 200, $.assets.get$img_title().get$width(), $.div($.assets.get$img_title().get$height(), 3));
  t4 = this.menuAlpha;
  c.set$globalAlpha(t4 * ($.eqB(this.menu_button_hover, 0) ? 1 : 0.5));
  img = $.assets.get$img_play();
  t1 = $.mul($.div(img.get$height(), 3), $.mod($.tdiv(this.t, 4), 3));
  t2 = img.get$width();
  t3 = $.div(img.get$height(), 3);
  t5 = $.div(img.get$width(), 2);
  t6 = this.ps;
  t5 = $.mul(t5, t6);
  if (typeof t5 !== 'number')
    throw $.iae(t5);
  t5 = 960 - t5;
  t7 = 994 - this.hs;
  c.drawImage$9(img, 0, t1, t2, t3, t5, t7, $.mul(img.get$width(), t6), $.mul($.div(img.get$height(), 3), t6));
  t5 = this.menuAlpha;
  c.set$globalAlpha(t5 * ($.eqB(this.menu_button_hover, 1) ? 1 : 0.5));
  img = $.assets.get$img_select();
  t1 = $.mul($.div(img.get$height(), 3), $.mod($.tdiv(this.t, 4), 3));
  t2 = img.get$width();
  t3 = $.div(img.get$height(), 3);
  t4 = $.mul($.div(img.get$width(), 2), t6);
  if (typeof t4 !== 'number')
    throw $.iae(t4);
  c.drawImage$9(img, 0, t1, t2, t3, 960 - t4, t7 + 120 * t6, $.mul(img.get$width(), t6), $.mul($.div(img.get$height(), 3), t6));
  t3 = this.menuAlpha;
  c.set$globalAlpha(t3 * ($.eqB(this.menu_button_hover, 2) ? 1 : 0.5));
  img = $.assets.get$img_credits();
  t1 = $.mul($.div(img.get$height(), 3), $.mod($.tdiv(this.t, 4), 3));
  t2 = img.get$width();
  t4 = $.div(img.get$height(), 3);
  t5 = $.mul($.div(img.get$width(), 2), t6);
  if (typeof t5 !== 'number')
    throw $.iae(t5);
  c.drawImage$9(img, 0, t1, t2, t4, 960 - t5, t7 + 250 * t6, $.mul(img.get$width(), t6), $.mul($.div(img.get$height(), 3), t6));
},
 get$drawMainMenu: function() {
  return new $.BoundClosure0(this, 'drawMainMenu$1');
},
 controlTrees$0: function() {
  var t1 = this.trees;
  $.getInterceptor$JSArray(t1).forEach$1(t1, new $.MenuScreen_controlTrees_anon(this));
},
 MenuScreen$0: function() {
  var t1, i, t2, t3, tree, bush;
  this.scene = $.Scene$();
  this.trees = $.List_List(null);
  this.grendel = $.Grendel$(960, 0);
  this.grendel.set$visible(false);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.grendel);
  for (t1 = this.rng, i = 0; i < 20; ++i) {
    t2 = t1.nextDouble$0();
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    t2 = 1920 * t2;
    t3 = t1.nextDouble$0();
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    tree = $.Character$(1, null, 266, null, "tree", 200, t2, 994 * t3 * 2);
    t2 = this.scene.get$actors();
    $.getInterceptor$JSArray(t2).add$1(t2, tree);
    t2 = this.trees;
    $.getInterceptor$JSArray(t2).add$1(t2, tree);
  }
  for (i = 0; i < 10; ++i) {
    t2 = t1.nextDouble$0();
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    t2 = 1920 * t2;
    t3 = t1.nextDouble$0();
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    bush = $.Character$(1, null, 80, null, "bush", 150, t2, 994 * t3 * 2);
    t2 = this.scene.get$actors();
    $.getInterceptor$JSArray(t2).add$1(t2, bush);
    t2 = this.trees;
    $.getInterceptor$JSArray(t2).add$1(t2, bush);
  }
  this.scene.get$camera().set$x(960);
  this.scene.get$camera().set$y(497);
  t1 = this.scene.get$postrender();
  $.getInterceptor$JSArray(t1).add$1(t1, this.get$drawMainMenu());
  t1 = $.ui.get$onClick();
  $.getInterceptor$JSArray(t1).add$1(t1, this.get$startIntro());
  this.interval = $.window().setInterval$2(new $.anon50(this), 16);
}
};

$$.Vector2 = {"":"Object;x=,y="
};

$$.Character = {"":"Object;name>,render<,width=,height=,x=,y=,alpha=,v=,visible=,markedForRemoval>",
 render$0: function() {
  return this.render.call$0();
},
 render$1: function(arg0) {
  return this.render.call$1(arg0);
},
 render$5: function(arg0, arg1, arg2, arg3, arg4) {
  return this.render.call$5(arg0, arg1, arg2, arg3, arg4);
},
 update$0: function() {
  return !this.markedForRemoval;
},
 remove$0: function() {
  this.markedForRemoval = true;
},
 ImageRender$1: function(image) {
  return new $.Character_ImageRender_anon(this, image);
},
 AnimationRender$1: function(animation) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  t1.lx_1 = this.x;
  t1.ly_2 = this.y;
  return new $.Character_AnimationRender_anon(t1, this, animation);
},
 LRAnimationRender$1: function(animation) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  t1.lx_1 = this.x;
  return new $.Character_LRAnimationRender_anon(t1, this, animation);
},
 BasicAnimationRender$1: function(animation) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  return new $.Character_BasicAnimationRender_anon(t1, this, animation);
},
 BasicRotationAnimationRender$1: function(animation) {
  var t1, rot_rate;
  t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  rot_rate = $.sub($.mul($.Random_Random(null).nextDouble$0(), 0.2), 0.1);
  t1.rotation_1 = $.mul($.mul($.Random_Random(null).nextDouble$0(), 3.141592653589793), 2);
  return new $.Character_BasicRotationAnimationRender_anon(t1, this, animation, rot_rate);
},
 BasicFlipAnimationRender$2: function(animation, speed) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  t1.lx_1 = this.x;
  t1.last_2 = false;
  return new $.Character_BasicFlipAnimationRender_anon(t1, this, animation, speed);
},
 BasicFlipAnimationRender$1: function(animation) {
  return this.BasicFlipAnimationRender$2(animation, 1);
},
 VerticalAnimationRender$1: function(animation) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  t1.lx_1 = this.x;
  t1.ly_2 = this.y;
  return new $.Character_VerticalAnimationRender_anon(t1, this, animation);
},
 Cube2FrameAnimationRender$1: function(animation) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  t1.lx_1 = this.x;
  t1.ly_2 = this.y;
  return new $.Character_Cube2FrameAnimationRender_anon(t1, this, animation);
},
 PositionalAnimationRender$1: function(animation) {
  var t1 = {};
  t1.t_0 = $.Random_Random(null).nextInt$1(64);
  return new $.Character_PositionalAnimationRender_anon(t1, this, animation);
},
 timeProject$1: function(render) {
  var t1 = {};
  t1.xs_0 = [0, 0, 0];
  t1.ys_1 = [0, 0, 0];
  return new $.Character_timeProject_anon(t1, this, render);
},
 renderName$1: function(context) {
},
 Character$8$alpha$color$height$image$name$$width$x$y: function(alpha, color, height, image, name$, width, x, y) {
  var t1, t2;
  t1 = color == null;
  if (t1 && image == null)
    ;
  else {
    if (!t1) {
      t1 = $.getInterceptor$JSStringJSArray(color);
      t1 = $.eqB(t1.get$length(color), 6) || $.eqB(t1.get$length(color), 3);
    } else
      t1 = false;
    if (t1)
      "#" + $.S(color);
  }
  t1 = this.name;
  switch (t1 == null ? null : $.getInterceptor$JSString(t1).toLowerCase$0(t1)) {
    case "tree":
      this.render = this.BasicAnimationRender$1($.assets.get$tree());
      break;
    case "bush":
      this.render = this.BasicAnimationRender$1($.assets.get$bush());
      break;
    case "blood":
      switch ($.Random_Random(null).nextInt$1(3)) {
        case 0:
          this.render = this.BasicAnimationRender$1($.assets.get$blood1());
          break;
        case 1:
          this.render = this.BasicAnimationRender$1($.assets.get$blood2());
          break;
        case 2:
          this.render = this.BasicAnimationRender$1($.assets.get$blood3());
          break;
      }
      break;
    case "warrior":
      this.render = this.AnimationRender$1($.assets.get$warrior());
      break;
    case "red warrior":
      this.render = this.AnimationRender$1($.assets.get$red_warrior());
      break;
    case "grendel":
      this.render = this.AnimationRender$1($.assets.get$grendel());
      break;
    case "fireball":
      this.render = this.BasicAnimationRender$1($.assets.get$fireball());
      break;
    case "note":
      t1 = $.Random_Random(null).nextBool$0() === true;
      t2 = $.assets;
      this.render = this.BasicAnimationRender$1(t1 ? t2.get$note1() : t2.get$note2());
      break;
    case "gold":
      this.render = this.BasicAnimationRender$1($.assets.get$gold());
      break;
    case "person":
    case "beowulf":
    case "ork":
      this.render = this.BasicAnimationRender$1($.assets.get$person());
      break;
    case "cake":
      this.render = this.BasicAnimationRender$1($.assets.get$cake());
      break;
    case "gear":
      this.render = this.BasicRotationAnimationRender$1($.assets.get$gear());
      break;
    case "gear particle":
      this.render = this.BasicRotationAnimationRender$1($.assets.get$gear_particle());
      break;
    case "dragon part":
      this.render = this.VerticalAnimationRender$1($.assets.get$dragon_part());
      break;
    case "dragon head":
      this.render = this.Cube2FrameAnimationRender$1($.assets.get$dragon_head());
      break;
    case "firing dragon head":
      this.render = this.PositionalAnimationRender$1($.assets.get$dragon_head());
      break;
    case "statue":
      this.render = this.LRAnimationRender$1($.assets.get$statue());
      break;
    case "stone":
    case "stone particle":
      t1 = $.Random_Random(null).nextBool$0() === true;
      t2 = $.assets;
      this.render = this.BasicAnimationRender$1(t1 ? t2.get$stone1() : t2.get$stone2());
      break;
    case "bull":
      this.render = this.BasicFlipAnimationRender$1($.assets.get$bull());
      break;
    case "dragon lair":
      this.render = this.ImageRender$1($.assets.get$dragon_lair());
      break;
    case "ork temple":
      this.render = this.ImageRender$1($.assets.get$ork_temple());
      break;
    case "meadhall":
      this.render = this.ImageRender$1($.assets.get$meadhall());
      break;
    case "darkzone":
      this.render = this.ImageRender$1($.assets.get$dark_zone());
      break;
    case "meadhall door":
      this.render = this.ImageRender$1($.assets.get$meadhall_door());
      break;
    case "cliff":
      this.render = this.ImageRender$1($.assets.get$cliff());
      break;
    case "animal":
      this.render = this.BasicFlipAnimationRender$1($.assets.get$rabbit());
      break;
    case "happybirthday":
      this.render = this.BasicAnimationRender$1($.assets.get$happybirthday());
      break;
    default:
      this.render = this.AnimationRender$1($.assets.get$test());
      break;
  }
}
};

$$.Particle = {"":"Character;t=,life,decay,starting_alpha,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 update$0: function() {
  var t1, t2, t3, t4, t5;
  this.t = $.add(this.t, 1);
  this.x = $.add(this.x, this.v.get$x());
  this.y = $.add(this.y, this.v.get$y());
  t1 = this.v;
  t2 = t1.get$x();
  t3 = this.decay;
  t1.set$x($.div(t2, t3));
  t1 = this.v;
  t1.set$y($.div(t1.get$y(), t3));
  t1 = this.t;
  t4 = this.life;
  t1 = $.div(t1, t4);
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  t1 = 1 - t1;
  t5 = this.starting_alpha;
  if (typeof t5 !== 'number')
    throw $.iae(t5);
  this.alpha = t1 * t5;
  if ($.geB(this.t, t4))
    this.remove$0();
  return !this.markedForRemoval;
},
 Particle$10$color$decay$life$name$$starting_alpha: function(x, y, vx, vy, size, color, decay, life, name$, starting_alpha) {
  this.v = $.Vector2$(vx, vy);
}
};

$$.GearParticle = {"":"Character;h,hs,t=,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 update$0: function() {
  var t1, t2;
  this.t = $.add(this.t, 1);
  t1 = this.h;
  t2 = this.hs;
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  this.h = t1 + t2;
  this.hs = $.add(this.hs, 0.5);
  if (this.h <= 0) {
    this.x = $.add(this.x, this.v.get$x());
    this.y = $.add(this.y, $.add(this.v.get$y(), this.hs));
  }
  if ($.gtB(this.t, 300)) {
    this.alpha = $.sub(this.alpha, 0.01);
    if ($.leB(this.alpha, 0))
      return false;
  }
  return !this.markedForRemoval;
},
 GearParticle$3: function(x, y, power) {
  var rng, t1, size;
  rng = $.Random_Random(null);
  t1 = rng.nextDouble$0();
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  size = 20 + 20 * t1;
  this.width = size;
  this.height = size;
  this.t = rng.nextInt$1(100);
  this.hs = $.sub($.mul(rng.nextDouble$0(), -10), 5);
  this.v = $.Vector2$($.mul($.sub($.mul(rng.nextDouble$0(), 10), 5), power), $.mul($.sub($.mul(rng.nextDouble$0(), 10), 5), power));
}
};

$$.StoneParticle = {"":"ArcParticle;h,hs,t,rotate,fadeout,rotation,rotation_rate,name,render,width,height,x,y,alpha,v,visible,markedForRemoval"
};

$$.BloodParticle = {"":"Character;h,hs,t=,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 update$0: function() {
  var t1, t2;
  this.t = $.add(this.t, 1);
  t1 = this.h;
  t2 = this.hs;
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  this.h = t1 + t2;
  this.hs = $.add(this.hs, 0.5);
  if (this.h <= 0) {
    this.x = $.add(this.x, this.v.get$x());
    this.y = $.add(this.y, $.add(this.v.get$y(), this.hs));
  }
  if ($.gtB(this.t, 300)) {
    this.alpha = $.sub(this.alpha, 0.01);
    if ($.leB(this.alpha, 0))
      return false;
  }
  return !this.markedForRemoval;
},
 BloodParticle$3: function(x, y, power) {
  var rng, t1, size;
  rng = $.Random_Random(null);
  t1 = rng.nextDouble$0();
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  size = 20 + 10 * t1;
  this.width = size;
  this.height = size;
  this.t = rng.nextInt$1(100);
  this.hs = $.sub($.mul(rng.nextDouble$0(), -10), 5);
  this.v = $.Vector2$($.mul($.sub($.mul(rng.nextDouble$0(), 10), 5), power), $.mul($.sub($.mul(rng.nextDouble$0(), 10), 5), power));
}
};

$$.ArcParticle = {"":"Character;h,hs,t=,rotate,fadeout,rotation>,rotation_rate,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 rotate$1: function(arg0) {
  return this.rotate.call$1(arg0);
},
 rotateThenRender$1: function(render) {
  return new $.ArcParticle_rotateThenRender_anon(this, render);
},
 update$0: function() {
  var t1, t2;
  this.t = $.add(this.t, 1);
  t1 = this.h;
  t2 = this.hs;
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  this.h = t1 + t2;
  this.hs = $.add(this.hs, 0.5);
  if (this.h <= 0) {
    this.x = $.add(this.x, this.v.get$x());
    this.y = $.add(this.y, $.add(this.v.get$y(), this.hs));
    if (this.rotate === true)
      this.rotation = $.add(this.rotation, this.rotation_rate);
  }
  if (this.fadeout === true && $.gtB(this.t, 300)) {
    this.alpha = $.sub(this.alpha, 0.01);
    if ($.leB(this.alpha, 0))
      return false;
  }
  return !this.markedForRemoval;
},
 ArcParticle$12$fadeout$height$power$rotate$rotation$rotation_rate$size_avg$size_dif$width: function(name$, x, y, fadeout, height, power, rotate, rotation, rotation_rate, size_avg, size_dif, width) {
  var rng, size;
  rng = $.Random_Random(null);
  size = $.sub($.add(size_avg, $.mul(size_dif, rng.nextDouble$0())), $.div(size_dif, 2));
  if (width == null)
    this.width = size;
  if (height == null)
    this.height = size;
  this.t = rng.nextInt$1(100);
  this.hs = $.sub($.mul(rng.nextDouble$0(), -10), 5);
  this.v = $.Vector2$($.mul($.sub($.mul(rng.nextDouble$0(), 10), 5), power), $.mul($.sub($.mul(rng.nextDouble$0(), 10), 5), power));
  if (this.rotate === true) {
    if (this.rotation == null)
      this.rotation = 0;
    if (this.rotation_rate == null)
      this.rotation_rate = 0.05;
    this.render = this.rotateThenRender$1(this.render);
  }
}
};

$$.Bound = {"":"Object;x=,y=",
 push$2: function(c, _in) {
  var t1, t2, t3;
  if (this.objectIn$1(c) === true && !_in) {
    if (this.objectIn$2(c, $.Vector2$(c.get$v().get$x(), 0)) === true) {
      t1 = $.ltB(c.get$x(), this.x);
      t2 = this.repel;
      t3 = c.get$v();
      if (t1) {
        t1 = t3.get$x();
        t3 = $.neg($.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2));
        t1 = t3;
      } else {
        t1 = t3.get$x();
        t2 = $.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2);
        t1 = t2;
      }
      c.get$v().set$x(t1);
      c.set$x($.add(c.get$x(), c.get$v().get$x()));
    }
    if (this.objectIn$2(c, $.Vector2$(0, c.get$v().get$y())) === true) {
      t1 = $.ltB(c.get$y(), this.y);
      t2 = this.repel;
      t3 = c.get$v();
      if (t1) {
        t1 = t3.get$y();
        t3 = $.neg($.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2));
        t1 = t3;
      } else {
        t1 = t3.get$y();
        t2 = $.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2);
        t1 = t2;
      }
      c.get$v().set$y(t1);
      c.set$y($.add(c.get$y(), c.get$v().get$y()));
    }
  } else if (_in) {
    if (this.objectIn$2(c, $.Vector2$(c.get$v().get$x(), 0)) !== true) {
      t1 = $.ltB(c.get$x(), this.x);
      t2 = this.repel;
      t3 = c.get$v();
      if (t1) {
        t1 = t3.get$x();
        t2 = $.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2);
        t1 = t2;
      } else {
        t1 = t3.get$x();
        t3 = $.mul($.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2), -1);
        t1 = t3;
      }
      c.get$v().set$x(t1);
      c.set$x($.add(c.get$x(), c.get$v().get$x()));
    }
    if (this.objectIn$2(c, $.Vector2$(0, c.get$v().get$y())) !== true) {
      t1 = $.ltB(c.get$y(), this.y);
      t2 = this.repel;
      t3 = c.get$v();
      if (t1) {
        t1 = t3.get$y();
        t2 = $.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2);
        t1 = t2;
      } else {
        t1 = t3.get$y();
        t3 = $.mul($.add($.getInterceptor$JSNumber(t1).abs$0(t1), t2), -1);
        t1 = t3;
      }
      c.get$v().set$y(t1);
      c.set$y($.add(c.get$y(), c.get$v().get$y()));
    }
  }
}
};

$$.RectBound = {"":"Bound;width=,height=,repel,x,y",
 debugDraw$1: function(scene) {
  var context = scene.get$context();
  context.save$0();
  context.set$fillStyle("#000");
  context.set$globalAlpha(0.25);
  context.translate$2($.add($.neg(scene.get$camera().get$x()), $.div(scene.get$screenx(), 2)), $.add($.neg(scene.get$camera().get$y()), $.div(scene.get$screeny(), 2)));
  context.fillRect$4($.sub(this.x, $.div(this.width, 2)), $.sub(this.y, $.div(this.height, 2)), this.width, this.height);
  context.restore$0();
},
 objectIn$2: function(c, alternate_velocity) {
  var t1, t2;
  if (alternate_velocity == null) {
    t1 = $.sub($.add(c.get$x(), c.get$v().get$x()), this.x);
    if ($.ltB($.getInterceptor$JSNumber(t1).abs$0(t1), $.div(this.width, 2))) {
      t1 = $.sub($.add(c.get$y(), c.get$v().get$y()), this.y);
      t2 = $.ltB($.getInterceptor$JSNumber(t1).abs$0(t1), $.div(this.height, 2));
      t1 = t2;
    } else
      t1 = false;
  } else {
    t1 = $.sub($.add(c.get$x(), alternate_velocity.get$x()), this.x);
    if ($.ltB($.getInterceptor$JSNumber(t1).abs$0(t1), $.div(this.width, 2))) {
      t1 = $.sub($.add(c.get$y(), alternate_velocity.get$y()), this.y);
      t2 = $.ltB($.getInterceptor$JSNumber(t1).abs$0(t1), $.div(this.height, 2));
      t1 = t2;
    } else
      t1 = false;
  }
  return t1;
},
 objectIn$1: function(c) {
  return this.objectIn$2(c, null);
}
};

$$.CircleBound = {"":"Bound;radius,repel,x,y",
 debugDraw$1: function(scene) {
  var context = scene.get$context();
  context.save$0();
  context.set$fillStyle("#000");
  context.set$globalAlpha(0.25);
  context.translate$2($.add($.neg(scene.get$camera().get$x()), $.div(scene.get$screenx(), 2)), $.add($.neg(scene.get$camera().get$y()), $.div(scene.get$screeny(), 2)));
  context.beginPath$0();
  context.arc$6(this.x, this.y, this.radius, 0, 6.283185307179586, false);
  context.fill$0();
  context.closePath$0();
  context.restore$0();
},
 objectIn$2: function(c, alternate_velocity) {
  var t1, t2, t3;
  t1 = alternate_velocity == null;
  t2 = this.radius;
  t3 = c.get$x();
  return t1 ? $.sqrt($.pow($.sub($.add(t3, c.get$v().get$x()), this.x), 2) + $.pow($.sub($.add(c.get$y(), c.get$v().get$y()), this.y), 2)) < t2 : $.sqrt($.pow($.sub($.add(t3, alternate_velocity.get$x()), this.x), 2) + $.pow($.sub($.add(c.get$y(), alternate_velocity.get$y()), this.y), 2)) < t2;
},
 objectIn$1: function(c) {
  return this.objectIn$2(c, null);
}
};

$$.Note = {"":"Character;angle,alpha_inc,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 update$0: function() {
  var t1, t2, t3, t4, t5, t6;
  this.alpha = $.add(this.alpha, this.alpha_inc);
  if ($.geB(this.alpha, 1))
    this.alpha_inc = -0.002;
  t1 = this.x;
  t2 = $.sin(this.angle);
  t3 = this.v.get$x();
  if (typeof t3 !== 'number')
    throw $.iae(t3);
  this.x = $.add(t1, t2 + t3);
  t4 = this.y;
  t5 = $.cos(this.angle);
  t6 = this.v.get$y();
  if (typeof t6 !== 'number')
    throw $.iae(t6);
  this.y = $.add(t4, t5 + t6);
  this.angle = $.add(this.angle, 0.05);
  if ($.leB(this.alpha, 0))
    return false;
  else
    return true;
},
 Note$2: function(x, y) {
  var rng, t1;
  rng = $.Random_Random(null);
  this.angle = $.mul($.mul(rng.nextDouble$0(), 3.141592653589793), 2);
  this.v = $.Vector2$(0, 0);
  t1 = $.sub($.mul(rng.nextDouble$0(), 5), 2.5);
  this.v.set$x(t1);
  t1 = $.sub($.mul(rng.nextDouble$0(), 5), 2.5);
  this.v.set$y(t1);
  this.alpha = this.alpha_inc;
}
};

$$.OrkNote = {"":"Character;circling,central,rad,speed,current_rotation,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 direct$1: function(c) {
  var t1, t2, t3;
  this.central = c;
  t1 = $.sin(this.current_rotation);
  t2 = this.rad;
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  t1 *= t2;
  t3 = this.speed;
  if (typeof t3 !== 'number')
    throw $.iae(t3);
  t3 = t1 * t3;
  t2 = $.cos(this.current_rotation) * t2;
  t1 = this.speed;
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  this.v = $.Vector2$(t3, t2 * t1);
  this.speed = $.add($.mul($.Random_Random(null).nextDouble$0(), 300), 500);
  this.circling = false;
},
 update$0: function() {
  var t1, t2, t3, a, b, d;
  if (this.circling) {
    if ($.ltB(this.alpha, 1))
      this.alpha = $.add(this.alpha, 0.02);
    this.current_rotation = $.add(this.current_rotation, this.speed);
    t1 = this.central.get$x();
    t2 = $.cos(this.current_rotation);
    t3 = this.rad;
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    this.x = $.add(t1, t2 * t3);
    this.y = $.add(this.central.get$y(), $.sin(this.current_rotation) * t3);
  } else {
    a = $.sub(this.central.get$x(), this.x);
    b = $.sub(this.central.get$y(), this.y);
    t1 = this.v;
    t1.set$x($.add(t1.get$x(), $.div(a, this.speed)));
    t1 = this.v;
    t1.set$y($.add(t1.get$y(), $.div(b, this.speed)));
    t1 = this.v;
    t1.set$x($.div(t1.get$x(), 1.05));
    t1 = this.v;
    t1.set$y($.div(t1.get$y(), 1.05));
    this.x = $.add(this.x, this.v.get$x());
    this.y = $.add(this.y, this.v.get$y());
    d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
    if (d < 100) {
      this.alpha = (d - 50) / 100;
      if (d <= 50)
        return false;
    }
  }
  return !this.markedForRemoval;
},
 OrkNote$2: function(central, rad) {
  var rng = $.Random_Random(null);
  this.speed = $.add($.mul(rng.nextDouble$0(), 0.01), 0.01);
  this.current_rotation = $.mul($.mul(rng.nextDouble$0(), 3.141592653589793), 2);
}
};

$$.Warrior = {"":"Character;speed,target=,target_offset,target_angle_offset,target_angle_offset_rate,totalCooldown,cooldown=,health=,df,attack_render=,normal_render=,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 df$2: function(arg0, arg1) {
  return this.df.call$2(arg0, arg1);
},
 distance$1: function(w) {
  return $.sqrt($.pow($.sub(w.get$x(), this.x), 2) + $.pow($.sub(w.get$y(), this.y), 2));
},
 getTarget$1: function(enemies) {
  var rng, t1, distances, index, i, smallest;
  rng = $.Random_Random(null);
  if (rng.nextBool$0() === true) {
    t1 = $.getInterceptor$JSArray(enemies);
    distances = t1.map$1(enemies, new $.Warrior_getTarget_anon(this));
    if (typeof distances !== 'string' && (typeof distances !== 'object' || distances === null || distances.constructor !== Array && !distances.is$JavaScriptIndexingBehavior()))
      return this.getTarget$1$bailout(1, enemies, t1, distances);
    for (index = 0, i = 0, smallest = 9999; i < distances.length; ++i)
      if ($.ltB(distances[i], smallest)) {
        if (i >= distances.length)
          throw $.ioore(i);
        smallest = distances[i];
        index = i;
      }
    this.set$target(t1.operator$index$1(enemies, index));
  } else {
    t1 = $.getInterceptor$JSStringJSArray(enemies);
    if ($.gtB(t1.get$length(enemies), 1))
      this.set$target(t1.operator$index$1(enemies, rng.nextInt$1($.sub(t1.get$length(enemies), 1))));
    else
      this.set$target(t1.operator$index$1(enemies, 0));
  }
},
 getTarget$1$bailout: function(state0, env0, env1, env2) {
  switch (state0) {
    case 1:
      distances = env2;
      t1 = env1;
      enemies = env0;
      break;
  }
  switch (state0) {
    case 0:
      rng = $.Random_Random(null);
    case 1:
      var rng, t1, distances, enemies, t2, index, i, smallest;
      if (state0 === 1 || state0 === 0 && rng.nextBool$0() === true)
        switch (state0) {
          case 0:
            t1 = $.getInterceptor$JSArray(enemies);
            distances = t1.map$1(enemies, new $.Warrior_getTarget_anon(this));
          case 1:
            state0 = 0;
            for (t2 = $.getInterceptor$JSStringJSArray(distances), index = 0, i = 0, smallest = 9999; $.ltB(i, t2.get$length(distances)); ++i)
              if ($.ltB(t2.operator$index$1(distances, i), smallest)) {
                smallest = t2.operator$index$1(distances, i);
                index = i;
              }
            this.set$target(t1.operator$index$1(enemies, index));
        }
      else {
        t1 = $.getInterceptor$JSStringJSArray(enemies);
        if ($.gtB(t1.get$length(enemies), 1))
          this.set$target(t1.operator$index$1(enemies, rng.nextInt$1($.sub(t1.get$length(enemies), 1))));
        else
          this.set$target(t1.operator$index$1(enemies, 0));
      }
  }
},
 onHit$2: function(w, damage) {
  var a, b, d, t1;
  a = $.sub(this.x, w.get$x());
  b = $.sub(this.y, w.get$y());
  d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
  t1 = $.mul($.div(a, d), 20);
  this.v.set$x(t1);
  t1 = $.mul($.div(a, d), 20);
  this.v.set$y(t1);
  this.health = $.sub(this.health, damage);
  this.render = this.get$normal_render();
  if ($.leB(this.health, 0)) {
    if (!(this.df == null))
      this.df$2(this.x, this.y);
    this.remove$0();
  }
  if ($.ltB(this.get$cooldown(), this.totalCooldown))
    this.set$cooldown($.add(this.get$cooldown(), 10));
},
 onHit$1: function(w) {
  return this.onHit$2(w, 10);
},
 update$0: function() {
  var t1, t2, t3, t4, t5, a, b, d;
  if ($.ltB(this.alpha, 1))
    this.alpha = $.add(this.alpha, 0.01);
  if (!(this.get$target() == null))
    if (this.get$target().get$markedForRemoval() === true)
      this.set$target(null);
    else {
      this.target_angle_offset = $.add(this.target_angle_offset, this.target_angle_offset_rate);
      t1 = $.sin(this.target_angle_offset);
      t2 = this.height;
      if (typeof t2 !== 'number')
        throw $.iae(t2);
      t3 = t1 * t2 * 2;
      t4 = $.cos(this.target_angle_offset);
      t5 = this.height;
      if (typeof t5 !== 'number')
        throw $.iae(t5);
      this.target_offset = $.Vector2$(t3, t4 * t5 * 2);
      a = $.sub(this.x, $.add(this.get$target().get$x(), this.target_offset.get$x()));
      b = $.sub(this.y, $.add(this.get$target().get$y(), this.target_offset.get$y()));
      d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
      if ($.gtB(d, $.mul(this.height, 2))) {
        t1 = this.v;
        t1.set$x($.sub(t1.get$x(), $.mul($.div(a, d), this.speed)));
        t1 = this.v;
        t1.set$y($.sub(t1.get$y(), $.mul($.div(b, d), this.speed)));
        if ($.ltB(this.get$cooldown(), this.totalCooldown))
          this.set$cooldown($.add(this.get$cooldown(), 1));
      } else {
        this.set$cooldown($.sub(this.get$cooldown(), 1));
        this.render = this.get$attack_render();
        if ($.ltB(this.get$cooldown(), 0)) {
          this.set$cooldown(this.totalCooldown);
          this.get$target().onHit$1(this);
          if (this.get$target().get$markedForRemoval() === true)
            this.set$target(null);
        }
      }
    }
  t1 = this.v;
  t1.set$x($.div(t1.get$x(), 1.25));
  t1 = this.v;
  t1.set$y($.div(t1.get$y(), 1.25));
  this.x = $.add(this.x, this.v.get$x());
  this.y = $.add(this.y, this.v.get$y());
  return !this.markedForRemoval;
},
 Warrior$4: function(x, y, color, df) {
  var rng, t1, t2, t3, t4, t5;
  this.alpha = 0;
  this.v = $.Vector2$(0, 0);
  rng = $.Random_Random(null);
  this.speed = $.add(rng.nextDouble$0(), 0.5);
  this.target_angle_offset = $.mul($.mul(rng.nextDouble$0(), 3.141592653589793), 2);
  this.target_angle_offset_rate = $.sub($.mul(rng.nextDouble$0(), 0.3), 0.15);
  t1 = $.sin(this.target_angle_offset);
  t2 = this.height;
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  t3 = t1 * t2 * 2;
  t4 = $.cos(this.target_angle_offset);
  t5 = this.height;
  if (typeof t5 !== 'number')
    throw $.iae(t5);
  this.target_offset = $.Vector2$(t3, t4 * t5 * 2);
  this.set$normal_render(this.render);
  t1 = $.eqB(color, "f00");
  t2 = $.assets;
  this.set$attack_render(this.BasicFlipAnimationRender$1(t1 ? t2.get$red_warrior_attack() : t2.get$warrior_attack()));
}
};

$$.OrkWarrior = {"":"Character;target=,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 update$0: function() {
  if ($.ltB(this.alpha, 1))
    this.alpha = $.add(this.alpha, 0.01);
  return !this.markedForRemoval;
}
};

$$.Grendel = {"":"Character;target=,hitFunction<,cooldown=,_attacking,normal_render=,attack_render=,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 hitFunction$0: function() {
  return this.hitFunction.call$0();
},
 set$attacking: function(a) {
  this._attacking = a;
  if (a === true) {
    $.audio.play$1("attack");
    this.render = this.attack_render;
  } else
    this.render = this.normal_render;
},
 get$attacking: function() {
  return this._attacking;
},
 onHit$2: function(w, damage) {
  if (!(this.hitFunction == null))
    this.hitFunction$0();
},
 onHit$1: function(w) {
  return this.onHit$2(w, null);
},
 getTarget$1: function(enemies) {
},
 Grendel$2: function(x, y) {
  this.v = $.Vector2$(0, 0);
  this.normal_render = this.render;
  this.attack_render = this.timeProject$1(this.render);
}
};

$$.DragonPart = {"":"Character;t=,leader,name,render,width,height,x,y,alpha,v,visible,markedForRemoval",
 update$0: function() {
  var t1, t2, a, b, d;
  this.t = $.add(this.t, 1);
  t1 = this.v.get$x();
  t2 = this.leader;
  a = $.sub(t1, t2.get$v().get$x());
  b = $.sub(this.v.get$y(), t2.get$v().get$y());
  d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
  if (d > 40) {
    t1 = this.v;
    t1.set$x($.sub(t1.get$x(), $.mul($.div(a, d), 5)));
    t1 = this.v;
    t1.set$y($.sub(t1.get$y(), $.mul($.div(b, d), 5)));
    this.x = $.add(this.v.get$x(), $.sin($.mul($.mul($.div(this.t, 30), 3.141592653589793), 2)) * 10);
    this.y = $.add(this.v.get$y(), $.cos($.mul($.mul($.div(this.t, 30), 3.141592653589793), 2)) * 10);
  }
  return !this.markedForRemoval;
},
 DragonPart$4: function(leader, x, y, t) {
  this.v = $.Vector2$(x, y);
  this.alpha = 0;
}
};

$$.Scene = {"":"Object;canvas,context>,stain<,screenx>,screeny>,camera>,postrender>,actors=,interval<",
 render$0: function() {
  var t1, t2;
  t1 = this.stain;
  this.context.set$globalAlpha(t1);
  this.context.set$fillStyle("#fff");
  this.context.fillRect$4(0, 0, this.screenx, this.screeny);
  this.context.set$globalAlpha(1);
  this.context.save$0();
  this.context.scale$2($.div(this.screenx, 1920), $.div(this.screeny, 994));
  this.context.save$0();
  t1 = this.context;
  t2 = this.camera;
  t1.translate$2($.add($.neg(t2.x), 960), $.add($.neg(t2.y), 497));
  t1 = this.actors;
  $.getInterceptor$JSArray(t1).forEach$1(t1, new $.Scene_render_anon(this));
  this.context.restore$0();
  t1 = this.postrender;
  this.postrender = $.getInterceptor$JSArray(t1).filter$1(t1, new $.Scene_render_anon0(this));
  this.context.restore$0();
},
 update$0: function() {
  var t1 = this.actors;
  this.actors = $.getInterceptor$JSArray(t1).filter$1(t1, new $.Scene_update_anon());
},
 cleanUp$0: function() {
  var t1, t2, t3;
  t1 = $.document().get$body().get$nodes();
  t2 = $.getInterceptor$JSArray(t1);
  t3 = $.document().get$body().get$nodes();
  t2.removeAt$1(t1, $.getInterceptor$JSStringJSArray(t3).indexOf$1(t3, this.canvas));
  if (!(this.interval == null))
    $.window().clearInterval$1(this.interval);
},
 Scene$0: function() {
  this.canvas = $.CanvasElement_CanvasElement(null, null);
  this.context = this.canvas.getContext$1("2d");
  var t1 = $.document().get$body().get$nodes();
  $.getInterceptor$JSArray(t1).add$1(t1, this.canvas);
  this.screenx = $.window().get$innerWidth();
  this.screeny = $.window().get$innerHeight();
  t1 = this.screenx;
  this.canvas.set$width(t1);
  t1 = this.screeny;
  this.canvas.set$height(t1);
  this.context.set$textAlign("center");
}
};

$$.UISystem = {"":"Object;keyList>,mouseDown=,onKeyPress>,onClick>,mouse>,keyMap>",
 key$1: function(identifier) {
  var t1, t2;
  t1 = this.keyList;
  t2 = this.keyMap.operator$index$1(identifier);
  if (t2 !== (t2 | 0))
    throw $.iae(t2);
  if (t2 < 0 || t2 >= t1.length)
    throw $.ioore(t2);
  return t1[t2];
},
 get$key: function() {
  return new $.BoundClosure0(this, 'key$1');
},
 mouseDownAt$2: function(x, y) {
  var i, t1;
  this.mouseDown = true;
  this.mouse.x = x;
  this.mouse.y = y;
  for (i = this.onClick.length - 1; i >= 0; --i) {
    t1 = this.onClick;
    if (i >= t1.length)
      throw $.ioore(i);
    if ($.eqB(t1[i].call$0(), true))
      $.CONSTANT0.removeRange$2(this.onClick, i, 1);
  }
},
 UISystem$0: function() {
  var t1, t2, i;
  this.onKeyPress = $.List_List(null);
  this.onClick = $.List_List(null);
  this.mouse = $.Vector2$(0, 0);
  this.keyList = $.List_List(255);
  for (t1 = this.keyList, t2 = t1.length, i = 0; i < 255; ++i) {
    if (i >= t2)
      throw $.ioore(i);
    t1[i] = 0;
  }
  t1 = $.window().get$on().get$keyDown();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon44(this));
  t1 = $.window().get$on().get$keyUp();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon45(this));
  t1 = $.window().get$on().get$mouseDown();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon46(this));
  t1 = $.window().get$on().get$mouseUp();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon47(this));
  t1 = $.window().get$on().get$mouseMove();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon48(this));
}
};

$$.LevelBull = {"":"Object;scene>,inbounds>,not_inbounds>,outbounds>,truth,gears,grendel=,bull=,bull_alive>,interval<,rng>,annotation_showing=,annotation_shown=,total_charge_time,bull_lives,charge_time,bull_speed,bull_charge,bull_rotation,bull_charging,win_time=",
 drawFog$1: function(c) {
  c.drawImage$5($.assets.get$img_fog(), 0, 0, 1920, 994);
},
 get$drawFog: function() {
  return new $.BoundClosure0(this, 'drawFog$1');
},
 controlBull$0: function() {
  var a, target_rotation, t1, ra, rb, t2, t3, charge_time_percent, spd;
  if (!this.bull_alive)
    return;
  a = $.sub(this.bull.get$x(), this.grendel.get$x());
  target_rotation = $.atan2($.sub(this.bull.get$y(), this.grendel.get$y()), a);
  t1 = this.bull_rotation;
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  ra = $.mod(target_rotation - t1, 6.283185307179586);
  rb = $.mod(target_rotation - t1 + 3.141592653589793, 6.283185307179586);
  t2 = ra > rb ? 0.03 : -0.03;
  t3 = this.bull_charging ? 2.5 : 1;
  this.bull_rotation = t1 + t2 / t3;
  if (!this.bull_charging)
    t1 = $.leB($.CONSTANT7.abs$0(ra), 0.03) || $.leB($.CONSTANT7.abs$0(rb), 0.03);
  else
    t1 = false;
  if (t1) {
    this.bull_charging = true;
    t1 = this.bull.BasicFlipAnimationRender$2($.assets.get$bull(), 2);
    this.bull.set$render(t1);
    this.charge_time = 0;
  }
  t1 = !this.bull_charging;
  t2 = this.bull_speed;
  if (t1) {
    t1 = this.bull;
    t1.set$x($.add(t1.get$x(), $.cos(this.bull_rotation) * t2));
    t1 = this.bull;
    t1.set$y($.add(t1.get$y(), $.sin(this.bull_rotation) * t2));
  } else {
    this.charge_time = this.charge_time + 1;
    t1 = this.charge_time;
    t3 = this.total_charge_time;
    charge_time_percent = t1 / t3;
    spd = -($.pow(charge_time_percent, 3) - $.pow(charge_time_percent, 2)) * 27 / 4 * this.bull_charge + t2;
    t2 = this.bull;
    t2.set$x($.add(t2.get$x(), $.cos(this.bull_rotation) * spd));
    t2 = this.bull;
    t2.set$y($.add(t2.get$y(), $.sin(this.bull_rotation) * spd));
    if (this.bull_charging && this.charge_time >= t3) {
      this.bull_charging = false;
      t1 = this.bull.BasicFlipAnimationRender$2($.assets.get$bull(), 1);
      this.bull.set$render(t1);
    }
  }
},
 controlGrendelAttack$0: function() {
  var t1, di, t2, d, t3, i, ta, fa;
  t1 = this.grendel;
  t1.set$cooldown($.sub(t1.get$cooldown(), 1));
  if ($.leB(this.grendel.get$cooldown(), 0) && $.ui.get$mouseDown() === true) {
    di = $.Vector2$($.sub($.sub(this.grendel.get$x(), $.sub($.ui.get$mouse().get$x(), $.div(this.scene.get$screenx(), 2))), this.scene.get$camera().get$x()), $.sub($.sub(this.grendel.get$y(), $.sub($.ui.get$mouse().get$y(), $.div(this.scene.get$screeny(), 2))), this.scene.get$camera().get$y()));
    t1 = di.x;
    t1 = $.mul(t1, t1);
    t2 = di.y;
    d = $.sqrt($.add(t1, $.mul(t2, t2)));
    t3 = $.mul($.div(di.x, d), -50);
    this.grendel.get$v().set$x(t3);
    t3 = $.mul($.div(di.y, d), -50);
    this.grendel.get$v().set$y(t3);
    this.grendel.set$attacking(true);
    this.grendel.set$cooldown(30);
  }
  if (this.bull_alive)
    if (this.grendel.get$attacking() === true)
      if (!this.bull_charging) {
        t1 = this.grendel;
        t2 = this.bull;
        t3 = $.sqrt($.pow($.sub(t1.get$x(), t2.get$x()), 2) + $.pow($.sub(t1.get$y(), t2.get$y()), 2)) < 50;
        t1 = t3;
      } else
        t1 = false;
    else
      t1 = false;
  else
    t1 = false;
  if (t1) {
    t1 = this.grendel.get$v();
    this.bull_rotation = $.atan2(t1.get$y(), t1.get$x());
    this.bull_lives = this.bull_lives - 1;
    t2 = $.sub($.enemyHealth0(), 20);
    $.enemyHealth(t2);
    t2 = this.grendel.get$v();
    t2.set$x($.mul(t2.get$x(), -1));
    t2 = this.grendel.get$v();
    t2.set$y($.mul(t2.get$y(), -1));
    this.grendel.set$attacking(false);
    for (i = 0; i < 10; ++i) {
      t1 = this.scene.get$actors();
      t2 = $.getInterceptor$JSArray(t1);
      t3 = this.bull;
      t2.add$1(t1, $.GearParticle$(t3.get$x(), t3.get$y(), 1));
    }
    ta = this.bull_lives / 5;
    fa = 1 - ta;
    t1 = this.truth;
    $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelBull_controlGrendelAttack_anon(ta));
    t1 = this.gears;
    $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelBull_controlGrendelAttack_anon0(fa));
    if (this.bull_lives <= 0) {
      this.bull.remove$0();
      this.bull_alive = false;
      this.initWin$0();
      for (i = 0; i < 50; ++i) {
        t1 = this.scene.get$actors();
        t2 = $.getInterceptor$JSArray(t1);
        t3 = this.bull;
        t2.add$1(t1, $.GearParticle$(t3.get$x(), t3.get$y(), 3));
      }
    }
  } else {
    if (this.bull_charging) {
      t1 = this.grendel;
      t2 = this.bull;
      t3 = $.sqrt($.pow($.sub(t1.get$x(), t2.get$x()), 2) + $.pow($.sub(t1.get$y(), t2.get$y()), 2)) < 50;
      t1 = t3;
    } else
      t1 = false;
    if (t1) {
      t1 = $.cos(this.bull_rotation) * 100;
      this.grendel.get$v().set$x(t1);
      t1 = $.sin(this.bull_rotation) * 100;
      this.grendel.get$v().set$y(t1);
      $.grendel_hurt(this.scene, 10);
      this.bull_charging = false;
      this.bull_rotation = $.add(this.bull_rotation, 3.141592653589793);
    }
  }
},
 createScenery$0: function() {
  var t1, i, rot, rad, t2, t3, t4;
  this.truth = $.List_List(null);
  for (t1 = this.rng, i = 0; i < 20; ++i) {
    rot = $.mul($.mul(t1.nextDouble$0(), 3.141592653589793), 2);
    rad = $.add($.mul(t1.nextDouble$0(), 150), 500);
    t2 = this.truth;
    t3 = $.getInterceptor$JSArray(t2);
    t4 = $.cos(rot);
    if (typeof rad !== 'number')
      throw $.iae(rad);
    t3.add$1(t2, $.Character$(1, "0f0", 266, null, "tree", 200, t4 * rad, $.sin(rot) * rad));
  }
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.truth);
},
 createGears$0: function() {
  var t1, i, rot, rad, t2, size, t3, t4;
  this.gears = $.List_List(null);
  for (t1 = this.rng, i = 0; i < 20; ++i) {
    rot = $.mul($.mul(t1.nextDouble$0(), 3.141592653589793), 2);
    rad = $.add($.mul(t1.nextDouble$0(), 400), 500);
    t2 = $.sub($.mul($.mul(t1.nextDouble$0(), 100), 2), 100);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    size = 200 + t2;
    t2 = this.gears;
    t3 = $.getInterceptor$JSArray(t2);
    t4 = $.cos(rot);
    if (typeof rad !== 'number')
      throw $.iae(rad);
    t3.add$1(t2, $.Character$(0, "888", size, null, "gear", size, t4 * rad, $.sin(rot) * rad));
  }
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.gears);
},
 initWin$0: function() {
  var t1 = this.scene.get$postrender();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.LevelBull_initWin_anon(this));
},
 controlWin$0: function() {
  this.win_time = $.add(this.win_time, 1);
  if ($.geB(this.win_time, 480)) {
    this.scene.cleanUp$0();
    $.nextLevel("shaper");
  }
},
 LevelBull$0: function() {
  this.scene = $.Scene$();
  this.scene.set$stain(0.5);
  this.inbounds = $.List_List(null);
  this.not_inbounds = $.List_List(null);
  var t1 = this.inbounds;
  $.getInterceptor$JSArray(t1).add$1(t1, $.CircleBound$(0, 0, 500));
  this.outbounds = $.List_List(null);
  this.grendel = $.Grendel$(-400, 0);
  this.bull = $.Character$(1, "f00", 100, null, "bull", 140, 400, 0);
  this.createScenery$0();
  this.createGears$0();
  t1 = this.scene.get$postrender();
  $.getInterceptor$JSArray(t1).add$1(t1, this.get$drawFog());
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.grendel);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.bull);
  $.zodiacIntro($.assets.get$zodiac_taurus(), this.scene, new $.anon60(this));
}
};

$$.LevelShaper = {"":"Object;scene>,currentStage=,stages>,rng>,alltrue>,allfalse>,annotation_showing=,annotation_shown=,interval<",
 begin$0: function() {
  var t1, t2;
  t1 = {};
  t2 = this.stages;
  t1.updateFunction_0 = $.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, this.currentStage).call$0();
  $.zodiacIntro($.assets.get$zodiac_cancer(), this.scene, new $.LevelShaper_begin_anon(t1, this));
},
 stage1$0: function() {
  var grendel, trees, meadhall, t1;
  grendel = $.Grendel$(0, 0);
  grendel.v = $.Vector2$(0, 0);
  trees = $.List_List(null);
  $.CONSTANT0.forEach$1([[-865, -337], [746, 316], [-137, -387], [828, 100], [431, -208], [284, -491], [784, -333], [671, -104], [659, 549], [506, 904], [-743, -166], [-393, -29], [-375, -425], [-412, 604], [-840, 129], [-709, 525], [-475, 1095]], new $.LevelShaper_stage1_anon(trees));
  meadhall = $.Character$(1, "000", 300, null, "meadhall door", 800, 0, -1200);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, grendel);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, trees);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, meadhall);
  return new $.LevelShaper_stage1_anon0(this, grendel, trees, meadhall, $.Random_Random(null));
},
 get$stage1: function() {
  return new $.BoundClosure(this, 'stage1$0');
},
 warriorDeath$2: function(x, y) {
  var t1, i, t2, a, t3;
  for (t1 = this.rng, i = 0; i < 5; ++i) {
    t2 = t1.nextDouble$0();
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    a = $.ArcParticle$("blood", x, y, false, null, 1, true, null, 0.2 * t2 - 0.1, 30, 20, null);
    t3 = this.alltrue;
    $.getInterceptor$JSArray(t3).add$1(t3, a);
    t3 = this.scene.get$actors();
    $.getInterceptor$JSArray(t3).add$1(t3, a);
  }
  $.audio.play$1("hit");
},
 get$warriorDeath: function() {
  return new $.BoundClosure1(this, 'warriorDeath$2');
},
 stage2$1: function(data) {
  var t1, t2, grendel, trees, meadhall, rng, i, t3, t4;
  t1 = {};
  t2 = $.getInterceptor$JSStringJSArray(data);
  grendel = t2.operator$index$1(data, "grendel");
  trees = t2.operator$index$1(data, "trees");
  meadhall = t2.operator$index$1(data, "meadhall");
  $.showHealthBar(this.scene, false);
  rng = $.Random_Random(null);
  t2 = new $.LevelShaper_stage2_rrng(rng);
  t1.wt1_0 = $.List_List(null);
  t1.wt2_1 = $.List_List(null);
  for (i = 0; t3 = i < 3, t4 = t1.wt1_0, t3; ++i) {
    $.getInterceptor$JSArray(t4).add$1(t4, $.Warrior$($.add(grendel.get$x(), t2.call$1(1000)), $.add($.add(grendel.get$y(), 750), t2.call$1(250)), "0f0", this.get$warriorDeath()));
    t3 = t1.wt2_1;
    $.getInterceptor$JSArray(t3).add$1(t3, $.Warrior$($.add(grendel.get$x(), t2.call$1(1000)), $.add($.sub(grendel.get$y(), 750), t2.call$1(250)), "f00", this.get$warriorDeath()));
  }
  $.getInterceptor$JSArray(t4).forEach$1(t4, new $.LevelShaper_stage2_anon(t1));
  t3 = t1.wt2_1;
  $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage2_anon0(t1));
  t3 = this.scene.get$actors();
  $.getInterceptor$JSArray(t3).addAll$1(t3, t1.wt1_0);
  t3 = this.scene.get$actors();
  $.getInterceptor$JSArray(t3).addAll$1(t3, t1.wt2_1);
  t3 = t1.wt1_0;
  $.getInterceptor$JSArray(t3).add$1(t3, grendel);
  t1.t_2 = 0;
  t1.ta_3 = 0;
  t1.ts_4 = null;
  this.alltrue = $.List_List(null);
  this.allfalse = $.List_List(null);
  grendel.set$hitFunction(new $.LevelShaper_stage2_anon1(t1, this, trees));
  t1.notes_5 = $.List_List(null);
  return new $.LevelShaper_stage2_anon2(t1, this, grendel, trees, meadhall, rng, t2);
},
 get$stage2: function() {
  return new $.BoundClosure0(this, 'stage2$1');
},
 stage3$1: function(data) {
  var t1, t2, grendel, trees;
  t1 = {};
  t2 = $.getInterceptor$JSStringJSArray(data);
  grendel = t2.operator$index$1(data, "grendel");
  trees = t2.operator$index$1(data, "trees");
  t2 = this.alltrue;
  $.getInterceptor$JSArray(t2).addAll$1(t2, trees);
  t2 = this.alltrue;
  $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage3_anon());
  t1.t_0 = 0;
  return new $.LevelShaper_stage3_anon0(t1, this, grendel);
},
 get$stage3: function() {
  return new $.BoundClosure0(this, 'stage3$1');
},
 LevelShaper$0: function() {
  this.scene = $.Scene$();
  this.stages = [this.get$stage1(), this.get$stage2(), this.get$stage3()];
  this.begin$0();
}
};

$$.LevelDragon = {"":"Object;scene>,ui,not_inbounds>,inbounds>,outbounds>,dragon_left=,dragon_started,fading_out>,grendel=,golds>,notes>,annotation_showing=,annotation_shown=,rng>,kicked_gold>,dragon_parts,dragon_head=,dragon_destination,dragon_rotation,dragon_time,fire_balls>,firing_dragon_heads",
 rrng$1: function(x) {
  var t1 = this.rng.nextDouble$0();
  if (typeof t1 !== 'number')
    return this.rrng$1$bailout0(1, x, t1);
  return t1 * x * 2 - x;
},
 rrng$1$bailout0: function(state0, x, t1) {
  return $.sub($.mul($.mul(t1, x), 2), x);
},
 resetGold$0: function() {
  var t1, i, t2, t3;
  this.dragon_started = true;
  this.golds = $.List_List(null);
  for (t1 = this.rng, i = 0; t2 = i < 3, t3 = this.golds, t2; ++i)
    $.getInterceptor$JSArray(t3).add$1(t3, $.Character$(1, "ff0", 80, null, "gold", 60, $.sub($.mul($.mul(t1.nextDouble$0(), 500), 2), 500), $.sub($.mul($.mul(t1.nextDouble$0(), 500), 2), 500)));
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, t3);
},
 checkGrendelTakeGold$0: function() {
  var t1 = this.golds;
  this.golds = $.getInterceptor$JSArray(t1).filter$1(t1, new $.LevelDragon_checkGrendelTakeGold_anon(this));
  t1 = this.golds;
  if ($.eqB($.getInterceptor$JSStringJSArray(t1).get$length(t1), 0))
    this.releaseDragon$0();
},
 releaseDragon$0: function() {
  var starting_rotation, sx, sy, t1, i;
  starting_rotation = $.sub($.mul($.mul(this.rng.nextDouble$0(), 3.141592653589793), 2), 3.141592653589793);
  sx = $.cos(starting_rotation) * 1500;
  sy = $.sin(starting_rotation) * 1500;
  this.dragon_head = $.Character$(1, "f00", 60, null, "Dragon Head", 60, sx, sy);
  t1 = $.Vector2$(0, 0);
  this.dragon_head.set$v(t1);
  this.dragon_head.set$alpha(0);
  this.dragon_parts = $.List_List(null);
  t1 = this.dragon_parts;
  $.getInterceptor$JSArray(t1).add$1(t1, $.DragonPart$(this.dragon_head, sx, sy, 0));
  for (i = 1; $.ltB(i, this.dragon_left); ++i) {
    t1 = this.dragon_parts;
    $.getInterceptor$JSArray(t1).add$1(t1, $.DragonPart$($.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, i - 1), sx, sy, i * 4));
  }
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.dragon_head);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.dragon_parts);
  t1 = this.kicked_gold;
  if (0 >= t1.length)
    throw $.ioore(0);
  this.dragon_destination = t1[0];
  this.dragon_rotation = $.atan2($.sub(this.dragon_head.get$y(), this.dragon_destination.get$y()), $.sub(this.dragon_head.get$x(), this.dragon_destination.get$x()));
  this.dragon_time = 0;
},
 slitherDragon$0: function() {
  var t1, a, b, d, target_rotation, t2, t3, t4;
  t1 = {};
  this.dragon_time = $.add(this.dragon_time, 1);
  a = $.sub(this.dragon_head.get$x(), this.dragon_destination.get$x());
  b = $.sub(this.dragon_head.get$y(), this.dragon_destination.get$y());
  d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
  target_rotation = $.atan2(b, a) + 3.141592653589793;
  t2 = this.dragon_rotation;
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  t3 = $.mod(target_rotation - t2, 6.283185307179586) > $.mod(target_rotation - t2 + 3.141592653589793, 6.283185307179586);
  t4 = this.dragon_time;
  if (t3) {
    t3 = $.div(t4, 300);
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    t4 = 0.03 * (1 + t3);
    t3 = t4;
  } else {
    t3 = $.div(t4, 300);
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    t4 = -0.03 * (1 + t3);
    t3 = t4;
  }
  this.dragon_rotation = t2 + t3;
  if (d < 50) {
    t2 = this.kicked_gold;
    t3 = t2.length;
    if (t3 > 1) {
      $.CONSTANT0.removeAt$1(t2, 0).remove$0();
      t1 = this.kicked_gold;
      if (0 >= t1.length)
        throw $.ioore(0);
      this.dragon_destination = t1[0];
    } else if (t3 === 1) {
      $.CONSTANT0.removeAt$1(t2, 0).remove$0();
      this.dragon_destination = $.Vector2$($.mul($.div($.neg(a), d), 1500), $.mul($.div($.neg(b), d), 1500));
    } else {
      this.kicked_gold = $.List_List(null);
      this.dragon_head.remove$0();
      t2 = this.dragon_parts;
      $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelDragon_slitherDragon_anon());
      this.dragon_parts = null;
      if ($.gtB(this.dragon_left, 1))
        this.resetGold$0();
      else {
        this.dragon_started = false;
        this.fading_out = true;
        t1.t_0 = 0;
        t2 = this.scene.get$postrender();
        $.getInterceptor$JSArray(t2).add$1(t2, new $.LevelDragon_slitherDragon_anon0(t1));
      }
      return;
    }
  }
  if (this.kicked_gold.length === 0) {
    t1 = this.dragon_head.get$x();
    t1 = $.mul(t1, t1);
    t2 = this.dragon_head.get$y();
    if ($.sqrt($.add(t1, $.mul(t2, t2))) > 500) {
      t1 = this.dragon_head;
      t1.set$alpha($.sub(t1.get$alpha(), 0.01));
    }
    t1 = this.dragon_parts;
    $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelDragon_slitherDragon_anon1());
  } else {
    if ($.ltB(this.dragon_head.get$alpha(), 1)) {
      t1 = this.dragon_head.get$x();
      t1 = $.mul(t1, t1);
      t2 = this.dragon_head.get$y();
      t3 = $.sqrt($.add(t1, $.mul(t2, t2))) < 1000;
      t1 = t3;
    } else
      t1 = false;
    if (t1) {
      t1 = this.dragon_head;
      t1.set$alpha($.add(t1.get$alpha(), 0.01));
    }
    t1 = this.dragon_parts;
    $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelDragon_slitherDragon_anon2());
  }
  t1 = this.dragon_head;
  t1.set$x($.sub(t1.get$x(), $.cos(this.dragon_rotation) * 5));
  t1 = this.dragon_head;
  t1.set$y($.sub(t1.get$y(), $.sin(this.dragon_rotation) * 5));
  t1 = this.dragon_head;
  t2 = t1.get$x();
  t1.get$v().set$x(t2);
  t2 = this.dragon_head;
  t3 = t2.get$y();
  t2.get$v().set$y(t3);
},
 fireBallControl$0: function() {
  var t1, rot, dh, t2;
  t1 = this.firing_dragon_heads;
  if ($.ltB($.getInterceptor$JSStringJSArray(t1).get$length(t1), 2) && this.dragon_started && $.eqB(this.rng.nextInt$1(120), 1)) {
    rot = $.sub($.mul($.mul(this.rng.nextDouble$0(), 3.141592653589793), 2), 3.141592653589793);
    dh = $.Character$(1, null, 50, null, "Firing Dragon Head", 50, $.cos(rot) * 750, $.sin(rot) * 750);
    dh.v = $.Vector2$(0, 3.141592653589793 + $.atan2($.sub(dh.y, this.grendel.get$y()), $.sub(dh.x, this.grendel.get$x())));
    t1 = this.firing_dragon_heads;
    $.getInterceptor$JSArray(t1).add$1(t1, dh);
    t1 = this.scene.get$actors();
    $.getInterceptor$JSArray(t1).add$1(t1, dh);
  }
  t1 = this.firing_dragon_heads;
  this.firing_dragon_heads = $.getInterceptor$JSArray(t1).filter$1(t1, new $.LevelDragon_fireBallControl_anon(this));
  t2 = this.fire_balls;
  this.fire_balls = $.getInterceptor$JSArray(t2).filter$1(t2, new $.LevelDragon_fireBallControl_anon0(this));
},
 controlGrendelAttack$0: function() {
  var t1, di, t2, d, t3;
  t1 = this.grendel;
  t1.set$cooldown($.sub(t1.get$cooldown(), 1));
  if ($.leB(this.grendel.get$cooldown(), 0) && this.ui.get$mouseDown() === true) {
    di = $.Vector2$($.sub($.sub(this.grendel.get$x(), $.sub(this.ui.get$mouse().get$x(), $.div(this.scene.get$screenx(), 2))), this.scene.get$camera().get$x()), $.sub($.sub(this.grendel.get$y(), $.sub(this.ui.get$mouse().get$y(), $.div(this.scene.get$screeny(), 2))), this.scene.get$camera().get$y()));
    t1 = di.x;
    t1 = $.mul(t1, t1);
    t2 = di.y;
    d = $.sqrt($.add(t1, $.mul(t2, t2)));
    t3 = $.mul($.div(di.x, d), -50);
    this.grendel.get$v().set$x(t3);
    t3 = $.mul($.div(di.y, d), -50);
    this.grendel.get$v().set$y(t3);
    this.grendel.set$attacking(true);
    this.grendel.set$cooldown(30);
  }
  if (this.grendel.get$attacking() === true && !(this.dragon_parts == null)) {
    t1 = this.dragon_parts;
    this.dragon_parts = $.getInterceptor$JSArray(t1).filter$1(t1, new $.LevelDragon_controlGrendelAttack_anon(this));
  }
},
 hitGrendel$1: function(direction) {
  var t1 = $.mul(direction.x, 100);
  this.grendel.get$v().set$x(t1);
  t1 = $.mul(direction.y, 100);
  this.grendel.get$v().set$y(t1);
  $.grendel_hurt(this.scene, 10);
},
 controlNotes$0: function() {
  var t1 = this.notes;
  $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelDragon_controlNotes_anon());
},
 LevelDragon$0: function(box_0) {
  var t1, i, rot, t2, rad, note;
  this.scene = $.Scene$();
  this.ui = $.UISystem$();
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, $.Character$(1, null, 2500, null, "dragon lair", 2500, 0, 50));
  this.inbounds = $.List_List(null);
  t1 = this.inbounds;
  $.getInterceptor$JSArray(t1).add$1(t1, $.RectBound$(0, 790, 200, 100));
  t1 = this.inbounds;
  $.getInterceptor$JSArray(t1).add$1(t1, $.CircleBound$(0, 0, 750));
  this.not_inbounds = $.List_List(null);
  this.outbounds = $.List_List(null);
  this.grendel = $.Grendel$(0, 800);
  this.golds = $.List_List(null);
  t1 = this.golds;
  $.getInterceptor$JSArray(t1).add$1(t1, $.Character$(1, "ff0", 80, null, "gold", 60, 0, 0));
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.golds);
  this.notes = $.List_List(null);
  for (t1 = this.rng, i = 0; i < 30; ++i) {
    rot = this.rrng$1(3.141592653589793);
    t2 = $.mul(t1.nextDouble$0(), 200);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    rad = 750 + t2;
    note = $.Character$(1, "ff0", 50, null, "note", 50, $.cos(rot) * rad, $.sin(rot) * rad);
    note.v = $.Vector2$(rot, rad);
    t2 = this.notes;
    $.getInterceptor$JSArray(t2).add$1(t2, note);
  }
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.notes);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.grendel);
  box_0.interval_0 = null;
  box_0.fadeOutTime_1 = 0;
  $.zodiacIntro($.assets.get$zodiac_leo(), this.scene, new $.anon59(box_0, this));
}
};

$$.LevelOrk = {"":"Object;scene>,grendel=,ork=,statues>,notes>,warriors>,ork_time=,stone_gods_awakened=,interval<,inbounds>,not_inbounds>,outbounds>,annotation_showing=,annotation_shown=,rng>,screenAlpha=,statue_health=,attacking_statue=,attack_time,win_time=,attacking=,statue_t,STATUE_SPEED",
 controlGrendelAttack$0: function() {
  var t1, di, t2, d, t3;
  t1 = this.grendel;
  t1.set$cooldown($.sub(t1.get$cooldown(), 1));
  if ($.leB(this.grendel.get$cooldown(), 0) && $.ui.get$mouseDown() === true) {
    di = $.Vector2$($.sub($.sub(this.grendel.get$x(), $.sub($.ui.get$mouse().get$x(), $.div(this.scene.screenx, 2))), this.scene.camera.x), $.sub($.sub(this.grendel.get$y(), $.sub($.ui.get$mouse().get$y(), $.div(this.scene.screeny, 2))), this.scene.camera.y));
    t1 = di.x;
    t1 = $.mul(t1, t1);
    t2 = di.y;
    d = $.sqrt($.add(t1, $.mul(t2, t2)));
    t3 = $.mul($.div(di.x, d), -50);
    this.grendel.get$v().set$x(t3);
    t3 = $.mul($.div(di.y, d), -50);
    this.grendel.get$v().set$y(t3);
    this.grendel.set$attacking(true);
    this.grendel.set$cooldown(30);
  }
  if (this.grendel.get$attacking() === true) {
    t1 = this.statues;
    this.statues = $.getInterceptor$JSArray(t1).filter$1(t1, new $.LevelOrk_controlGrendelAttack_anon(this));
  }
},
 controlStatues$0: function() {
  var t1, t2, main_circling_rotation, circling_rotations, t3, attacker, a, b, d, t4, i, statue, cd, ci, cw;
  this.statue_t = this.statue_t + 1;
  if ($.gtB(this.statue_health, 0)) {
    t1 = this.statue_t;
    t2 = this.STATUE_SPEED;
    main_circling_rotation = t1 / (3141.592653589793 / t2) * 2 * 3.141592653589793;
    circling_rotations = [main_circling_rotation, main_circling_rotation + 2.0943951023931953, main_circling_rotation + 4.1887902047863905];
    if (this.attacking !== true && $.eqB(this.rng.nextInt$1(60), 0)) {
      this.attacking = true;
      t1 = this.rng;
      t3 = this.statues;
      this.attacking_statue = t1.nextInt$1($.getInterceptor$JSStringJSArray(t3).get$length(t3));
      this.attack_time = 0;
    } else if (this.attacking === true) {
      this.attack_time = this.attack_time + 1;
      t1 = this.statues;
      attacker = $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, this.attacking_statue);
      a = $.sub(attacker.get$x(), this.grendel.get$x());
      b = $.sub(attacker.get$y(), this.grendel.get$y());
      d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
      if (d > 50) {
        t1 = attacker.get$x();
        t3 = t2 * 2;
        if (typeof a !== 'number')
          throw $.iae(a);
        attacker.set$x($.sub(t1, t3 * a / d));
        t4 = attacker.get$y();
        if (typeof b !== 'number')
          throw $.iae(b);
        attacker.set$y($.sub(t4, t3 * b / d));
      } else {
        this.hitGrendel$1($.Vector2$($.div($.neg(a), d), $.div($.neg(b), d)));
        this.attacking = false;
      }
      if (this.attack_time > 60)
        this.attacking = false;
    }
    for (i = 0; t1 = this.statues, $.ltB(i, $.getInterceptor$JSStringJSArray(t1).get$length(t1)); ++i) {
      t1 = this.statues;
      statue = $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, i);
      if (this.attacking !== true || !$.eqB(this.attacking_statue, i)) {
        t1 = statue.get$x();
        t3 = this.grendel.get$x();
        if (i >= circling_rotations.length)
          throw $.ioore(i);
        a = $.sub(t1, $.add(t3, $.cos(circling_rotations[i]) * 500));
        t1 = statue.get$y();
        t4 = this.grendel.get$y();
        if (i >= circling_rotations.length)
          throw $.ioore(i);
        b = $.sub(t1, $.add(t4, $.sin(circling_rotations[i]) * 500));
        d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
        statue.set$x($.sub(statue.get$x(), $.mul($.div(a, d), t2)));
        statue.set$y($.sub(statue.get$y(), $.mul($.div(b, d), t2)));
      }
    }
  } else {
    t1 = this.statues;
    statue = $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, 0);
    t1 = this.warriors;
    if ($.gtB($.getInterceptor$JSStringJSArray(t1).get$length(t1), 0)) {
      for (cd = 9999, ci = 0, i = 0; t1 = this.warriors, t2 = $.ltB(i, $.getInterceptor$JSStringJSArray(t1).get$length(t1)), t3 = this.warriors, t2; ++i) {
        t1 = $.getInterceptor$JSStringJSArray(t3).operator$index$1(t3, i);
        d = $.sqrt($.pow($.sub(t1.get$x(), statue.get$x()), 2) + $.pow($.sub(t1.get$y(), statue.get$y()), 2));
        if (d < cd) {
          ci = i;
          cd = d;
        }
      }
      cw = $.getInterceptor$JSStringJSArray(t3).operator$index$1(t3, ci);
      a = $.sub(statue.get$x(), cw.get$x());
      b = $.sub(statue.get$y(), cw.get$y());
      d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
      t1 = statue.get$x();
      t2 = $.div(a, d);
      t3 = this.STATUE_SPEED;
      statue.set$x($.sub(t1, $.mul(t2, t3)));
      statue.set$y($.sub(statue.get$y(), $.mul($.div(b, d), t3)));
    }
  }
},
 bloodExplode$2: function(x, y) {
  var t1, i, t2, t3, t4;
  for (t1 = this.rng, i = 0; i < 5; ++i) {
    t2 = this.scene.actors;
    t3 = $.getInterceptor$JSArray(t2);
    t4 = t1.nextDouble$0();
    if (typeof t4 !== 'number')
      throw $.iae(t4);
    t3.add$1(t2, $.ArcParticle$("blood", x, y, true, null, 1, true, null, 0.2 * t4 - 0.1, 30, 10, null));
  }
},
 controlWarriors$0: function() {
  var t1, t2, rot, t3, t4, t5, t6, w;
  if ($.leB(this.statue_health, 100)) {
    t1 = this.warriors;
    t1 = $.getInterceptor$JSStringJSArray(t1).get$length(t1);
    t2 = $.tdiv(this.statue_health, 25);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    t1 = $.ltB(t1, 5 - t2);
  } else
    t1 = false;
  if (t1) {
    t1 = this.rng;
    rot = $.sub($.mul($.mul(t1.nextDouble$0(), 3.141592653589793), 2), 3.141592653589793);
    t2 = $.cos(rot) * 1000;
    t3 = $.sin(rot) * 1000;
    if (t1.nextBool$0() === true && $.gtB(this.statue_health, 0))
      t1 = this.grendel;
    else {
      t4 = this.statues;
      t5 = $.getInterceptor$JSStringJSArray(t4);
      if ($.eqB(t5.get$length(t4), 1))
        t1 = 0;
      else {
        t6 = this.statues;
        t1 = t1.nextInt$1($.getInterceptor$JSStringJSArray(t6).get$length(t6));
      }
      t1 = t5.operator$index$1(t4, t1);
    }
    w = $.OrkWarrior$(t2, t3, t1);
    t1 = this.warriors;
    $.getInterceptor$JSArray(t1).add$1(t1, w);
    t1 = this.scene.actors;
    $.getInterceptor$JSArray(t1).add$1(t1, w);
  }
  t1 = this.warriors;
  this.warriors = $.getInterceptor$JSArray(t1).filter$1(t1, new $.LevelOrk_controlWarriors_anon(this));
},
 hitGrendel$2: function(direction, damage) {
  var t1 = $.mul(direction.get$x(), 100);
  this.grendel.get$v().set$x(t1);
  t1 = $.mul(direction.get$y(), 100);
  this.grendel.get$v().set$y(t1);
  if (damage === true)
    $.grendel_hurt(this.scene, 5);
},
 hitGrendel$1: function(direction) {
  return this.hitGrendel$2(direction, true);
},
 LevelOrk$0: function() {
  var t1, i, t2, t3;
  this.scene = $.Scene$();
  this.inbounds = $.List_List(null);
  this.inbounds.push($.RectBound$(0, 850, 400, 300));
  this.inbounds.push($.CircleBound$(0, 0, 750));
  this.not_inbounds = $.List_List(null);
  this.outbounds = $.List_List(null);
  t1 = this.scene.actors;
  $.getInterceptor$JSArray(t1).add$1(t1, $.Character$(1, null, 1900, null, "ork temple", 1680, 0, 100));
  this.grendel = $.Grendel$(0, 1000);
  this.ork = $.Character$(1, "00f", 50, null, "ork", 50, 0, 0);
  this.statues = $.List_List(null);
  for (i = 3.9269908169872414; i < 6.283185307179586; i += 0.7853981633974483) {
    t1 = this.statues;
    t2 = $.getInterceptor$JSArray(t1);
    t3 = $.sin(i) * 850;
    t2.add$1(t1, $.Character$(1, "888", 160, null, "statue", 120, $.cos(i) * 850, t3));
  }
  this.notes = $.List_List(null);
  this.warriors = $.List_List(null);
  t1 = this.scene.actors;
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.statues);
  t1 = this.scene.actors;
  $.getInterceptor$JSArray(t1).add$1(t1, this.grendel);
  t1 = this.scene.actors;
  $.getInterceptor$JSArray(t1).add$1(t1, this.ork);
  $.zodiacIntro($.assets.get$zodiac_capricorn(), this.scene, new $.anon58(this));
}
};

$$.LevelBeowulf = {"":"Object;scene>,grendel=,party_people,cake=,beowulf,sign,inbounds>,not_inbounds>,outbounds>,annotation_showing=,annotation_shown=,interval<,movement_enabled>,party_time>,party_started>,door_smashed>,battle_started>,rng>,background,partygoers,battle_time,battle_notes,battle_phase,sign_fade_started",
 resetBounds$0: function() {
  var t1, i, t2, t3;
  this.inbounds = $.List_List(null);
  this.not_inbounds = $.List_List(null);
  t1 = this.inbounds;
  $.getInterceptor$JSArray(t1).add$1(t1, $.RectBound$(0, 0, 1000, 2000));
  if (!this.party_started) {
    t1 = this.inbounds;
    $.getInterceptor$JSArray(t1).add$1(t1, $.RectBound$(0, 1250, 500, 500));
  }
  this.outbounds = $.List_List(null);
  if (!this.party_started) {
    t1 = this.outbounds;
    $.getInterceptor$JSArray(t1).add$1(t1, $.RectBound$(0, 1000, 500, 100));
  }
  if (this.party_started)
    for (i = 0; i <= 6; ++i) {
      t1 = this.outbounds;
      t2 = $.getInterceptor$JSArray(t1);
      t3 = -800 + 1600 * i / 6;
      t2.add$1(t1, $.CircleBound$(-300, t3, 50));
      t1 = this.outbounds;
      $.getInterceptor$JSArray(t1).add$1(t1, $.CircleBound$(300, t3, 50));
    }
},
 controlGrendelAttack$0: function() {
  var t1, di, t2, d, t3, i, t4, t5;
  t1 = this.grendel;
  t1.set$cooldown($.sub(t1.get$cooldown(), 1));
  if ($.leB(this.grendel.get$cooldown(), 0) && $.ui.get$mouseDown() === true) {
    di = $.Vector2$($.sub($.sub(this.grendel.get$x(), $.sub($.ui.get$mouse().get$x(), $.div(this.scene.get$screenx(), 2))), this.scene.get$camera().get$x()), $.sub($.sub(this.grendel.get$y(), $.sub($.ui.get$mouse().get$y(), $.div(this.scene.get$screeny(), 2))), this.scene.get$camera().get$y()));
    t1 = di.x;
    t1 = $.mul(t1, t1);
    t2 = di.y;
    d = $.sqrt($.add(t1, $.mul(t2, t2)));
    t3 = $.mul($.div(di.x, d), -50);
    this.grendel.get$v().set$x(t3);
    t3 = $.mul($.div(di.y, d), -50);
    this.grendel.get$v().set$y(t3);
    this.grendel.set$attacking(true);
    this.grendel.set$cooldown(30);
  }
  if (this.grendel.get$attacking() === true)
    if (!this.door_smashed && $.ltB(this.grendel.get$y(), 1350) && $.ltB(this.grendel.get$v().get$y(), 0)) {
      t1 = this.outbounds;
      $.getInterceptor$JSArray(t1).removeAt$1(t1, 0);
      for (t1 = this.rng, i = 0; i < 20; ++i) {
        t2 = this.scene.get$actors();
        t3 = $.getInterceptor$JSArray(t2);
        t4 = $.sub($.mul($.mul(t1.nextDouble$0(), 250), 2), 250);
        t5 = $.sub($.mul($.mul(t1.nextDouble$0(), 50), 2), 50);
        if (typeof t5 !== 'number')
          throw $.iae(t5);
        t3.add$1(t2, $.StoneParticle$(t4, 1000 + t5, 1));
      }
      this.door_smashed = true;
    }
},
 startParty$0: function() {
  var t1, i, t2, rad, c, t3;
  this.party_started = true;
  this.background.remove$0();
  this.cake = $.Character$(1, null, 140, null, "cake", 140, 0, 500);
  this.sign = $.Character$(1, null, 120, null, "happybirthday", 400, 0, 400);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.cake);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.sign);
  this.partygoers = [];
  for (t1 = this.rng, i = 0; i < 2.356194490192345; i += 0.19634954084936207) {
    t2 = $.sub($.mul($.mul(t1.nextDouble$0(), 100), 2), 100);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    rad = 400 + t2;
    t2 = $.sin(i) * rad;
    c = $.Character$(1, null, 70, null, "person", 40, t2 * (t1.nextBool$0() === true ? 1 : -1), $.add($.add(this.cake.get$y(), 250), $.cos(i) * rad));
    t3 = this.outbounds;
    $.getInterceptor$JSArray(t3).add$1(t3, $.CircleBound$(c.x, c.y, 60));
    t3 = this.partygoers;
    $.getInterceptor$JSArray(t3).add$1(t3, c);
  }
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.partygoers);
  t1 = this.scene.get$actors();
  t2 = $.getInterceptor$JSArray(t1);
  t3 = $.Character$(1, null, 1500, null, "darkzone", 1500, 0, 750);
  this.background = t3;
  t2.add$1(t1, t3);
  this.inbounds = $.List_List(null);
  this.not_inbounds = $.List_List(null);
  t3 = this.inbounds;
  $.getInterceptor$JSArray(t3).add$1(t3, $.CircleBound$(0, 800, 400));
},
 updateParty$0: function() {
  var t1, t2, t3;
  this.party_time = this.party_time + 1;
  t1 = this.party_time;
  if (t1 < 120) {
    t1 = this.scene.get$camera();
    t2 = t1.get$x();
    t1.set$x($.sub(t2, $.div($.sub(t2, this.cake.get$x()), 10)));
    t1 = this.scene.get$camera();
    t3 = t1.get$y();
    t1.set$y($.sub(t3, $.div($.sub(t3, this.cake.get$y()), 10)));
  } else if (t1 < 150) {
    t1 = this.scene.get$camera();
    t2 = t1.get$x();
    t1.set$x($.sub(t2, $.div($.sub(t2, this.grendel.get$x()), 10)));
    t1 = this.scene.get$camera();
    t3 = t1.get$y();
    t1.set$y($.sub(t3, $.div($.sub(t3, this.grendel.get$y()), 10)));
  }
  if (this.grendel.get$attacking() === true) {
    t1 = this.grendel;
    t2 = this.cake;
    t3 = $.sqrt($.pow($.sub(t1.get$x(), t2.get$x()), 2) + $.pow($.sub(t1.get$y(), t2.get$y()), 2)) < 50;
    t1 = t3;
  } else
    t1 = false;
  if (t1)
    this.startBattle$0();
},
 startBattle$0: function() {
  var t1, prevActors, i, t2, t3;
  this.background.remove$0();
  t1 = this.partygoers;
  $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelBeowulf_startBattle_anon());
  prevActors = this.scene.get$actors();
  t1 = $.Character$(1, null, 2100, null, "meadhall", 1200, 0, -50);
  this.background = t1;
  t1 = [t1];
  this.scene.set$actors(t1);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, prevActors);
  this.battle_started = true;
  this.resetBounds$0();
  this.cake.remove$0();
  this.sign.remove$0();
  for (t1 = this.rng, i = 0; t2 = i < 20, t3 = this.scene, t2; ++i) {
    t2 = t3.get$actors();
    $.getInterceptor$JSArray(t2).add$1(t2, $.BloodParticle$($.add(this.cake.get$x(), $.sub($.mul($.mul(t1.nextDouble$0(), 50), 2), 50)), $.add(this.cake.get$y(), $.sub($.mul($.mul(t1.nextDouble$0(), 50), 2), 50)), 1));
  }
  t1 = t3.get$actors();
  t2 = $.getInterceptor$JSArray(t1);
  t3 = $.Character$(1, "00f", 140, null, "beowulf", 80, 0, -900);
  this.beowulf = t3;
  t2.add$1(t1, t3);
  this.battle_notes = $.List_List(null);
},
 updateBattle$0: function() {
  var t1, t2, t3;
  if (this.annotation_showing !== true) {
    this.battle_time = this.battle_time + 1;
    if (this.battle_time === 60)
      this.movement_enabled = false;
    if (this.battle_time === 270)
      this.movement_enabled = true;
    t1 = this.battle_time;
    if (t1 > 60)
      if (t1 < 210) {
        t1 = this.scene.get$camera();
        t2 = t1.get$x();
        t1.set$x($.sub(t2, $.div($.sub(t2, this.beowulf.get$x()), 10)));
        t1 = this.scene.get$camera();
        t3 = t1.get$y();
        t1.set$y($.sub(t3, $.div($.sub(t3, this.beowulf.get$y()), 10)));
        if (this.battle_time === 200) {
          this.annotation_showing = true;
          this.annotation_shown = true;
          t1 = this.scene.get$postrender();
          $.getInterceptor$JSArray(t1).add$1(t1, $.annotationRender("Dodge the notes and pursue Beowulf", new $.LevelBeowulf_updateBattle_anon(this)));
        }
      } else if (t1 < 270) {
        t1 = this.scene.get$camera();
        t2 = t1.get$x();
        t1.set$x($.sub(t2, $.div($.sub(t2, this.grendel.get$x()), 10)));
        t1 = this.scene.get$camera();
        t3 = t1.get$y();
        t1.set$y($.sub(t3, $.div($.sub(t3, this.grendel.get$y()), 10)));
      } else
        switch (this.battle_phase) {
          case 0:
            this.noteBattle$0();
            break;
          case 1:
            this.beowulfRun$0();
            break;
        }
  }
},
 noteBattle$0: function() {
  var t1, n, t2, t3;
  if ($.mod(this.battle_time, 20) === 0) {
    t1 = this.beowulf;
    n = $.Character$(1, "ff0", 50, null, "note", 50, t1.get$x(), t1.get$y());
    t2 = this.rng;
    n.v = $.Vector2$($.sub($.mul($.mul(t2.nextDouble$0(), 25), 2), 25), $.sub($.mul($.mul(t2.nextDouble$0(), 25), 2), 25));
    t3 = this.battle_notes;
    $.getInterceptor$JSArray(t3).add$1(t3, n);
    t3 = this.scene.get$actors();
    $.getInterceptor$JSArray(t3).add$1(t3, n);
  }
  t1 = this.battle_notes;
  this.battle_notes = $.getInterceptor$JSArray(t1).filter$1(t1, new $.LevelBeowulf_noteBattle_anon(this));
  t1 = this.grendel;
  t2 = this.beowulf;
  if ($.sqrt($.pow($.sub(t1.get$x(), t2.get$x()), 2) + $.pow($.sub(t1.get$y(), t2.get$y()), 2)) < 300) {
    this.battle_phase = this.battle_phase + 1;
    t1 = this.battle_notes;
    $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelBeowulf_noteBattle_anon0(this));
    this.battle_notes = null;
  }
},
 beowulfRun$0: function() {
  var t1, t2, t3, t4;
  t1 = {};
  if ($.gtB(this.beowulf.get$alpha(), 0)) {
    t2 = this.beowulf;
    t2.set$y($.sub(t2.get$y(), 5));
    t2 = this.beowulf;
    t2.set$alpha($.sub(t2.get$alpha(), 0.05));
  }
  if (!this.sign_fade_started) {
    t2 = this.grendel;
    t3 = this.beowulf;
    t4 = $.sqrt($.pow($.sub(t2.get$x(), t3.get$x()), 2) + $.pow($.sub(t2.get$y(), t3.get$y()), 2)) < 120;
    t2 = t4;
  } else
    t2 = false;
  if (t2) {
    this.sign_fade_started = true;
    t1.t_0 = 0;
    t2 = this.scene.get$postrender();
    $.getInterceptor$JSArray(t2).add$1(t2, new $.LevelBeowulf_beowulfRun_anon(t1, this));
  }
},
 hitGrendel$1: function(direction) {
  var t1 = $.mul(direction.x, 100);
  this.grendel.get$v().set$x(t1);
  t1 = $.mul(direction.y, 100);
  this.grendel.get$v().set$y(t1);
  $.grendel_hurt(this.scene, 10);
},
 LevelBeowulf$0: function() {
  var t1, t2, t3;
  this.scene = $.Scene$();
  t1 = this.scene.get$actors();
  t2 = $.getInterceptor$JSArray(t1);
  t3 = $.Character$(1, null, 100, null, "meadhall door", 500, 0, 1000);
  this.background = t3;
  t2.add$1(t1, t3);
  this.resetBounds$0();
  this.grendel = $.Grendel$(0, 1250);
  t3 = this.scene.get$actors();
  $.getInterceptor$JSArray(t3).add$1(t3, this.grendel);
  t3 = $.window().setInterval$2(new $.anon57(this), 16);
  this.interval = t3;
  this.scene.set$interval(t3);
}
};

$$.LevelBeowulf2 = {"":"Object;ARENA_SIZE,rng>,interval<,grendel=,evil>,battle_started>,inbounds>,notes>,scene>,notes_in,start_time,nrate>,rotation_direction,move_speed,pace_radius,max_evil_cooldown,evil_cooldown,evil_mode,t=",
 rrng$1: function(x) {
  var t1 = this.rng.nextDouble$0();
  if (typeof t1 !== 'number')
    return this.rrng$1$bailout(1, x, t1);
  return t1 * x * 2 - x;
},
 rrng$1$bailout: function(state0, x, t1) {
  return $.sub($.mul($.mul(t1, x), 2), x);
},
 update$0: function() {
  var t1, t2;
  if (this.battle_started) {
    $.uiControl(this.grendel, this.scene, this.inbounds, [], [], true);
    this.controlGrendelAttack$0();
    this.controlEvil$0();
  } else {
    t1 = this.notes_in;
    t2 = this.notes;
    if (t1) {
      $.CONSTANT0.forEach$1(t2, new $.LevelBeowulf2_update_anon(this));
      this.nrate = this.nrate + 0.0001;
      t1 = this.notes;
      if (0 >= t1.length)
        throw $.ioore(0);
      if ($.ltB(t1[0].get$v().get$y(), 10)) {
        this.notes_in = false;
        this.start_time = 120;
        this.evil.set$visible(true);
      }
    } else {
      $.CONSTANT0.forEach$1(t2, new $.LevelBeowulf2_update_anon0(this));
      this.start_time = $.sub(this.start_time, 1);
      if ($.leB(this.start_time, 0)) {
        this.battle_started = true;
        this.switchMode$1(0);
      }
    }
  }
  this.scene.update$0();
  this.scene.render$0();
},
 get$update: function() {
  return new $.BoundClosure(this, 'update$0');
},
 controlGrendelAttack$0: function() {
  var t1, di, t2, d, t3;
  t1 = this.grendel;
  t1.set$cooldown($.sub(t1.get$cooldown(), 1));
  if ($.leB(this.grendel.get$cooldown(), 0) && $.ui.get$mouseDown() === true) {
    di = $.Vector2$($.sub($.sub(this.grendel.get$x(), $.sub($.ui.get$mouse().get$x(), $.div(this.scene.get$screenx(), 2))), this.scene.get$camera().get$x()), $.sub($.sub(this.grendel.get$y(), $.sub($.ui.get$mouse().get$y(), $.div(this.scene.get$screeny(), 2))), this.scene.get$camera().get$y()));
    t1 = di.x;
    t1 = $.mul(t1, t1);
    t2 = di.y;
    d = $.sqrt($.add(t1, $.mul(t2, t2)));
    t3 = $.mul($.div(di.x, d), -50);
    this.grendel.get$v().set$x(t3);
    t3 = $.mul($.div(di.y, d), -50);
    this.grendel.get$v().set$y(t3);
    this.grendel.set$attacking(true);
    this.grendel.set$cooldown(30);
  }
},
 controlEvil$0: function() {
  var a, b, c, ang, fa, fb, fc, t1, t2, npx, t3, npy, tm, mvx, mvy, t4;
  this.t = $.add(this.t, 1);
  if ($.eqB(this.evil_mode, 0)) {
    a = $.sub(this.evil.get$x(), this.grendel.get$x());
    b = $.sub(this.evil.get$y(), this.grendel.get$y());
    c = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
    ang = $.atan2(b, a);
    fa = $.sub(this.evil.get$x(), $.add(this.grendel.get$x(), $.cos(ang + this.rotation_direction) * c));
    fb = $.sub(this.evil.get$y(), $.add(this.grendel.get$y(), $.sin(ang + this.rotation_direction) * c));
    fc = $.sqrt($.add($.mul(fa, fa), $.mul(fb, fb)));
    t1 = $.div(a, c);
    t2 = c < this.pace_radius;
    npx = $.add($.mul(t1, t2 ? 1 : -1), $.div(fa, fc));
    t3 = $.div(b, c);
    npy = $.add($.mul(t3, t2 ? 1 : -1), $.div(fb, fc));
    tm = $.sqrt($.add($.mul(npx, npx), $.mul(npy, npy)));
    t1 = $.div(npx, tm);
    t2 = this.move_speed;
    mvx = $.mul(t1, t2);
    mvy = $.mul($.div(npy, tm), t2);
    if ($.eqB($.mod(this.t, 60), 0) && this.rng.nextBool$0() === true)
      this.rotation_direction = this.rotation_direction * -1;
    if ($.eqB($.mod(this.t, 120), 0) && this.rng.nextBool$0() === true)
      this.switchMode$1($.add(this.rng.nextInt$1(2), 1));
    if (c < 50 && this.grendel.get$attacking() === true) {
      this.scene.cleanUp$0();
      $.nextLevel("ending");
    }
    t1 = this.evil;
    t1.set$x($.add(t1.get$x(), mvx));
    t1 = this.evil;
    t1.set$y($.add(t1.get$y(), mvy));
  } else if ($.eqB(this.evil_mode, 1)) {
    a = $.sub(this.evil.get$x(), this.grendel.get$x());
    b = $.sub(this.evil.get$y(), this.grendel.get$y());
    c = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
    $.CONSTANT0.forEach$1(this.notes, new $.LevelBeowulf2_controlEvil_anon(this));
    if (c < 100) {
      this.hitGrendel$1($.Vector2$($.div($.neg(a), c), $.div($.neg(b), c)));
      this.switchMode$1(0);
    }
    t1 = this.evil;
    t2 = t1.get$x();
    t3 = $.div(a, c);
    t4 = this.move_speed;
    t1.set$x($.sub(t2, $.mul(t3, t4)));
    t1 = this.evil;
    t1.set$y($.sub(t1.get$y(), $.mul($.div(b, c), t4)));
  } else if ($.eqB(this.evil_mode, 2))
    this.switchMode$1(1);
},
 hitGrendel$1: function(direction) {
  var t1 = $.mul(direction.x, 100);
  this.grendel.get$v().set$x(t1);
  t1 = $.mul(direction.y, 100);
  this.grendel.get$v().set$y(t1);
  $.grendel_hurt(this.scene, 10);
},
 switchMode$1: function(mode) {
  var t1, i, t2;
  this.evil_mode = mode;
  switch (mode) {
    case 0:
      t1 = this.notes;
      if (t1.length > 0) {
        $.CONSTANT0.forEach$1(t1, new $.LevelBeowulf2_switchMode_anon());
        this.notes = [];
      }
      break;
    case 1:
      t1 = this.notes;
      if (t1.length > 0) {
        $.CONSTANT0.forEach$1(t1, new $.LevelBeowulf2_switchMode_anon0());
        this.notes = [];
      }
      for (i = 0; t1 = i < 3, t2 = this.notes, t1; ++i) {
        t1 = i * 3.141592653589793 * 2 / 3;
        t2.push($.Character$(1, null, 50, null, "note", 50, $.cos(t1) * 100, $.sin(t1) * 100));
        t1 = $.Vector2$(t1, 0);
        t2 = this.notes;
        if (i >= t2.length)
          throw $.ioore(i);
        t2[i].set$v(t1);
        t1 = this.notes;
        if (i >= t1.length)
          throw $.ioore(i);
        t1[i].set$alpha(0);
      }
      t1 = this.scene.get$actors();
      $.getInterceptor$JSArray(t1).addAll$1(t1, t2);
      break;
  }
},
 LevelBeowulf2$0: function(box_0) {
  var t1, t2, i, ang, rad, c;
  this.scene = $.Scene$();
  box_0.tt_0 = 0;
  t1 = this.scene.get$postrender();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon56(box_0));
  this.grendel = $.Grendel$(0, 200);
  this.evil = $.Character$(1, null, 100, null, "grendel", 70, 0, 0);
  this.evil.set$visible(false);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.grendel);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, this.evil);
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).add$1(t1, $.Character$(1, null, 1500, null, "darkzone", 1500, 0, 0));
  $.showHealthBar(this.scene, false);
  t1 = this.ARENA_SIZE;
  this.inbounds = [$.CircleBound$(0, 0, t1)];
  t2 = $.window().setInterval$2(this.get$update(), 16);
  this.interval = t2;
  this.scene.set$interval(t2);
  for (t1 *= 2, i = 0; i < 30; ++i) {
    ang = this.rrng$1(3.141592653589793);
    t2 = this.rrng$1(100);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    rad = t1 + t2 + 100;
    c = $.Character$(1, null, 50, null, "note", 50, $.cos(ang) * rad, $.sin(ang) * rad);
    this.notes.push(c);
    c.v = $.Vector2$(ang, rad);
  }
  t1 = this.scene.get$actors();
  $.getInterceptor$JSArray(t1).addAll$1(t1, this.notes);
}
};

$$.LevelEnding = {"":"Object;rng>,scene>,grendel=,camera_follow>,follow_velocity>,bg,bg2,interval<,phase=,t=,inbounds>,not_inbounds>,outbounds>,trees,animals",
 updateAnimals$0: function() {
  var t1 = this.animals;
  $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelEnding_updateAnimals_anon(this));
},
 updateUncontrolledMovement$0: function() {
  var t1, t2;
  t1 = this.grendel;
  t2 = t1.get$v();
  t2.set$x($.sub(t2.get$x(), $.div($.add(t1.get$x(), $.sin($.mul($.mul($.div(this.t, 240), 3.141592653589793), 2)) * 300), 500)));
  t2 = this.grendel.get$v();
  t2.set$y($.add(t2.get$y(), $.CONSTANT7.abs$0($.sin($.div(this.t, 120)))));
},
 phase2$0: function() {
  var t1, i, t2, t3, t4, t5, a;
  this.updateUncontrolledMovement$0();
  t1 = this.bg;
  t1.alpha = $.sub(t1.alpha, 0.02);
  if ($.leB(this.bg.alpha, 0)) {
    this.bg.remove$0();
    this.phase = $.add(this.phase, 1);
    this.trees = $.List_List(null);
    for (t1 = this.rng, i = 0; t2 = i < 30, t3 = this.trees, t2; ++i) {
      t2 = $.getInterceptor$JSArray(t3);
      t4 = $.sub($.mul($.mul(t1.nextDouble$0(), 1500), 2), 1500);
      t5 = $.sub($.mul($.mul(t1.nextDouble$0(), 1000), 2), 1000);
      if (typeof t5 !== 'number')
        throw $.iae(t5);
      t2.add$1(t3, $.Character$(0, null, 266, null, "tree", 200, t4, 2400 + t5));
    }
    t2 = this.scene.actors;
    $.getInterceptor$JSArray(t2).addAll$1(t2, t3);
    this.animals = $.List_List(null);
    for (i = 0; i < 20; ++i) {
      t2 = $.sub($.mul($.mul(t1.nextDouble$0(), 3000), 2), 3000);
      t3 = $.sub($.mul($.mul(t1.nextDouble$0(), 1000), 2), 1000);
      if (typeof t3 !== 'number')
        throw $.iae(t3);
      a = $.Character$(0, null, 30, null, "animal", 30, t2, 3000 + t3);
      a.v = $.Vector2$(t1.nextInt$1(64), 0);
      t2 = this.animals;
      $.getInterceptor$JSArray(t2).add$1(t2, a);
    }
    t1 = this.scene.actors;
    $.getInterceptor$JSArray(t1).addAll$1(t1, this.animals);
  }
},
 phase3$0: function() {
  var t1, t2;
  t1 = {};
  this.updateUncontrolledMovement$0();
  t2 = this.trees;
  $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelEnding_phase3_anon());
  t2 = this.animals;
  $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelEnding_phase3_anon0());
  this.updateAnimals$0();
  t2 = this.trees;
  if ($.geB($.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, 0).get$alpha(), 1)) {
    this.phase = $.add(this.phase, 1);
    t1.t_0 = 0;
    t2 = this.scene.postrender;
    $.getInterceptor$JSArray(t2).add$1(t2, new $.LevelEnding_phase3_anon1(t1));
  }
},
 phase4$0: function() {
  var t1, t2, t3, t4;
  t1 = {};
  this.updateUncontrolledMovement$0();
  this.updateAnimals$0();
  if ($.gtB(this.grendel.get$y(), 3300)) {
    t2 = this.scene.actors;
    t3 = $.getInterceptor$JSArray(t2);
    t4 = $.Character$(1, null, 400, null, "cliff", 2000, 0, 4000);
    this.bg = t4;
    t3.add$1(t2, t4);
    t1.t_0 = 0;
    t4 = this.scene.postrender;
    $.getInterceptor$JSArray(t4).add$1(t4, new $.LevelEnding_phase4_anon(t1, this));
    this.phase = $.add(this.phase, 1);
  }
},
 LevelEnding$0: function() {
  var t1, t2;
  this.scene = $.Scene$();
  this.scene.stain = 0.25;
  t1 = $.Character$(1, null, 2100, null, "meadhall", 1200, 0, -50);
  this.bg = t1;
  t1 = [t1];
  this.scene.actors = t1;
  this.grendel = $.Grendel$(0, 435);
  t1 = this.scene.actors;
  $.getInterceptor$JSArray(t1).add$1(t1, this.grendel);
  this.inbounds = [$.RectBound$(0, 2200, 750, 3800)];
  this.outbounds = [];
  this.not_inbounds = [];
  t1 = this.grendel;
  this.camera_follow = $.Vector2$(t1.get$x(), t1.get$y());
  this.follow_velocity = $.Vector2$(0, 0);
  t2 = this.scene.postrender;
  $.getInterceptor$JSArray(t2).add$1(t2, new $.anon51());
  t2 = $.window().setInterval$2(new $.anon52(this), 16);
  this.interval = t2;
  this.scene.interval = t2;
}
};

$$.DeathMenu = {"":"Object;scene>",
 DeathMenu$0: function(box_0) {
  var t1;
  this.scene = $.Scene$();
  box_0.t_0 = 0;
  t1 = this.scene.postrender;
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon53());
  t1 = this.scene.postrender;
  $.getInterceptor$JSArray(t1).add$1(t1, new $.anon54(box_0));
  t1 = $.window().setInterval$2(new $.anon55(box_0, this), 16);
  this.scene.interval = t1;
}
};

$$.Audio = {"":"Object;sounds>",
 play$1: function(sound) {
  var t1 = this.sounds;
  $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, sound).play$0();
},
 Audio$0: function() {
  var names = ["hit", "hurt", "attack"];
  this.sounds = $.makeLiteralMap([]);
  $.CONSTANT0.forEach$1(names, new $.anon49(this));
}
};

$$.BodyElementEvents = {"":"ElementEvents;_ptr",
 get$load: function() {
  return this.operator$index$1("load");
}
};

$$.DocumentEvents = {"":"ElementEvents;_ptr"
};

$$.ElementEvents = {"":"Events;_ptr",
 get$keyDown: function() {
  return this.operator$index$1("keydown");
},
 get$keyUp: function() {
  return this.operator$index$1("keyup");
},
 get$load: function() {
  return this.operator$index$1("load");
},
 get$mouseDown: function() {
  return this.operator$index$1("mousedown");
},
 get$mouseMove: function() {
  return this.operator$index$1("mousemove");
},
 get$mouseUp: function() {
  return this.operator$index$1("mouseup");
}
};

$$.Events = {"":"Object;_ptr",
 operator$index$1: function(type) {
  return $.EventListenerList$(this._ptr, type);
}
};

$$.EventListenerList = {"":"Object;_ptr,_type",
 add$2: function(listener, useCapture) {
  this._ptr.$$dom_addEventListener$3(this._type, listener, useCapture);
  return this;
},
 add$1: function(listener) {
  return this.add$2(listener, false);
}
};

$$.FrameSetElementEvents = {"":"ElementEvents;_ptr",
 get$load: function() {
  return this.operator$index$1("load");
}
};

$$.InputElementEvents = {"":"ElementEvents;_ptr"
};

$$.MediaElementEvents = {"":"ElementEvents;_ptr",
 get$play: function() {
  return this.operator$index$1("play");
},
 play$0: function() {
  return this.get$play().call$0();
},
 play$1: function(arg0) {
  return this.get$play().call$1(arg0);
}
};

$$._ChildNodeListLazy = {"":"Object;_this",
 get$last: function() {
  return this._this.lastChild;
},
 add$1: function(value) {
  this._this.$$dom_appendChild$1(value);
},
 addLast$1: function(value) {
  this._this.$$dom_appendChild$1(value);
},
 addAll$1: function(collection) {
  var t1, t2;
  for (t1 = $.getInterceptor$JSArray(collection).iterator$0(collection), t2 = this._this; t1.get$hasNext() === true;)
    t2.$$dom_appendChild$1(t1.next$0());
},
 removeLast$0: function() {
  var result = this.get$last();
  if (!(result == null))
    this._this.$$dom_removeChild$1(result);
  return result;
},
 removeAt$1: function(index) {
  var result = this.operator$index$1(index);
  if (!(result == null))
    this._this.$$dom_removeChild$1(result);
  return result;
},
 clear$0: function() {
  this._this.textContent = "";
},
 operator$indexSet$2: function(index, value) {
  this._this.$$dom_replaceChild$2(value, this.operator$index$1(index));
},
 iterator$0: function() {
  var t1 = this._this.childNodes;
  return $.getInterceptor$JSArray(t1).iterator$0(t1);
},
 forEach$1: function(f) {
  return $.Collections_forEach(this, f);
},
 map$1: function(f) {
  return $.Collections_map(this, [], f);
},
 filter$1: function(f) {
  return $.Collections_filter(this, [], f);
},
 some$1: function(f) {
  return $.Collections_some(this, f);
},
 get$isEmpty: function() {
  return $.eq($.getInterceptor$JSStringJSArray(this).get$length(this), 0);
},
 indexOf$2: function(element, start) {
  return $.Lists_indexOf(this, element, start, $.getInterceptor$JSStringJSArray(this).get$length(this));
},
 indexOf$1: function(element) {
  return this.indexOf$2(element, 0);
},
 removeRange$2: function(start, rangeLength) {
  throw $.$$throw($.UnsupportedError$("Cannot removeRange on immutable List."));
},
 getRange$2: function(start, rangeLength) {
  return $.Lists_getRange(this, start, rangeLength, []);
},
 get$length: function() {
  var t1 = this._this.childNodes;
  return $.getInterceptor$JSStringJSArray(t1).get$length(t1);
},
 set$length: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot set length on immutable List."));
},
 operator$index$1: function(index) {
  var t1 = this._this.childNodes;
  if (typeof t1 !== 'string' && (typeof t1 !== 'object' || t1 === null || t1.constructor !== Array && !t1.is$JavaScriptIndexingBehavior()))
    return this.operator$index$1$bailout1(1, index, t1);
  if (index !== (index | 0))
    throw $.iae(index);
  if (index < 0 || index >= t1.length)
    throw $.ioore(index);
  return t1[index];
},
 operator$index$1$bailout1: function(state0, index, t1) {
  return $.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, index);
},
 is$List: function() { return true; },
 is$Collection: function() { return true; }
};

$$.WindowEvents = {"":"Events;_ptr",
 get$keyDown: function() {
  return this.operator$index$1("keydown");
},
 get$keyUp: function() {
  return this.operator$index$1("keyup");
},
 get$load: function() {
  return this.operator$index$1("load");
},
 get$mouseDown: function() {
  return this.operator$index$1("mousedown");
},
 get$mouseMove: function() {
  return this.operator$index$1("mousemove");
},
 get$mouseUp: function() {
  return this.operator$index$1("mouseup");
},
 get$play: function() {
  return this.operator$index$1("play");
},
 play$0: function() {
  return this.get$play().call$0();
},
 play$1: function(arg0) {
  return this.get$play().call$1(arg0);
}
};

$$._DOMWindowCrossFrame = {"":"Object;_window"
};

$$.FixedSizeListIterator = {"":"_VariableSizeListIterator;_liblib$_length,_array,_pos",
 get$hasNext: function() {
  return $.gt(this._liblib$_length, this._pos);
}
};

$$._VariableSizeListIterator = {"":"Object;",
 get$hasNext: function() {
  var t1 = this._array;
  return $.gt($.getInterceptor$JSStringJSArray(t1).get$length(t1), this._pos);
},
 next$0: function() {
  var t1, t3, t4;
  if (this.get$hasNext() !== true)
    throw $.$$throw($.StateError$("No more elements"));
  t1 = this._array;
  if (typeof t1 !== 'string' && (typeof t1 !== 'object' || t1 === null || t1.constructor !== Array && !t1.is$JavaScriptIndexingBehavior()))
    return this.next$0$bailout(1, t1);
  t3 = $.getInterceptor$JSStringJSArray(t1);
  t4 = this._pos;
  if (typeof t4 !== 'number')
    return this.next$0$bailout(2, t4, t3, t1);
  this._pos = t4 + 1;
  if (t4 !== (t4 | 0))
    throw $.iae(t4);
  if (t4 < 0 || t4 >= t1.length)
    throw $.ioore(t4);
  return t1[t4];
},
 next$0$bailout: function(state0, env0, env1, env2) {
  switch (state0) {
    case 1:
      t1 = env0;
      break;
    case 2:
      t1 = env2;
      t3 = env1;
      t4 = env0;
      break;
  }
  switch (state0) {
    case 0:
      if (this.get$hasNext() !== true)
        throw $.$$throw($.StateError$("No more elements"));
      t1 = this._array;
    case 1:
      state0 = 0;
      t3 = $.getInterceptor$JSStringJSArray(t1);
      t4 = this._pos;
    case 2:
      var t1, t3, t4;
      state0 = 0;
      this._pos = $.add(t4, 1);
      return t3.operator$index$1(t1, t4);
  }
}
};

$$._Random = {"":"Object;",
 nextInt$1: function(max) {
  if (typeof max !== 'number')
    return this.nextInt$1$bailout(1, max);
  if (max < 0)
    throw $.$$throw($.ArgumentError$("negative max: " + $.S(max)));
  if (max > 4294967295)
    max = 4294967295;
  return (Math.random() * max) >>> 0;
},
 nextInt$1$bailout: function(state0, max) {
  if ($.ltB(max, 0))
    throw $.$$throw($.ArgumentError$("negative max: " + $.S(max)));
  if ($.gtB(max, 4294967295))
    max = 4294967295;
  return (Math.random() * max) >>> 0;
},
 nextDouble$0: function() {
  return Math.random();
},
 nextBool$0: function() {
  return Math.random() < 0.5;
}
};

$$.main_anon = {"":"Closure;",
 call$0: function() {
  $.MenuScreen$();
}
};

$$.complete = {"":"Closure;box_0,this_1,totalAnimations_2",
 call$0: function() {
  var t1 = this.box_0;
  t1.completedAnimations_0 = $.add(t1.completedAnimations_0, 1);
  if ($.eqB(this.totalAnimations_2, t1.completedAnimations_0) && !(this.this_1.get$onComplete() == null))
    this.this_1.onComplete$0();
}
};

$$.loadImg = {"":"Closure;complete_3",
 call$2: function(src, callback) {
  var img, t1;
  img = $.ImageElement_ImageElement(null, null, null);
  t1 = img.get$on().get$load();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.loadImg_anon(this.complete_3, callback, img));
  img.set$src(src);
}
};

$$.loadImg_anon = {"":"Closure;complete_4,callback_5,img_6",
 call$1: function(e) {
  this.callback_5.call$1(this.img_6);
  this.complete_4.call$0();
}
};

$$.anon = {"":"Closure;this_7",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, 0);
  this.this_7.set$test(t1);
  return t1;
}
};

$$.anon0 = {"":"Closure;this_8",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, null);
  this.this_8.set$tree(t1);
  return t1;
}
};

$$.anon1 = {"":"Closure;this_9",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, null);
  this.this_9.set$bush(t1);
  return t1;
}
};

$$.anon2 = {"":"Closure;this_10",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, null);
  this.this_10.set$note1(t1);
  return t1;
}
};

$$.anon3 = {"":"Closure;this_11",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, null);
  this.this_11.set$note2(t1);
  return t1;
}
};

$$.anon4 = {"":"Closure;this_12",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 2, 2);
  this.this_12.set$grendel(t1);
  return t1;
}
};

$$.anon5 = {"":"Closure;this_13",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, 5);
  this.this_13.set$warrior(t1);
  return t1;
}
};

$$.anon6 = {"":"Closure;this_14",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, 5);
  this.this_14.set$red_warrior(t1);
  return t1;
}
};

$$.anon7 = {"":"Closure;this_15",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, 4);
  this.this_15.set$red_warrior_attack(t1);
  return t1;
}
};

$$.anon8 = {"":"Closure;this_16",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, 4);
  this.this_16.set$warrior_attack(t1);
  return t1;
}
};

$$.anon9 = {"":"Closure;this_17",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_17.set$dragon_part(t1);
  return t1;
}
};

$$.anon10 = {"":"Closure;this_18",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 2, 1);
  this.this_18.set$dragon_head(t1);
  return t1;
}
};

$$.anon11 = {"":"Closure;this_19",
 call$1: function(img) {
  var t1 = $.Animation$(img, 67, 100, null);
  this.this_19.set$gold(t1);
  return t1;
}
};

$$.anon12 = {"":"Closure;this_20",
 call$1: function(img) {
  var t1 = $.Animation$(img, 100, 100, null);
  this.this_20.set$fireball(t1);
  return t1;
}
};

$$.anon13 = {"":"Closure;this_21",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 4, 2, 3);
  this.this_21.set$statue(t1);
  return t1;
}
};

$$.anon14 = {"":"Closure;this_22",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_22.set$stone1(t1);
  return t1;
}
};

$$.anon15 = {"":"Closure;this_23",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_23.set$stone2(t1);
  return t1;
}
};

$$.anon16 = {"":"Closure;this_24",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, 4);
  this.this_24.set$bull(t1);
  return t1;
}
};

$$.anon17 = {"":"Closure;this_25",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_25.set$gear(t1);
  return t1;
}
};

$$.anon18 = {"":"Closure;this_26",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_26.set$gear_particle(t1);
  return t1;
}
};

$$.anon19 = {"":"Closure;this_27",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_27.set$blood1(t1);
  return t1;
}
};

$$.anon20 = {"":"Closure;this_28",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_28.set$blood2(t1);
  return t1;
}
};

$$.anon21 = {"":"Closure;this_29",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_29.set$blood3(t1);
  return t1;
}
};

$$.anon22 = {"":"Closure;this_30",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 2, 1, null);
  this.this_30.set$cake(t1);
  return t1;
}
};

$$.anon23 = {"":"Closure;this_31",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 2, 1, null);
  this.this_31.set$happybirthday(t1);
  return t1;
}
};

$$.anon24 = {"":"Closure;this_32",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 3, 1, null);
  this.this_32.set$person(t1);
  return t1;
}
};

$$.anon25 = {"":"Closure;this_33",
 call$1: function(img) {
  var t1 = $.Animation$Seg(img, 2, 1, 6);
  this.this_33.set$rabbit(t1);
  return t1;
}
};

$$.anon26 = {"":"Closure;this_34",
 call$1: function(img) {
  this.this_34.set$img_fog(img);
  return img;
}
};

$$.anon27 = {"":"Closure;this_35",
 call$1: function(img) {
  this.this_35.set$img_title(img);
  return img;
}
};

$$.anon28 = {"":"Closure;this_36",
 call$1: function(img) {
  this.this_36.set$img_select(img);
  return img;
}
};

$$.anon29 = {"":"Closure;this_37",
 call$1: function(img) {
  this.this_37.set$img_credits(img);
  return img;
}
};

$$.anon30 = {"":"Closure;this_38",
 call$1: function(img) {
  this.this_38.set$img_play(img);
  return img;
}
};

$$.anon31 = {"":"Closure;this_39",
 call$1: function(img) {
  this.this_39.set$health(img);
  return img;
}
};

$$.anon32 = {"":"Closure;this_40",
 call$1: function(img) {
  this.this_40.set$healthbar(img);
  return img;
}
};

$$.anon33 = {"":"Closure;this_41",
 call$1: function(img) {
  this.this_41.set$dragon_lair(img);
  return img;
}
};

$$.anon34 = {"":"Closure;this_42",
 call$1: function(img) {
  this.this_42.set$ork_temple(img);
  return img;
}
};

$$.anon35 = {"":"Closure;this_43",
 call$1: function(img) {
  this.this_43.set$meadhall(img);
  return img;
}
};

$$.anon36 = {"":"Closure;this_44",
 call$1: function(img) {
  this.this_44.set$meadhall_door(img);
  return img;
}
};

$$.anon37 = {"":"Closure;this_45",
 call$1: function(img) {
  this.this_45.set$cliff(img);
  return img;
}
};

$$.anon38 = {"":"Closure;this_46",
 call$1: function(img) {
  this.this_46.set$dark_zone(img);
  return img;
}
};

$$.anon39 = {"":"Closure;this_47",
 call$1: function(img) {
  this.this_47.set$zodiac_taurus(img);
  return img;
}
};

$$.anon40 = {"":"Closure;this_48",
 call$1: function(img) {
  this.this_48.set$zodiac_leo(img);
  return img;
}
};

$$.anon41 = {"":"Closure;this_49",
 call$1: function(img) {
  this.this_49.set$zodiac_cancer(img);
  return img;
}
};

$$.anon42 = {"":"Closure;this_50",
 call$1: function(img) {
  this.this_50.set$zodiac_capricorn(img);
  return img;
}
};

$$.anon43 = {"":"Closure;this_51",
 call$1: function(img) {
  this.this_51.set$zodiac_pisces(img);
  return img;
}
};

$$.Maps__emitMap_anon = {"":"Closure;box_0,result_1,visiting_2",
 call$2: function(k, v) {
  var t1, t2;
  t1 = this.box_0;
  if (t1.first_0 !== true) {
    t2 = this.result_1;
    $.getInterceptor$JSArray(t2).add$1(t2, ", ");
  }
  t1.first_0 = false;
  t1 = this.result_1;
  t2 = this.visiting_2;
  $.Collections__emitObject(k, t1, t2);
  $.getInterceptor$JSArray(t1).add$1(t1, ": ");
  $.Collections__emitObject(v, t1, t2);
}
};

$$.invokeClosure_anon = {"":"Closure;closure_0",
 call$0: function() {
  return this.closure_0.call$0();
}
};

$$.invokeClosure_anon0 = {"":"Closure;closure_1,arg1_2",
 call$0: function() {
  return this.closure_1.call$1(this.arg1_2);
}
};

$$.invokeClosure_anon1 = {"":"Closure;closure_3,arg1_4,arg2_5",
 call$0: function() {
  return this.closure_3.call$2(this.arg1_4, this.arg2_5);
}
};

$$.anon44 = {"":"Closure;this_0",
 call$1: function(e) {
  var t1, t2, t3, t4, t5, t6, t7, t8, t9, t10, t11, t12, t13, i;
  t1 = e.get$keyCode();
  t2 = this.this_0;
  $.indexSet(t2.get$keyList(), t1, 1);
  t1 = t2.get$keyList();
  t3 = $.getInterceptor$JSStringJSArray(t1);
  t4 = t2.get$keyMap();
  if ($.eqB(t3.operator$index$1(t1, $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, "j")), 1)) {
    t1 = t2.get$keyList();
    t3 = $.getInterceptor$JSStringJSArray(t1);
    t4 = t2.get$keyMap();
    t1 = t3.operator$index$1(t1, $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, "d"));
    t3 = t2.get$keyList();
    t5 = $.getInterceptor$JSStringJSArray(t3);
    t6 = t2.get$keyMap();
    t1 = $.add(t1, t5.operator$index$1(t3, $.getInterceptor$JSStringJSArray(t6).operator$index$1(t6, "a")));
    t7 = t2.get$keyList();
    t8 = $.getInterceptor$JSStringJSArray(t7);
    t9 = t2.get$keyMap();
    t1 = $.add(t1, t8.operator$index$1(t7, $.getInterceptor$JSStringJSArray(t9).operator$index$1(t9, "s")));
    t10 = t2.get$keyList();
    t11 = $.getInterceptor$JSStringJSArray(t10);
    t12 = t2.get$keyMap();
    t13 = $.gtB($.add(t1, t11.operator$index$1(t10, $.getInterceptor$JSStringJSArray(t12).operator$index$1(t12, "w"))), 0);
    t1 = t13;
  } else
    t1 = false;
  if (t1) {
    t1 = t2.get$keyList();
    t3 = $.getInterceptor$JSStringJSArray(t1);
    t4 = t2.get$keyMap();
    t1 = t3.operator$index$1(t1, $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, "d"));
    t3 = t2.get$keyList();
    t5 = $.getInterceptor$JSStringJSArray(t3);
    t6 = t2.get$keyMap();
    t7 = $.add($.mul($.sub(t1, t5.operator$index$1(t3, $.getInterceptor$JSStringJSArray(t6).operator$index$1(t6, "a"))), 500), $.div($.window().get$innerWidth(), 2));
    t8 = t2.get$keyList();
    t9 = $.getInterceptor$JSStringJSArray(t8);
    t10 = t2.get$keyMap();
    t8 = t9.operator$index$1(t8, $.getInterceptor$JSStringJSArray(t10).operator$index$1(t10, "s"));
    t9 = t2.get$keyList();
    t11 = $.getInterceptor$JSStringJSArray(t9);
    t12 = t2.get$keyMap();
    t2.mouseDownAt$2(t7, $.add($.mul($.sub(t8, t11.operator$index$1(t9, $.getInterceptor$JSStringJSArray(t12).operator$index$1(t12, "w"))), 500), $.div($.window().get$innerHeight(), 2)));
  }
  t1 = t2.get$onKeyPress();
  i = $.sub($.getInterceptor$JSStringJSArray(t1).get$length(t1), 1);
  if (typeof i !== 'number')
    return this.call$1$bailout(1, e, i, t2);
  for (; i >= 0; --i) {
    t1 = t2.get$onKeyPress();
    if ($.eqB($.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, i).call$1(e), true))
      return;
  }
},
 call$1$bailout: function(state0, e, i, t2) {
  var t1;
  for (; $.geB(i, 0); i = $.sub(i, 1)) {
    t1 = t2.get$onKeyPress();
    if ($.eqB($.getInterceptor$JSStringJSArray(t1).operator$index$1(t1, i).call$1(e), true))
      return;
  }
}
};

$$.anon45 = {"":"Closure;this_1",
 call$1: function(e) {
  var t1, t2, t3, t4;
  t1 = e.get$keyCode();
  t2 = this.this_1;
  $.indexSet(t2.get$keyList(), t1, 0);
  t1 = t2.get$keyList();
  t3 = $.getInterceptor$JSStringJSArray(t1);
  t4 = t2.get$keyMap();
  if ($.eqB(t3.operator$index$1(t1, $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, "j")), 0))
    t2.set$mouseDown(false);
}
};

$$.anon46 = {"":"Closure;this_2",
 call$1: function(e) {
  this.this_2.mouseDownAt$2(e.get$pageX(), e.get$pageY());
}
};

$$.anon47 = {"":"Closure;this_3",
 call$1: function(e) {
  var t1, t2, t3;
  t1 = e.get$pageX();
  t2 = e.get$pageY();
  t3 = this.this_3;
  t3.set$mouseDown(false);
  t3.get$mouse().set$x(t1);
  t3.get$mouse().set$y(t2);
}
};

$$.anon48 = {"":"Closure;this_4",
 call$1: function(e) {
  var t1, t2, t3;
  t1 = e.get$pageX();
  t2 = e.get$pageY();
  t3 = this.this_4;
  t3.get$mouse().set$x(t1);
  t3.get$mouse().set$y(t2);
}
};

$$.ConstantMap_forEach_anon = {"":"Closure;this_0,f_1",
 call$1: function(key) {
  var t1, t2;
  t1 = this.f_1;
  t2 = this.this_0;
  return t1.call$2(key, $.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, key));
}
};

$$.anon49 = {"":"Closure;this_0",
 call$1: function(name$) {
  $.indexSet(this.this_0.get$sounds(), name$, $.document().query$1("#" + $.S(name$)));
}
};

$$._LinkedHashMapImpl_forEach_anon = {"":"Closure;f_0",
 call$1: function(entry) {
  this.f_0.call$2(entry.get$key(), entry.get$value());
}
};

$$.DoubleLinkedQueue_length_anon = {"":"Closure;box_0",
 call$1: function(element) {
  var t1 = this.box_0;
  t1.counter_0 = $.add(t1.counter_0, 1);
}
};

$$.NoSuchMethodError_toString_anon = {"":"Closure;box_0",
 call$2: function(key, value) {
  var t1, t2;
  t1 = this.box_0;
  if ($.gtB(t1.i_1, 0)) {
    t2 = t1.sb_0;
    $.getInterceptor$JSArray(t2).add$1(t2, ", ");
  }
  t2 = t1.sb_0;
  $.getInterceptor$JSArray(t2).add$1(t2, key);
  t2 = t1.sb_0;
  $.getInterceptor$JSArray(t2).add$1(t2, ": ");
  t2 = t1.sb_0;
  $.getInterceptor$JSArray(t2).add$1(t2, $.Error_safeToString(value));
  t1.i_1 = $.add(t1.i_1, 1);
}
};

$$.anon50 = {"":"Closure;this_0",
 call$0: function() {
  var t1, t2;
  t1 = this.this_0;
  t2 = t1.get$scene().get$camera();
  t2.set$y($.sub(t2.get$y(), t1.get$UPWARD_SPEED()));
  t1.controlTrees$0();
  if (t1.get$intro_started() !== true)
    t1.controlMenu$0();
  else
    t1.controlIntro$0();
  t1.get$scene().update$0();
  t1.get$scene().render$0();
  t1.set$t($.add(t1.get$t(), 1));
}
};

$$.Character_ImageRender_anon = {"":"Closure;this_0,image_1",
 call$1: function(context) {
  var t1 = this.this_0;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  context.drawImage$5(this.image_1, $.div($.neg(t1.get$width()), 2), $.div($.neg(t1.get$height()), 2), t1.get$width(), t1.get$height());
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_BasicFlipAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2,speed_3",
 call$1: function(context) {
  var t1, t2, t3, t4, last;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = this.box_0;
  t4 = $.sub(t3.lx_1, t1.get$x());
  if ($.gtB($.getInterceptor$JSNumber(t4).abs$0(t4), 0.1)) {
    last = !$.ltB($.sub(t3.lx_1, t1.get$x()), 0) || false;
    t3.last_2 = last;
    t4 = last;
  } else
    t4 = t3.last_2;
  t2.complexRender$7(context, t4, false, 0, t3.t_0, t1.get$width(), t1.get$height());
  t3.lx_1 = t1.get$x();
  t3.t_0 = $.add(t3.t_0, this.speed_3);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_LRAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2",
 call$1: function(context) {
  var t1, t2, t3, t4;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = t1.get$x();
  t4 = this.box_0;
  t3 = $.sub(t3, t4.lx_1);
  if ($.gtB($.getInterceptor$JSNumber(t3).abs$0(t3), 1))
    t3 = $.gtB($.sub(t1.get$x(), t4.lx_1), 0) ? 1 : -1;
  else
    t3 = 0;
  t2.render$5(context, t3, t4.t_0, t1.get$width(), t1.get$height());
  t4.lx_1 = t1.get$x();
  t4.t_0 = $.add(t4.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_PositionalAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2",
 call$1: function(context) {
  var t1, t2, t3, t4, t5;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = !$.gtB($.neg(t1.get$x()), 0) || false;
  t4 = $.gtB($.neg(t1.get$y()), 0) ? 0 : 1;
  t5 = this.box_0;
  t2.complexRender$7(context, t3, false, t4, t5.t_0, t1.get$width(), t1.get$height());
  t5.t_0 = $.add(t5.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_Cube2FrameAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2",
 call$1: function(context) {
  var t1, t2, t3, t4, t5;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = t1.get$x();
  t4 = this.box_0;
  t3 = !$.gtB($.sub(t3, t4.lx_1), 0) || false;
  t5 = $.gtB($.sub(t1.get$y(), t4.ly_2), 0) ? 0 : 1;
  t2.complexRender$7(context, t3, false, t5, t4.t_0, t1.get$width(), t1.get$height());
  t4.lx_1 = t1.get$x();
  t4.ly_2 = t1.get$y();
  t4.t_0 = $.add(t4.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_VerticalAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2",
 call$1: function(context) {
  var t1, t2, t3, t4;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = t1.get$x();
  t4 = this.box_0;
  if ($.gtB($.sub(t3, t4.lx_1), 0))
    t3 = !$.gtB($.sub(t1.get$y(), t4.ly_2), 0) || false;
  else
    t3 = $.gtB($.sub(t1.get$y(), t4.ly_2), 0) && true;
  t2.flipRenderX$5(context, t3, t4.t_0, t1.get$width(), t1.get$height());
  t4.lx_1 = t1.get$x();
  t4.ly_2 = t1.get$y();
  t4.t_0 = $.add(t4.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_BasicRotationAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2,rot_rate_3",
 call$1: function(context) {
  var t1, t2, rotation;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.box_0;
  rotation = $.add(t2.rotation_1, this.rot_rate_3);
  t2.rotation_1 = rotation;
  context.rotate$1(rotation);
  this.animation_2.basicRender$4(context, t2.t_0, t1.get$width(), t1.get$height());
  t2.t_0 = $.add(t2.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_AnimationRender_anon = {"":"Closure;box_0,this_1,animation_2",
 call$1: function(context) {
  var t1, t2, t3, t4;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = t1.get$x();
  t4 = this.box_0;
  t2.render$5(context, $.Animation_frameDirection($.sub(t3, t4.lx_1), $.sub(t1.get$y(), t4.ly_2)), t4.t_0, t1.get$width(), t1.get$height());
  t4.lx_1 = t1.get$x();
  t4.ly_2 = t1.get$y();
  t4.t_0 = $.add(t4.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_BasicAnimationRender_anon = {"":"Closure;box_0,this_1,animation_2",
 call$1: function(context) {
  var t1, t2, t3;
  t1 = this.this_1;
  if (t1.get$visible() !== true || $.leB(t1.get$alpha(), 0))
    return;
  context.set$globalAlpha(t1.get$alpha());
  t2 = this.animation_2;
  t3 = this.box_0;
  t2.basicRender$4(context, t3.t_0, t1.get$width(), t1.get$height());
  t3.t_0 = $.add(t3.t_0, 1);
  context.set$fillStyle("#000");
  if (!(t1.get$name() == null))
    t1.renderName$1(context);
}
};

$$.Character_timeProject_anon = {"":"Closure;box_0,this_1,render_2",
 call$1: function(c) {
  var t1, oa, t2, t3, i, t4, t5, t6;
  t1 = this.this_1;
  oa = t1.get$alpha();
  for (t2 = this.box_0, t3 = this.render_2, i = 0; i < 3; ++i) {
    c.save$0();
    t4 = t2.xs_0;
    t5 = $.sub($.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, i), t1.get$x());
    t6 = t2.ys_1;
    c.translate$2(t5, $.sub($.getInterceptor$JSStringJSArray(t6).operator$index$1(t6, i), t1.get$y()));
    t1.set$alpha(0.25 + i / 4);
    t3.call$1(c);
    c.restore$0();
  }
  t1.set$alpha(oa);
  t3.call$1(c);
  t3 = t2.xs_0;
  $.getInterceptor$JSArray(t3).add$1(t3, t1.get$x());
  t3 = t2.ys_1;
  $.getInterceptor$JSArray(t3).add$1(t3, t1.get$y());
  t3 = t2.xs_0;
  t2.xs_0 = $.getInterceptor$JSArray(t3).getRange$2(t3, 1, 3);
  t4 = t2.ys_1;
  t2.ys_1 = $.getInterceptor$JSArray(t4).getRange$2(t4, 1, 3);
}
};

$$.Scene_render_anon = {"":"Closure;this_0",
 call$1: function(actor) {
  var t1 = this.this_0;
  t1.get$context().save$0();
  t1.get$context().translate$2(actor.get$x(), actor.get$y());
  actor.render$1(t1.get$context());
  t1.get$context().restore$0();
}
};

$$.Scene_render_anon0 = {"":"Closure;this_1",
 call$1: function(f) {
  var t1, res;
  t1 = this.this_1;
  t1.get$context().save$0();
  res = f.call$1(t1.get$context());
  t1.get$context().restore$0();
  return !$.eqB(res, false);
}
};

$$.Scene_update_anon = {"":"Closure;",
 call$1: function(actor) {
  return actor.update$0();
}
};

$$.anon51 = {"":"Closure;",
 call$1: function(c) {
  c.drawImage$5($.assets.get$img_fog(), 0, 0, 1920, 994);
}
};

$$.anon52 = {"":"Closure;this_0",
 call$0: function() {
  var t1, t2, t3, t4;
  t1 = this.this_0;
  t2 = $.ltB(t1.get$phase(), 4);
  t3 = t1.get$scene();
  if (t2) {
    $.uiControl(t1.get$grendel(), t3, t1.get$inbounds(), t1.get$not_inbounds(), t1.get$outbounds(), false);
    t2 = t1.get$scene().get$camera();
    t3 = t2.get$x();
    t2.set$x($.sub(t3, $.div($.sub(t3, t1.get$camera_follow().get$x()), 8)));
    t2 = t1.get$scene().get$camera();
    t4 = t2.get$y();
    t2.set$y($.sub(t4, $.div($.sub(t4, t1.get$camera_follow().get$y()), 8)));
    t2 = t1.get$follow_velocity();
    t2.set$x($.sub(t2.get$x(), $.add($.div($.sub(t1.get$camera_follow().get$x(), t1.get$grendel().get$x()), 20), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 2), 2), 2))));
    t2 = t1.get$follow_velocity();
    t2.set$y($.sub(t2.get$y(), $.add($.div($.sub(t1.get$camera_follow().get$y(), t1.get$grendel().get$y()), 20), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 2), 2), 2))));
    t2 = t1.get$follow_velocity();
    t2.set$x($.div(t2.get$x(), 1.05));
    t2 = t1.get$follow_velocity();
    t2.set$y($.div(t2.get$y(), 1.05));
    t2 = t1.get$camera_follow();
    t2.set$x($.add(t2.get$x(), t1.get$follow_velocity().get$x()));
    t2 = t1.get$camera_follow();
    t2.set$y($.add(t2.get$y(), t1.get$follow_velocity().get$y()));
  } else {
    t2 = t3.get$camera();
    t3 = t2.get$y();
    t2.set$y($.sub(t3, $.div($.sub(t3, 4000), 32)));
  }
  t1.set$t($.add(t1.get$t(), 1));
  switch (t1.get$phase()) {
    case 0:
      t1.updateUncontrolledMovement$0();
      if ($.gtB(t1.get$grendel().get$y(), 700))
        t1.set$phase($.add(t1.get$phase(), 1));
      break;
    case 1:
      t1.phase2$0();
      break;
    case 2:
      t1.phase3$0();
      break;
    case 3:
      t1.phase4$0();
      break;
    case 4:
      t1.updateAnimals$0();
      t2 = t1.get$grendel();
      t2.set$y($.add(t2.get$y(), 5));
      break;
  }
  t1.get$scene().update$0();
  t1.get$scene().render$0();
}
};

$$._anon2 = {"":"Closure;this_1",
 call$1: function(b) {
  return b.debugDraw$1(this.this_1.get$scene());
}
};

$$._anon3 = {"":"Closure;this_2",
 call$1: function(b) {
  return b.debugDraw$1(this.this_2.get$scene());
}
};

$$._anon4 = {"":"Closure;this_3",
 call$1: function(b) {
  return b.debugDraw$1(this.this_3.get$scene());
}
};

$$.LevelEnding_updateAnimals_anon = {"":"Closure;this_0",
 call$1: function(animal) {
  var t1, t2, t3, t4, a, b, c;
  t1 = animal.get$v();
  t1.set$x($.add(t1.get$x(), 1));
  if ($.gtB(animal.get$v().get$x(), 60)) {
    t1 = this.this_0.get$grendel();
    t2 = $.sqrt($.pow($.sub(t1.get$x(), animal.get$x()), 2) + $.pow($.sub(t1.get$y(), animal.get$y()), 2)) > 200;
    t1 = t2;
  } else
    t1 = false;
  if (t1) {
    t1 = animal.get$v();
    t1.set$x($.sub(t1.get$x(), 60));
    animal.get$v().set$y(10);
  }
  if ($.gtB(animal.get$v().get$y(), 0)) {
    t1 = animal.get$y();
    t2 = animal.get$v().get$y();
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    animal.set$y($.add(t1, 5 - t2));
    t3 = animal.get$v();
    t3.set$y($.sub(t3.get$y(), 0.5));
    t3 = animal.get$x();
    t4 = this.this_0;
    a = $.sub(t3, t4.get$grendel().get$x());
    b = $.sub(animal.get$y(), t4.get$grendel().get$y());
    c = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
    animal.set$x($.sub(animal.get$x(), $.mul($.div(a, c), 5)));
    animal.set$y($.sub(animal.get$y(), $.mul($.div(b, c), 5)));
  }
}
};

$$.LevelEnding_phase4_anon = {"":"Closure;box_0,this_1",
 call$1: function(c) {
  var t1, t2, t3;
  t1 = this.box_0;
  $.whiteScreen(c, $.div(t1.t_0, 120));
  c.set$fillStyle("#000");
  t2 = $.ltB(t1.t_0, 120);
  t3 = t1.t_0;
  if (t2)
    t2 = $.div(t3, 120);
  else {
    t2 = $.div($.sub(t3, 120), 120);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    t2 = 1 - t2;
  }
  c.set$globalAlpha(t2);
  c.set$font("italic 40px Calibri");
  c.fillText$3("...so may you all", 1440, 497);
  t1.t_0 = $.add(t1.t_0, 1);
  if ($.eqB(t1.t_0, 240)) {
    this.this_1.get$scene().cleanUp$0();
    $.nextLevel("credits");
  }
}
};

$$.LevelEnding_phase3_anon = {"":"Closure;",
 call$1: function(tree) {
  var t1 = $.add(tree.get$alpha(), 0.01);
  tree.set$alpha(t1);
  return t1;
}
};

$$.LevelEnding_phase3_anon0 = {"":"Closure;",
 call$1: function(tree) {
  var t1 = $.add(tree.get$alpha(), 0.01);
  tree.set$alpha(t1);
  return t1;
}
};

$$.LevelEnding_phase3_anon1 = {"":"Closure;box_0",
 call$1: function(c) {
  var t1 = this.box_0;
  t1.t_0 = $.add(t1.t_0, 1);
  c.set$fillStyle("#000");
  c.set$globalAlpha($.div(t1.t_0, 120));
  c.set$font("italic 48px Calibri");
  c.fillText$3("Poor Grendel's had an accident", 1320, 437);
}
};

$$.uiControl_anon = {"":"Closure;char_1",
 call$1: function(b) {
  return b.push$2(this.char_1, false);
}
};

$$.uiControl_anon0 = {"":"Closure;char_2,tmp_nb_3",
 call$1: function(b) {
  var t1, t2;
  t1 = b.objectIn$1(this.char_2) === true;
  if (t1) {
    t2 = this.tmp_nb_3;
    $.getInterceptor$JSArray(t2).add$1(t2, b);
  }
  return !t1;
}
};

$$.uiControl_anon1 = {"":"Closure;box_0,char_4",
 call$1: function(b) {
  var _in, t1;
  _in = b.objectIn$1(this.char_4);
  if (_in !== true) {
    t1 = this.box_0.not_inbounds_0;
    $.getInterceptor$JSArray(t1).add$1(t1, b);
  }
  return _in;
}
};

$$.LevelBeowulf2_update_anon = {"":"Closure;this_0",
 call$1: function(note) {
  var t1, t2, t3, t4, t5, t6;
  t1 = note.get$v();
  t2 = t1.get$x();
  t3 = this.this_0;
  t2 = $.add(t2, t3.get$nrate());
  t1.set$x(t2);
  t2 = $.cos(t2);
  t1 = note.get$v().get$y();
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  note.set$x(t2 * t1);
  t4 = note.get$v();
  t5 = $.add(t4.get$x(), t3.get$nrate());
  t4.set$x(t5);
  t5 = $.sin(t5);
  t4 = note.get$v().get$y();
  if (typeof t4 !== 'number')
    throw $.iae(t4);
  note.set$y(t5 * t4);
  t6 = note.get$v();
  t6.set$y($.sub(t6.get$y(), 2));
}
};

$$.LevelBeowulf2_update_anon0 = {"":"Closure;this_1",
 call$1: function(note) {
  var t1, t2, t3, t4, t5, t6;
  t1 = note.get$v();
  t2 = t1.get$x();
  t3 = this.this_1;
  t2 = $.add(t2, t3.get$nrate());
  t1.set$x(t2);
  t2 = $.cos(t2);
  t1 = note.get$v().get$y();
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  note.set$x(t2 * t1);
  t4 = note.get$v();
  t5 = $.add(t4.get$x(), t3.get$nrate());
  t4.set$x(t5);
  t5 = $.sin(t5);
  t4 = note.get$v().get$y();
  if (typeof t4 !== 'number')
    throw $.iae(t4);
  note.set$y(t5 * t4);
  t6 = note.get$v();
  t6.set$y($.add(t6.get$y(), 20));
}
};

$$.LevelBeowulf2_update_anon1 = {"":"Closure;this_2",
 call$1: function(bound) {
  return bound.debugDraw$1(this.this_2.get$scene());
}
};

$$.LevelBeowulf2_switchMode_anon = {"":"Closure;",
 call$1: function(note) {
  return note.remove$0();
}
};

$$.LevelBeowulf2_switchMode_anon0 = {"":"Closure;",
 call$1: function(note) {
  return note.remove$0();
}
};

$$.LevelBeowulf2_controlEvil_anon = {"":"Closure;this_0",
 call$1: function(note) {
  var t1 = note.get$v();
  t1.set$x($.add(t1.get$x(), 0.1));
  t1 = this.this_0;
  note.set$x($.add(t1.get$evil().get$x(), $.cos(note.get$v().get$x()) * 100));
  note.set$y($.add(t1.get$evil().get$y(), $.sin(note.get$v().get$x()) * 100));
  if ($.ltB(note.get$alpha(), 1))
    note.set$alpha($.add(note.get$alpha(), 0.05));
}
};

$$.grendel_hurt_anon = {"":"Closure;box_0",
 call$1: function(context) {
  var t1, t2;
  t1 = this.box_0;
  t2 = $.div(t1.t_0, 60);
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  $.whiteScreen(context, 1 - t2);
  t1.t_0 = $.add(t1.t_0, 1);
  return $.lt(t1.t_0, 60);
}
};

$$.anon53 = {"":"Closure;",
 call$1: function(c) {
  c.set$fillStyle("#000");
  c.set$font("italic 48px Calibri");
  c.fillText$3("Poor Grendel's had an accident...", 960, 437);
  c.set$font("italic 24px Calibri");
  c.fillText$3("Click anywhere to try again", 960, 497);
}
};

$$.anon54 = {"":"Closure;box_0",
 call$1: function(c) {
  var t1, t2;
  t1 = this.box_0;
  t2 = $.div(t1.t_0, 120);
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  $.whiteScreen(c, 1 - t2);
  t1.t_0 = $.add(t1.t_0, 1);
  return $.lt(t1.t_0, 120);
}
};

$$.anon55 = {"":"Closure;box_0,this_1",
 call$0: function() {
  var t1, t2;
  t1 = this.this_1;
  t1.get$scene().update$0();
  t1.get$scene().render$0();
  if ($.gtB(this.box_0.t_0, 60))
    t2 = $.ui.get$mouseDown() === true || $.eqB($.ui.key$1("j"), 1);
  else
    t2 = false;
  if (t2) {
    t1.get$scene().cleanUp$0();
    $.nextLevel($.lastLevel);
  }
}
};

$$.anon56 = {"":"Closure;box_0",
 call$1: function(c) {
  var t1, t2;
  t1 = this.box_0;
  t2 = $.div(t1.tt_0, 240);
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  $.whiteScreen(c, 1 - t2);
  t1.tt_0 = $.add(t1.tt_0, 1);
  if ($.geB(t1.tt_0, 240))
    return false;
}
};

$$.showHealthBar_anon = {"":"Closure;enemy_bar_0,width_1,height_2",
 call$1: function(context) {
  var t1, t2, t3, t4, t5, t6, t7, t8;
  t1 = $.assets.get$healthbar();
  t2 = this.width_1;
  t3 = $.div(t2, 2);
  if (typeof t3 !== 'number')
    throw $.iae(t3);
  t3 = 960 - t3;
  t4 = this.height_2;
  t5 = $.mul(t4, 2);
  if (typeof t5 !== 'number')
    throw $.iae(t5);
  context.drawImage$5(t1, t3, 994 - t5, t2, t4);
  t3 = $.assets.get$health();
  t1 = $.div($.mul(t3.get$width(), $.grendelHealth), 100);
  t6 = $.assets.get$health().get$height();
  t7 = $.div(t2, 2);
  if (typeof t7 !== 'number')
    throw $.iae(t7);
  t7 = 960 - t7;
  t8 = $.mul(t4, 2);
  if (typeof t8 !== 'number')
    throw $.iae(t8);
  context.drawImage$9(t3, 0, 0, t1, t6, t7, 994 - t8, $.div($.mul(t2, $.grendelHealth), 100), t4);
  if (this.enemy_bar_0 === true) {
    t1 = $.assets.get$healthbar();
    t3 = $.div(t2, 2);
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    context.drawImage$5(t1, 960 - t3, t4, t2, t4);
    t1 = $.assets.get$health();
    t5 = $.mul(t1.get$width(), $.div($.enemyHealth0(), 100));
    t6 = $.assets.get$health().get$height();
    t7 = $.div(t2, 2);
    if (typeof t7 !== 'number')
      throw $.iae(t7);
    context.drawImage$9(t1, 0, 0, t5, t6, 960 - t7, t4, $.div($.mul(t2, $.enemyHealth0()), 100), t4);
  }
  return $.healthBarOn;
}
};

$$.anon57 = {"":"Closure;this_0",
 call$0: function() {
  var t1, t2;
  t1 = this.this_0;
  if (t1.get$movement_enabled() === true) {
    if (t1.get$battle_started() !== true)
      t2 = !(t1.get$party_started() === true && $.ltB(t1.get$party_time(), 150));
    else
      t2 = true;
    if (t2)
      $.uiControl(t1.get$grendel(), t1.get$scene(), t1.get$inbounds(), t1.get$not_inbounds(), t1.get$outbounds(), true);
    if (t1.get$battle_started() !== true)
      t2 = !(t1.get$party_started() === true && $.ltB(t1.get$party_time(), 300));
    else
      t2 = true;
    if (t2)
      t1.controlGrendelAttack$0();
  }
  if (t1.get$door_smashed() === true && t1.get$party_started() !== true && $.ltB(t1.get$grendel().get$y(), 1000))
    t1.startParty$0();
  if (t1.get$party_started() === true && t1.get$battle_started() !== true)
    t1.updateParty$0();
  if (t1.get$battle_started() === true)
    t1.updateBattle$0();
  t1.get$scene().update$0();
  t1.get$scene().render$0();
}
};

$$._anon5 = {"":"Closure;this_1",
 call$1: function(b) {
  return b.debugDraw$1(this.this_1.get$scene());
}
};

$$._anon6 = {"":"Closure;this_2",
 call$1: function(b) {
  return b.debugDraw$1(this.this_2.get$scene());
}
};

$$._anon7 = {"":"Closure;this_3",
 call$1: function(b) {
  return b.debugDraw$1(this.this_3.get$scene());
}
};

$$.LevelBeowulf_updateBattle_anon = {"":"Closure;this_0",
 call$0: function() {
  var t1 = this.this_0;
  t1.set$annotation_showing(false);
  $.showHealthBar(t1.get$scene(), false);
}
};

$$.annotationRender_anon = {"":"Closure;box_0,say_1,callback_2",
 call$1: function(c) {
  var t1, t2;
  t1 = this.box_0;
  t1.t_1 = $.add(t1.t_1, 1);
  t2 = t1.p_0;
  t1.p_0 = $.sub(t2, $.div(t2, 10));
  c.set$globalAlpha(1);
  c.set$fillStyle("#000");
  c.set$globalAlpha(0.5);
  c.fillRect$4(t1.p_0, 794, 1910, 190);
  c.set$globalAlpha(1);
  c.set$fillStyle("#fff");
  c.set$font("42px Arial italic");
  c.set$textAlign("left");
  c.fillText$3(this.say_1, $.add(t1.p_0, 50), 904);
  if ($.gtB(t1.t_1, 60))
    t1 = $.eqB($.ui.key$1("j"), 1) || $.ui.get$mouseDown() === true;
  else
    t1 = false;
  if (t1) {
    this.callback_2.call$0();
    return false;
  }
}
};

$$.LevelBeowulf_beowulfRun_anon = {"":"Closure;box_0,this_1",
 call$1: function(context) {
  var t1, t2;
  t1 = this.box_0;
  t1.t_0 = $.add(t1.t_0, 1);
  $.whiteScreen(context, $.div(t1.t_0, 240));
  if ($.eqB(t1.t_0, 240)) {
    t1 = this.this_1;
    t2 = t1.get$scene().get$postrender();
    $.getInterceptor$JSArray(t2).clear$0(t2);
    t1.get$scene().cleanUp$0();
    $.nextLevel("beowulf2");
  }
}
};

$$.LevelBeowulf_noteBattle_anon = {"":"Closure;this_0",
 call$1: function(n) {
  var t1, t2, t3, t4;
  t1 = n.get$v();
  t2 = t1.get$x();
  t3 = n.get$x();
  t4 = this.this_0;
  t1.set$x($.sub(t2, $.div($.sub(t3, t4.get$grendel().get$x()), 2000)));
  t1 = n.get$v();
  t1.set$y($.sub(t1.get$y(), $.div($.sub(n.get$y(), t4.get$grendel().get$y()), 2000)));
  t1 = n.get$v();
  t1.set$x($.div(t1.get$x(), 1.02));
  t1 = n.get$v();
  t1.set$y($.div(t1.get$y(), 1.02));
  n.set$x($.add(n.get$x(), n.get$v().get$x()));
  n.set$y($.add(n.get$y(), n.get$v().get$y()));
  t1 = t4.get$outbounds();
  return $.getInterceptor$JSArray(t1).some$1(t1, new $.LevelBeowulf_noteBattle__anon(t4, n)) !== true && new $.LevelBeowulf_noteBattle__anon0(t4, n).call$0() === true;
}
};

$$.LevelBeowulf_noteBattle__anon = {"":"Closure;this_1,n_2",
 call$1: function(b) {
  var t1, t2, i, t3, t4, t5, t6, t7, t8, t9, t10;
  t1 = this.n_2;
  if (b.objectIn$1(t1) === true) {
    t1.remove$0();
    for (t2 = this.this_1, i = 0; i < 8; ++i) {
      t3 = t2.get$scene().get$actors();
      t4 = $.getInterceptor$JSArray(t3);
      t5 = $.add(t1.get$x(), $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 20), 2), 20));
      t6 = $.add(t1.get$y(), $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 20), 2), 20));
      t7 = $.add(t1.get$v().get$x(), $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 5), 2), 5));
      t8 = $.add(t1.get$v().get$y(), $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 5), 2), 5));
      t9 = $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 10), 2), 10);
      if (typeof t9 !== 'number')
        throw $.iae(t9);
      t9 = 20 + t9;
      t10 = $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 30), 2), 30);
      if (typeof t10 !== 'number')
        throw $.iae(t10);
      t4.add$1(t3, $.Particle$(t5, t6, t7, t8, t9, "#fff", 1, $.CONSTANT2.toInt$0(60 + t10), "note", 1));
    }
    return true;
  } else
    return false;
}
};

$$.LevelBeowulf_noteBattle__anon0 = {"":"Closure;this_3,n_4",
 call$0: function() {
  var t1, t2, t3, i, t4, t5, t6, t7, t8, t9, t10, d;
  t1 = this.this_3;
  t2 = t1.get$grendel();
  t3 = this.n_4;
  if ($.sqrt($.pow($.sub(t2.get$x(), t3.get$x()), 2) + $.pow($.sub(t2.get$y(), t3.get$y()), 2)) < 50) {
    t3.remove$0();
    for (i = 0; i < 8; ++i) {
      t2 = t1.get$scene().get$actors();
      t4 = $.getInterceptor$JSArray(t2);
      t5 = $.add(t3.get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 20), 2), 20));
      t6 = $.add(t3.get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 20), 2), 20));
      t7 = $.add(t3.get$v().get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 5), 2), 5));
      t8 = $.add(t3.get$v().get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 5), 2), 5));
      t9 = $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 10), 2), 10);
      if (typeof t9 !== 'number')
        throw $.iae(t9);
      t9 = 20 + t9;
      t10 = $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 30), 2), 30);
      if (typeof t10 !== 'number')
        throw $.iae(t10);
      t4.add$1(t2, $.Particle$(t5, t6, t7, t8, t9, "#fff", 1, $.CONSTANT2.toInt$0(60 + t10), "note", 1));
    }
    t2 = t3.get$v();
    t3 = t2.get$x();
    t3 = $.mul(t3, t3);
    t4 = t2.get$y();
    d = $.sqrt($.add(t3, $.mul(t4, t4)));
    t1.hitGrendel$1($.Vector2$($.div(t2.get$x(), d), $.div(t2.get$y(), d)));
    return false;
  }
  return true;
}
};

$$.LevelBeowulf_noteBattle_anon0 = {"":"Closure;this_5",
 call$1: function(n) {
  var t1, i, t2, t3, t4, t5, t6, t7, t8, t9;
  for (t1 = this.this_5, i = 0; i < 4; ++i) {
    t2 = t1.get$scene().get$actors();
    t3 = $.getInterceptor$JSArray(t2);
    t4 = $.add(n.get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 20), 2), 20));
    t5 = $.add(n.get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 20), 2), 20));
    t6 = $.add(n.get$v().get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 5), 2), 5));
    t7 = $.add(n.get$v().get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 5), 2), 5));
    t8 = $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 10), 2), 10);
    if (typeof t8 !== 'number')
      throw $.iae(t8);
    t8 = 20 + t8;
    t9 = $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 30), 2), 30);
    if (typeof t9 !== 'number')
      throw $.iae(t9);
    t3.add$1(t2, $.Particle$(t4, t5, t6, t7, t8, "#fff", 1, $.CONSTANT2.toInt$0(60 + t9), "note", 1));
  }
  n.remove$0();
}
};

$$.LevelBeowulf_startBattle_anon = {"":"Closure;",
 call$1: function(c) {
  return c.remove$0();
}
};

$$.LevelBull_controlGrendelAttack_anon = {"":"Closure;ta_0",
 call$1: function(ob) {
  var t1 = this.ta_0;
  ob.set$alpha(t1);
  return t1;
}
};

$$.LevelBull_controlGrendelAttack_anon0 = {"":"Closure;fa_1",
 call$1: function(ob) {
  var t1 = this.fa_1;
  ob.set$alpha(t1);
  return t1;
}
};

$$.LevelBull_initWin_anon = {"":"Closure;this_0",
 call$1: function(c) {
  var t1 = this.this_0;
  if ($.gtB(t1.get$win_time(), 240))
    $.whiteScreen(c, $.div($.sub(t1.get$win_time(), 240), 240));
}
};

$$.LevelDragon_controlGrendelAttack_anon = {"":"Closure;this_0",
 call$1: function(p) {
  var t1, t2, rot, i;
  t1 = this.this_0;
  t2 = t1.get$grendel();
  if ($.sqrt($.pow($.sub(p.get$x(), t2.get$x()), 2) + $.pow($.sub(p.get$y(), t2.get$y()), 2)) < 25) {
    rot = $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 3.141592653589793), 2), 3.141592653589793);
    t2 = $.cos(rot) * 1500;
    p.get$v().set$x(t2);
    t2 = $.sin(rot) * 1500;
    p.get$v().set$y(t2);
    t1.set$dragon_left($.sub(t1.get$dragon_left(), 2));
    t2 = $.mul($.div($.sub(t1.get$dragon_left(), 1), 20), 100);
    $.enemyHealth(t2);
    p.remove$0();
    for (i = 0; i < 3; ++i) {
      t2 = t1.get$scene().get$actors();
      $.getInterceptor$JSArray(t2).add$1(t2, $.ArcParticle$("blood", p.get$x(), p.get$y(), true, null, 1, true, null, $.sub($.mul(t1.get$rng().nextDouble$0(), 0.2), 0.1), 30, 10, null));
    }
    return false;
  }
  return true;
}
};

$$.ArcParticle_rotateThenRender_anon = {"":"Closure;this_0,render_1",
 call$1: function(context) {
  context.rotate$1(this.this_0.get$rotation());
  this.render_1.call$1(context);
}
};

$$.LevelOrk_controlGrendelAttack_anon = {"":"Closure;this_0",
 call$1: function(statue) {
  var t1, t2, i, t3, t4, remaining_statue;
  t1 = this.this_0;
  t2 = t1.get$grendel();
  if ($.sqrt($.pow($.sub(t2.get$x(), statue.get$x()), 2) + $.pow($.sub(t2.get$y(), statue.get$y()), 2)) < 80) {
    t2 = t1.get$statues();
    t2 = !($.eqB(statue, $.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, t1.get$attacking_statue())) && t1.get$attacking() === true);
  } else
    t2 = false;
  if (t2) {
    t2 = t1.get$grendel().get$v();
    t2.set$x($.mul(t2.get$x(), -1));
    t2 = t1.get$grendel().get$v();
    t2.set$y($.mul(t2.get$y(), -1));
    t1.set$statue_health($.sub(t1.get$statue_health(), 20));
    t2 = $.mul($.div(t1.get$statue_health(), 200), 100);
    $.enemyHealth(t2);
    t1.set$attacking_statue(0);
    t1.get$grendel().set$attacking(false);
    for (i = 0; i < 10; ++i) {
      t2 = t1.get$scene().get$actors();
      $.getInterceptor$JSArray(t2).add$1(t2, $.StoneParticle$($.add(statue.get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 40), 2), 40)), $.add(statue.get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 40), 2), 40)), 1));
    }
    if ($.eqB(t1.get$statue_health(), 100)) {
      for (i = 0; i < 30; ++i) {
        t2 = t1.get$scene().get$actors();
        $.getInterceptor$JSArray(t2).add$1(t2, $.StoneParticle$($.add(statue.get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 40), 2), 40)), $.add(statue.get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 40), 2), 40)), 2));
      }
      statue.remove$0();
      return false;
    } else if ($.eqB(t1.get$statue_health(), 0)) {
      for (i = 0; i < 30; ++i) {
        t2 = t1.get$scene().get$actors();
        $.getInterceptor$JSArray(t2).add$1(t2, $.StoneParticle$($.add(statue.get$x(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 40), 2), 40)), $.add(statue.get$y(), $.sub($.mul($.mul(t1.get$rng().nextDouble$0(), 40), 2), 40)), 2));
      }
      statue.remove$0();
      t2 = t1.get$statues();
      t3 = $.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, 0).get$markedForRemoval() === true;
      t4 = t1.get$statues();
      remaining_statue = t3 ? $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, 1) : $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, 0);
      t1 = t1.get$warriors();
      $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelOrk_controlGrendelAttack__anon(remaining_statue));
      return false;
    }
  }
  return true;
}
};

$$.LevelOrk_controlGrendelAttack__anon = {"":"Closure;remaining_statue_1",
 call$1: function(w) {
  w.set$target(this.remaining_statue_1);
}
};

$$.anon58 = {"":"Closure;this_0",
 call$0: function() {
  var t1, t2;
  t1 = $.window();
  t2 = this.this_0;
  t1 = t1.setInterval$2(new $._anon(t2), 16);
  t2.set$interval(t1);
  t2.get$scene().set$interval(t1);
}
};

$$._anon = {"":"Closure;this_1",
 call$0: function() {
  var t1, t2, t3, t4, n, t5, t6;
  t1 = this.this_1;
  if (t1.get$annotation_showing() !== true) {
    if (t1.get$stone_gods_awakened() !== true) {
      t2 = t1.get$grendel();
      t3 = t1.get$ork();
      t4 = $.sqrt($.pow($.sub(t2.get$x(), t3.get$x()), 2) + $.pow($.sub(t2.get$y(), t3.get$y()), 2)) < 400;
      t2 = t4;
    } else
      t2 = false;
    if (t2) {
      t1.set$ork_time($.add(t1.get$ork_time(), 1));
      if ($.ltB(t1.get$ork_time(), 120)) {
        t2 = t1.get$scene().get$camera();
        t3 = t2.get$x();
        t2.set$x($.sub(t3, $.div($.sub(t3, t1.get$ork().get$x()), 10)));
        t2 = t1.get$scene().get$camera();
        t4 = t2.get$y();
        t2.set$y($.sub(t4, $.div($.sub(t4, t1.get$ork().get$y()), 10)));
        if ($.ltB(t1.get$ork_time(), 80) && $.eqB($.mod(t1.get$ork_time(), 5), 0)) {
          n = $.OrkNote$(t1.get$ork(), $.add($.mul(t1.get$rng().nextDouble$0(), 400), 100));
          t2 = t1.get$notes();
          $.getInterceptor$JSArray(t2).add$1(t2, n);
          t2 = t1.get$scene().get$actors();
          $.getInterceptor$JSArray(t2).add$1(t2, n);
        }
        if ($.eqB(t1.get$ork_time(), 100)) {
          t2 = t1.get$notes();
          $.getInterceptor$JSArray(t2).forEach$1(t2, new $.__anon(t1));
        }
      } else if ($.ltB(t1.get$ork_time(), 210)) {
        t2 = t1.get$scene().get$camera();
        t3 = t2.get$x();
        t4 = t1.get$statues();
        t2.set$x($.sub(t3, $.div($.sub(t3, $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, 1).get$x()), 10)));
        t2 = t1.get$scene().get$camera();
        t5 = t2.get$y();
        t6 = t1.get$statues();
        t2.set$y($.sub(t5, $.div($.sub(t5, $.getInterceptor$JSStringJSArray(t6).operator$index$1(t6, 1).get$y()), 10)));
        if ($.eqB(t1.get$ork_time(), 200)) {
          t1.set$annotation_shown(true);
          t1.set$annotation_showing(true);
          t2 = t1.get$scene().get$postrender();
          $.getInterceptor$JSArray(t2).add$1(t2, $.annotationRender("Destroy the human statues", new $.__anon0(t1)));
        }
        t2 = t1.get$ork();
        t2.set$alpha($.sub(t2.get$alpha(), 0.011111111111111112));
      } else if ($.ltB(t1.get$ork_time(), 250)) {
        t1.get$ork().remove$0();
        t2 = t1.get$scene().get$camera();
        t3 = t2.get$x();
        t2.set$x($.sub(t3, $.div($.sub(t3, t1.get$grendel().get$x()), 10)));
        t2 = t1.get$scene().get$camera();
        t4 = t2.get$y();
        t2.set$y($.sub(t4, $.div($.sub(t4, t1.get$grendel().get$y()), 10)));
      } else {
        t1.set$stone_gods_awakened(true);
        t1.set$ork(null);
      }
    } else {
      if ($.leB(t1.get$statue_health(), 0))
        t1.set$win_time($.add(t1.get$win_time(), 1));
      if ($.ltB(t1.get$win_time(), 120)) {
        $.uiControl(t1.get$grendel(), t1.get$scene(), t1.get$inbounds(), t1.get$not_inbounds(), t1.get$outbounds(), true);
        t1.controlGrendelAttack$0();
      } else {
        t2 = $.gtB(t1.get$win_time(), 480);
        t3 = t1.get$scene();
        if (t2) {
          t2 = t3.get$camera();
          t3 = t2.get$x();
          t2.set$x($.sub(t3, $.div($.sub(t3, t1.get$grendel().get$x()), 10)));
          t2 = t1.get$scene().get$camera();
          t4 = t2.get$y();
          t2.set$y($.sub(t4, $.div($.sub(t4, t1.get$grendel().get$y()), 10)));
          t2 = t1.get$grendel().get$x();
          t3 = $.gtB($.getInterceptor$JSNumber(t2).abs$0(t2), 20);
          t4 = t1.get$grendel();
          if (t3) {
            t2 = t4.get$x();
            t4.set$x($.sub(t2, $.mul($.div(t2, $.getInterceptor$JSNumber(t2).abs$0(t2)), 5)));
            t2 = t1.get$grendel().get$x();
            if ($.leB($.getInterceptor$JSNumber(t2).abs$0(t2), 20)) {
              t2 = t1.get$scene().get$postrender();
              $.getInterceptor$JSArray(t2).add$1(t2, new $.__anon1(t1));
            }
          } else {
            t4.set$y($.add(t4.get$y(), 5));
            if ($.gtB(t1.get$grendel().get$y(), 700)) {
              t1.set$screenAlpha($.add(t1.get$screenAlpha(), 0.01));
              if ($.geB(t1.get$screenAlpha(), 1)) {
                t1.get$scene().cleanUp$0();
                $.nextLevel("beowulf");
              }
            }
          }
        } else {
          t2 = t3.get$camera();
          t3 = t2.get$x();
          t4 = t1.get$statues();
          t2.set$x($.sub(t3, $.div($.sub(t3, $.getInterceptor$JSStringJSArray(t4).operator$index$1(t4, 0).get$x()), 10)));
          t2 = t1.get$scene().get$camera();
          t5 = t2.get$y();
          t6 = t1.get$statues();
          t2.set$y($.sub(t5, $.div($.sub(t5, $.getInterceptor$JSStringJSArray(t6).operator$index$1(t6, 0).get$y()), 10)));
        }
      }
      if (t1.get$stone_gods_awakened() === true) {
        t1.controlStatues$0();
        t1.controlWarriors$0();
      }
    }
    t1.get$scene().update$0();
  }
  t1.get$scene().render$0();
}
};

$$.__anon = {"":"Closure;this_2",
 call$1: function(note) {
  var t1, t2, t3;
  t1 = this.this_2;
  t2 = t1.get$statues();
  t3 = $.getInterceptor$JSStringJSArray(t2);
  note.direct$1(t3.operator$index$1(t2, t1.get$rng().nextInt$1(t3.get$length(t2))));
}
};

$$.__anon0 = {"":"Closure;this_3",
 call$0: function() {
  var t1 = this.this_3;
  t1.set$annotation_showing(false);
  $.showHealthBar(t1.get$scene(), true);
}
};

$$.__anon1 = {"":"Closure;this_4",
 call$1: function(c) {
  $.whiteScreen(c, this.this_4.get$screenAlpha());
}
};

$$.__anon5 = {"":"Closure;this_5",
 call$1: function(b) {
  return b.debugDraw$1(this.this_5.get$scene());
}
};

$$.__anon6 = {"":"Closure;this_6",
 call$1: function(b) {
  return b.debugDraw$1(this.this_6.get$scene());
}
};

$$.__anon7 = {"":"Closure;this_7",
 call$1: function(b) {
  return b.debugDraw$1(this.this_7.get$scene());
}
};

$$.zodiacIntro_anon = {"":"Closure;box_0,zodiac_img_1,callback_2",
 call$1: function(c) {
  var t1, a1, a2, t2, t3;
  t1 = this.box_0;
  t1.t_0 = $.add(t1.t_0, 1);
  if ($.ltB(t1.t_0, 60)) {
    a1 = $.div(t1.t_0, 60);
    a2 = 1;
  } else if ($.ltB(t1.t_0, 120)) {
    a1 = 1;
    a2 = 1;
  } else if ($.ltB(t1.t_0, 180)) {
    if ($.eqB(t1.t_0, 120))
      this.callback_2.call$0();
    t2 = $.div($.sub(t1.t_0, 120), 60);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    a1 = 1 - t2;
    t2 = $.div($.sub(t1.t_0, 120), 60);
    if (typeof t2 !== 'number')
      throw $.iae(t2);
    a2 = 1 - t2;
  } else {
    $.window().clearInterval$1(t1.interval_1);
    return false;
  }
  c.set$globalAlpha(a2);
  c.set$fillStyle("#fff");
  c.fillRect$4(0, 0, 1920, 994);
  c.set$globalAlpha(a1);
  t1 = this.zodiac_img_1;
  t2 = $.div(t1.get$width(), 2);
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  t2 = 960 - t2;
  t3 = $.div(t1.get$height(), 2);
  if (typeof t3 !== 'number')
    throw $.iae(t3);
  c.drawImage$3(t1, t2, 497 - t3);
}
};

$$.zodiacIntro_anon0 = {"":"Closure;scene_3",
 call$0: function() {
  this.scene_3.render$0();
}
};

$$.LevelOrk_controlWarriors_anon = {"":"Closure;this_0",
 call$1: function(w) {
  var a, b, d, t1, t2, t3;
  if (w.get$markedForRemoval() === true)
    return false;
  a = $.sub(w.get$x(), w.get$target().get$x());
  b = $.sub(w.get$y(), w.get$target().get$y());
  d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
  w.set$x($.sub(w.get$x(), $.mul($.div(a, d), 5)));
  w.set$y($.sub(w.get$y(), $.mul($.div(b, d), 5)));
  t1 = w.get$target();
  t2 = this.this_0;
  if ($.eqB(t1, t2.get$grendel())) {
    if (d < 50)
      if (t2.get$grendel().get$attacking() === true) {
        t2.bloodExplode$2(w.get$x(), w.get$y());
        w.remove$0();
        return false;
      } else
        t2.hitGrendel$2($.Vector2$($.div($.neg(a), d), $.div($.neg(b), d)), false);
  } else {
    t1 = d < 50;
    t3 = w.get$x();
    if (t1) {
      t2.bloodExplode$2(t3, w.get$y());
      w.remove$0();
      return false;
    } else {
      a = $.sub(t3, t2.get$grendel().get$x());
      b = $.sub(w.get$y(), t2.get$grendel().get$y());
      d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
      if (d < 80)
        if (t2.get$grendel().get$attacking() === true) {
          t2.bloodExplode$2(w.get$x(), w.get$y());
          w.remove$0();
          return false;
        } else
          t2.hitGrendel$2($.Vector2$($.div($.neg(a), d), $.div($.neg(b), d)), false);
    }
  }
  return true;
}
};

$$.anon59 = {"":"Closure;box_0,this_1",
 call$0: function() {
  var t1, t2, t3, interval;
  t1 = $.window();
  t2 = this.box_0;
  t3 = this.this_1;
  interval = t1.setInterval$2(new $._anon0(t2, t3), 16);
  t2.interval_0 = interval;
  t3.get$scene().set$interval(interval);
}
};

$$._anon0 = {"":"Closure;box_0,this_2",
 call$0: function() {
  var t1, t2, t3, t4;
  t1 = this.this_2;
  if (t1.get$annotation_showing() !== true) {
    if (t1.get$annotation_shown() !== true)
      if (!(t1.get$dragon_head() == null)) {
        t2 = t1.get$kicked_gold();
        if (!(t2 == null))
          if ($.geB($.getInterceptor$JSStringJSArray(t2).get$length(t2), 1)) {
            t2 = t1.get$dragon_head();
            t3 = t1.get$kicked_gold();
            t3 = $.getInterceptor$JSStringJSArray(t3).operator$index$1(t3, 0);
            t4 = $.sqrt($.pow($.sub(t2.get$x(), t3.get$x()), 2) + $.pow($.sub(t2.get$y(), t3.get$y()), 2)) < 100;
            t2 = t4;
          } else
            t2 = false;
        else
          t2 = false;
      } else
        t2 = false;
    else
      t2 = false;
    if (t2) {
      t1.set$annotation_shown(true);
      t1.set$annotation_showing(true);
      t2 = t1.get$scene().get$postrender();
      $.getInterceptor$JSArray(t2).add$1(t2, $.annotationRender("Lure the dragon out by kicking his gold, then split him up. Avoid fireballs!", new $.__anon2(t1)));
    }
    $.uiControl(t1.get$grendel(), t1.get$scene(), t1.get$inbounds(), t1.get$not_inbounds(), t1.get$outbounds(), true);
    t1.fireBallControl$0();
    t1.controlNotes$0();
    if (t1.get$fading_out() !== true) {
      t2 = t1.get$golds();
      if ($.gtB($.getInterceptor$JSStringJSArray(t2).get$length(t2), 0))
        t1.checkGrendelTakeGold$0();
      else
        t1.slitherDragon$0();
      t1.controlGrendelAttack$0();
    } else {
      t2 = this.box_0;
      t2.fadeOutTime_1 = $.add(t2.fadeOutTime_1, 1);
      t3 = t1.get$notes();
      $.getInterceptor$JSArray(t3).forEach$1(t3, new $.__anon3());
      if ($.geB(t2.fadeOutTime_1, 480)) {
        t1.get$scene().cleanUp$0();
        $.nextLevel("ork");
      }
    }
    t1.get$scene().update$0();
  }
  t1.get$scene().render$0();
}
};

$$.__anon2 = {"":"Closure;this_3",
 call$0: function() {
  var t1 = this.this_3;
  t1.set$annotation_showing(false);
  $.showHealthBar(t1.get$scene(), true);
}
};

$$.__anon3 = {"":"Closure;",
 call$1: function(note) {
  var t1, t2;
  t1 = note.get$alpha();
  t2 = $.mul($.mod(note.get$x(), 10), 0.01);
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  note.set$alpha($.sub(t1, (0.01 + t2) / 20));
}
};

$$.__anon8 = {"":"Closure;this_4",
 call$1: function(b) {
  return b.debugDraw$1(this.this_4.get$scene());
}
};

$$.__anon9 = {"":"Closure;this_5",
 call$1: function(b) {
  return b.debugDraw$1(this.this_5.get$scene());
}
};

$$.__anon10 = {"":"Closure;this_6",
 call$1: function(b) {
  return b.debugDraw$1(this.this_6.get$scene());
}
};

$$.LevelDragon_slitherDragon_anon = {"":"Closure;",
 call$1: function(part) {
  return part.remove$0();
}
};

$$.LevelDragon_slitherDragon_anon0 = {"":"Closure;box_0",
 call$1: function(c) {
  var t1 = this.box_0;
  t1.t_0 = $.add(t1.t_0, 1);
  $.whiteScreen(c, $.div(t1.t_0, 480));
}
};

$$.LevelDragon_slitherDragon_anon1 = {"":"Closure;",
 call$1: function(part) {
  var t1, t2;
  t1 = part.get$x();
  t1 = $.mul(t1, t1);
  t2 = part.get$y();
  if ($.sqrt($.add(t1, $.mul(t2, t2))) > 500)
    part.set$alpha($.sub(part.get$alpha(), 0.01));
}
};

$$.LevelDragon_slitherDragon_anon2 = {"":"Closure;",
 call$1: function(part) {
  var t1, t2, t3;
  if ($.ltB(part.get$alpha(), 1)) {
    t1 = part.get$x();
    t1 = $.mul(t1, t1);
    t2 = part.get$y();
    t3 = $.sqrt($.add(t1, $.mul(t2, t2))) < 1000;
    t1 = t3;
  } else
    t1 = false;
  if (t1)
    part.set$alpha($.add(part.get$alpha(), 0.01));
}
};

$$.LevelDragon_checkGrendelTakeGold_anon = {"":"Closure;this_0",
 call$1: function(gold) {
  var t1, t2, ng;
  t1 = this.this_0;
  t2 = t1.get$grendel();
  if ($.sqrt($.pow($.sub(gold.get$x(), t2.get$x()), 2) + $.pow($.sub(gold.get$y(), t2.get$y()), 2)) < 50) {
    ng = $.ArcParticle$("gold", gold.get$x(), gold.get$y(), false, 80, 1, true, null, $.sub($.mul(t1.get$rng().nextDouble$0(), 0.2), 0.1), 30, 10, 60);
    t2 = t1.get$kicked_gold();
    $.getInterceptor$JSArray(t2).add$1(t2, ng);
    t2 = t1.get$scene().get$actors();
    $.getInterceptor$JSArray(t2).add$1(t2, ng);
    gold.remove$0();
    return false;
  }
  return true;
}
};

$$.LevelDragon_controlNotes_anon = {"":"Closure;",
 call$1: function(note) {
  var t1, t2, t3, t4;
  t1 = note.get$v();
  t1.set$x($.add(t1.get$x(), $.div(t1.get$y(), 30000)));
  t1 = $.cos(note.get$v().get$x());
  t2 = note.get$v().get$y();
  if (typeof t2 !== 'number')
    throw $.iae(t2);
  note.set$x(t1 * t2);
  t3 = $.sin(note.get$v().get$x());
  t4 = note.get$v().get$y();
  if (typeof t4 !== 'number')
    throw $.iae(t4);
  note.set$y(t3 * t4);
}
};

$$.LevelDragon_fireBallControl_anon = {"":"Closure;this_0",
 call$1: function(dh) {
  var t1, ang, t2, t3, t4, t5, t6, t7, t8, t9, fb, a, b, d;
  t1 = dh.get$v();
  t1.set$x($.add(t1.get$x(), 1));
  t1 = dh.get$v();
  ang = $.add(t1.get$y(), $.cos($.mul($.mul($.div(t1.get$x(), 30), 3.141592653589793), 2)) / 2);
  t2 = this.this_0;
  t3 = t2.get$scene().get$actors();
  t4 = $.getInterceptor$JSArray(t3);
  t5 = dh.get$x();
  t6 = dh.get$y();
  t7 = $.cos(ang) * 20;
  t8 = $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 5), 2), 5);
  if (typeof t8 !== 'number')
    throw $.iae(t8);
  t8 = t7 + t8;
  t7 = $.sin(ang) * 20;
  t9 = $.sub($.mul($.mul(t2.get$rng().nextDouble$0(), 5), 2), 5);
  if (typeof t9 !== 'number')
    throw $.iae(t9);
  t9 = t7 + t9;
  t7 = $.add($.mul(t2.get$rng().nextDouble$0(), 10), 30);
  t4.add$1(t3, $.Particle$(t5, t6, t8, t9, t7, t2.get$rng().nextBool$0() === true ? "f00" : "ff0", 1.05, 30, "fireball", 1));
  if ($.eqB(t2.get$rng().nextInt$1(30), 0)) {
    fb = $.Character$(1, "ff0", 50, null, "Fireball", 50, dh.get$x(), dh.get$y());
    fb.v = $.Vector2$($.cos(ang) * 10, $.sin(ang) * 10);
    t1 = t2.get$fire_balls();
    $.getInterceptor$JSArray(t1).add$1(t1, fb);
    t1 = t2.get$scene().get$actors();
    $.getInterceptor$JSArray(t1).add$1(t1, fb);
  }
  a = $.sub(dh.get$x(), t2.get$grendel().get$x());
  b = $.sub(dh.get$y(), t2.get$grendel().get$y());
  d = $.sqrt($.add($.mul(a, a), $.mul(b, b)));
  if (d < 350)
    t2.hitGrendel$1($.Vector2$($.div($.neg(a), d), $.div($.neg(b), d)));
  if ($.geB(dh.get$v().get$x(), 120)) {
    dh.remove$0();
    return false;
  }
  return true;
}
};

$$.LevelDragon_fireBallControl_anon0 = {"":"Closure;this_1",
 call$1: function(fb) {
  var t1, t2, t3, t4, d;
  t1 = this.this_1;
  t2 = t1.get$scene().get$actors();
  $.getInterceptor$JSArray(t2).add$1(t2, $.Particle$(fb.get$x(), fb.get$y(), 0, 0, fb.get$width(), "#fff", 1, 5, "fireball", 0.25));
  fb.set$x($.add(fb.get$x(), fb.get$v().get$x()));
  fb.set$y($.add(fb.get$y(), fb.get$v().get$y()));
  t2 = t1.get$grendel();
  if ($.sqrt($.pow($.sub(t2.get$x(), fb.get$x()), 2) + $.pow($.sub(t2.get$y(), fb.get$y()), 2)) < 50) {
    t2 = fb.get$v();
    t3 = t2.get$x();
    t3 = $.mul(t3, t3);
    t4 = t2.get$y();
    d = $.sqrt($.add(t3, $.mul(t4, t4)));
    t1.hitGrendel$1($.Vector2$($.div(t2.get$x(), d), $.div(t2.get$y(), d)));
    fb.remove$0();
    return false;
  }
  t1 = fb.get$x();
  t1 = $.mul(t1, t1);
  t2 = fb.get$y();
  if ($.sqrt($.add(t1, $.mul(t2, t2))) > 750) {
    fb.set$alpha($.sub(fb.get$alpha(), 0.05));
    if ($.leB(fb.get$alpha(), 0)) {
      fb.remove$0();
      return false;
    }
  }
  return true;
}
};

$$.LevelShaper_begin_anon = {"":"Closure;box_0,this_1",
 call$0: function() {
  var t1, t2, t3;
  t1 = $.window();
  t2 = this.box_0;
  t3 = this.this_1;
  t1 = t1.setInterval$2(new $.LevelShaper_begin__anon(t2, t3), 16);
  t3.set$interval(t1);
  t3.get$scene().set$interval(t1);
}
};

$$.LevelShaper_begin__anon = {"":"Closure;box_0,this_2",
 call$0: function() {
  var t1, t2, data, t3, t4, t5;
  t1 = this.this_2;
  if (t1.get$annotation_showing() !== true) {
    t2 = this.box_0;
    data = t2.updateFunction_0.call$0();
    if (!(data == null)) {
      t3 = t1.get$stages();
      t4 = $.getInterceptor$JSStringJSArray(t3);
      t5 = $.add(t1.get$currentStage(), 1);
      t1.set$currentStage(t5);
      t2.updateFunction_0 = t4.operator$index$1(t3, t5).call$1(data);
    }
    t1.get$scene().update$0();
  }
  t1.get$scene().render$0();
}
};

$$.LevelShaper_stage3_anon = {"":"Closure;",
 call$1: function(c) {
  c.set$visible(true);
}
};

$$.LevelShaper_stage3_anon0 = {"":"Closure;box_0,this_1,grendel_2",
 call$0: function() {
  var t1, a, t2, t3;
  t1 = this.box_0;
  t1.t_0 = $.add(t1.t_0, 1);
  a = $.pow($.div(t1.t_0, 240), 2);
  t2 = this.this_1;
  t3 = t2.get$alltrue();
  $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage3__anon(a));
  t3 = t2.get$allfalse();
  $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage3__anon0(a));
  if ($.eqB(t1.t_0, 360)) {
    t3 = t2.get$scene().get$postrender();
    $.getInterceptor$JSArray(t3).add$1(t3, new $.LevelShaper_stage3__anon1(t1, t2));
  }
  if ($.eqB(t1.t_0, 420)) {
    t2.get$scene().cleanUp$0();
    $.nextLevel("dragon");
  }
  $.uiControl(this.grendel_2, t2.get$scene(), null, null, null, true);
}
};

$$.LevelShaper_stage3__anon = {"":"Closure;a_3",
 call$1: function(c) {
  c.set$alpha(this.a_3);
}
};

$$.LevelShaper_stage3__anon0 = {"":"Closure;a_4",
 call$1: function(c) {
  var t1 = this.a_4;
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  c.set$alpha(1 - t1);
  if ($.ltB(c.get$alpha(), 0))
    c.set$visible(false);
}
};

$$.LevelShaper_stage3__anon1 = {"":"Closure;box_0,this_5",
 call$1: function(context) {
  var t1;
  context.set$globalAlpha($.div($.sub(this.box_0.t_0, 360), 60));
  context.set$fillStyle("#fff");
  t1 = this.this_5.get$scene();
  context.fillRect$4(0, 0, t1.get$screenx(), t1.get$screeny());
}
};

$$.LevelShaper_stage2_rrng = {"":"Closure;rng_1",
 call$1: function(no) {
  return $.sub($.mul($.mul(this.rng_1.nextDouble$0(), no), 2), no);
}
};

$$.LevelShaper_stage2_anon = {"":"Closure;box_0",
 call$1: function(warrior) {
  warrior.getTarget$1(this.box_0.wt2_1);
}
};

$$.LevelShaper_stage2_anon0 = {"":"Closure;box_0",
 call$1: function(warrior) {
  warrior.getTarget$1(this.box_0.wt1_0);
}
};

$$.LevelShaper_stage2_anon1 = {"":"Closure;box_0,this_2,trees_3",
 call$0: function() {
  var t1, t2;
  if (this.box_0.ts_4 == null) {
    t1 = this.trees_3;
    $.getInterceptor$JSArray(t1).forEach$1(t1, new $.LevelShaper_stage2__anon14());
    t1 = this.this_2;
    t2 = t1.get$alltrue();
    $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon15());
    $.grendel_hurt(t1.get$scene(), 10);
  }
}
};

$$.LevelShaper_stage2__anon14 = {"":"Closure;",
 call$1: function(tree) {
  tree.set$visible(true);
}
};

$$.LevelShaper_stage2__anon15 = {"":"Closure;",
 call$1: function(t) {
  t.set$visible(true);
}
};

$$.LevelShaper_stage2_anon2 = {"":"Closure;box_0,this_4,grendel_5,trees_6,meadhall_7,rng_8,rrng_9",
 call$0: function() {
  var t1, t2, t3, t4, t5, t6, note, t7, w, i, di, d;
  t1 = this.box_0;
  t1.t_2 = $.add(t1.t_2, 1);
  if ($.eqB(t1.t_2, 120)) {
    t2 = this.this_4;
    t2.set$annotation_shown(true);
    t2.set$annotation_showing(true);
    t3 = t2.get$scene().get$postrender();
    $.getInterceptor$JSArray(t3).add$1(t3, $.annotationRender("Help your friends against the red warriors!", new $.LevelShaper_stage2__anon(t2)));
  }
  t2 = t1.ts_4;
  if (!(t2 == null)) {
    t1.ta_3 = (-$.pow($.sub($.sub(t1.t_2, t2), 60), 2) + 3600) / 3600;
    if ($.eqB($.sub(t1.t_2, t1.ts_4), 120)) {
      t1.ta_3 = 0;
      t2 = this.trees_6;
      $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon0());
      t2 = this.this_4.get$alltrue();
      $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon1());
      t1.ts_4 = null;
    }
    t2 = this.trees_6;
    $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon2(t1));
    t2 = this.this_4;
    t3 = t2.get$alltrue();
    $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage2__anon3(t1));
    t2 = t2.get$allfalse();
    $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon4(t1));
    t2 = t1.notes_5;
    $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon5(t1));
  } else {
    t2 = this.this_4.get$alltrue();
    $.getInterceptor$JSArray(t2).forEach$1(t2, new $.LevelShaper_stage2__anon6());
  }
  t2 = this.rng_8;
  if ($.eqB(t2.nextInt$1(40), 1)) {
    t3 = t1.notes_5;
    t1.notes_5 = $.getInterceptor$JSArray(t3).filter$1(t3, new $.LevelShaper_stage2__anon7());
    t4 = this.grendel_5;
    t5 = t4.get$x();
    t6 = this.rrng_9;
    note = $.Note$($.add(t5, t6.call$1(500)), $.add(t4.get$y(), t6.call$1(500)));
    t7 = t1.notes_5;
    $.getInterceptor$JSArray(t7).add$1(t7, note);
    t7 = this.this_4.get$scene().get$actors();
    $.getInterceptor$JSArray(t7).add$1(t7, note);
  }
  t3 = this.meadhall_7;
  t3.set$alpha($.sub(t3.get$alpha(), 0.05));
  if ($.leB(t3.get$alpha(), 0))
    t3.remove$0();
  if ($.ltB(t1.t_2, 300)) {
    t3 = this.trees_6;
    $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage2__anon8());
  }
  t3 = new $.LevelShaper_stage2__warriorFilter();
  t4 = t1.wt1_0;
  t1.wt1_0 = $.getInterceptor$JSArray(t4).filter$1(t4, t3);
  t5 = t1.wt2_1;
  t1.wt2_1 = $.getInterceptor$JSArray(t5).filter$1(t5, t3);
  t3 = t1.wt2_1;
  if ($.gtB($.getInterceptor$JSStringJSArray(t3).get$length(t3), 0)) {
    t3 = t1.wt1_0;
    $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage2__anon9(t1));
  }
  t3 = t1.wt1_0;
  if ($.gtB($.getInterceptor$JSStringJSArray(t3).get$length(t3), 0)) {
    t3 = t1.wt2_1;
    $.getInterceptor$JSArray(t3).forEach$1(t3, new $.LevelShaper_stage2__anon10(t1));
  }
  if ($.eqB($.mod(t1.t_2, 240), 0) && $.ltB(t1.t_2, 600)) {
    t3 = this.grendel_5;
    t4 = t3.get$x();
    t5 = this.rrng_9;
    t4 = $.add(t4, t5.call$1(1000));
    t6 = $.add($.add(t3.get$y(), 500), t5.call$1(250));
    t7 = this.this_4;
    w = $.Warrior$(t4, t6, "0f0", t7.get$warriorDeath());
    t6 = t1.wt1_0;
    $.getInterceptor$JSArray(t6).add$1(t6, w);
    t6 = t7.get$scene().get$actors();
    $.getInterceptor$JSArray(t6).add$1(t6, w);
    w = $.Warrior$($.add(t3.get$x(), t5.call$1(1000)), $.add($.sub(t3.get$y(), 1000), t5.call$1(250)), "f00", t7.get$warriorDeath());
    t6 = t1.wt2_1;
    $.getInterceptor$JSArray(t6).add$1(t6, w);
    t6 = t7.get$scene().get$actors();
    $.getInterceptor$JSArray(t6).add$1(t6, w);
  }
  if ($.gtB(t1.t_2, 600))
    if ($.eqB($.mod(t1.t_2, 30), 0)) {
      t3 = t1.wt1_0;
      t4 = $.gtB($.getInterceptor$JSStringJSArray(t3).get$length(t3), 1);
      t3 = t4;
    } else
      t3 = false;
  else
    t3 = false;
  if (t3) {
    t3 = t1.wt1_0;
    i = t2.nextInt$1($.sub($.getInterceptor$JSStringJSArray(t3).get$length(t3), 1));
    t2 = t1.wt1_0;
    if (!$.eqB($.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, i), this.grendel_5)) {
      t2 = t1.wt1_0;
      w = $.getInterceptor$JSStringJSArray(t2).operator$index$1(t2, i);
      t2 = t1.wt1_0;
      $.getInterceptor$JSArray(t2).removeAt$1(t2, i);
      w.remove$0();
      t2 = w.get$x();
      t3 = w.get$y();
      t4 = this.this_4;
      w = $.Warrior$(t2, t3, "f00", t4.get$warriorDeath());
      t3 = t1.wt2_1;
      $.getInterceptor$JSArray(t3).add$1(t3, w);
      w.alpha = 1;
      t3 = t4.get$scene().get$actors();
      $.getInterceptor$JSArray(t3).add$1(t3, w);
    }
  }
  if ($.eqB(t1.t_2, 1200)) {
    t2 = t1.wt1_0;
    t3 = $.getInterceptor$JSArray(t2);
    t4 = this.this_4;
    t5 = this.grendel_5;
    t3.forEach$1(t2, new $.LevelShaper_stage2__anon11(t1, t4, t5));
    t1.wt1_0 = [t5];
  }
  t2 = t1.wt2_1;
  if ($.leB($.getInterceptor$JSStringJSArray(t2).get$length(t2), 1)) {
    t2 = t1.wt1_0;
    t3 = $.gtB($.getInterceptor$JSStringJSArray(t2).get$length(t2), 1);
    t2 = t3;
  } else
    t2 = false;
  if (t2) {
    t2 = t1.wt1_0;
    t3 = $.getInterceptor$JSArray(t2);
    t4 = this.this_4;
    t5 = this.grendel_5;
    t3.forEach$1(t2, new $.LevelShaper_stage2__anon12(t1, t4, t5));
    t1.wt1_0 = [t5];
  }
  t2 = this.grendel_5;
  t3 = this.this_4;
  $.uiControl(t2, t3.get$scene(), null, null, null, true);
  t2.set$cooldown($.sub(t2.get$cooldown(), 1));
  if ($.leB(t2.get$cooldown(), 0) && $.ui.get$mouseDown() === true) {
    di = $.Vector2$($.sub($.sub(t2.get$x(), $.sub($.ui.get$mouse().get$x(), $.div(t3.get$scene().get$screenx(), 2))), t3.get$scene().get$camera().get$x()), $.sub($.sub(t2.get$y(), $.sub($.ui.get$mouse().get$y(), $.div(t3.get$scene().get$screeny(), 2))), t3.get$scene().get$camera().get$y()));
    t4 = di.x;
    t4 = $.mul(t4, t4);
    t5 = di.y;
    d = $.sqrt($.add(t4, $.mul(t5, t5)));
    t6 = $.mul($.div(di.x, d), -50);
    t2.get$v().set$x(t6);
    t6 = $.mul($.div(di.y, d), -50);
    t2.get$v().set$y(t6);
    t2.set$attacking(true);
    t2.set$cooldown(30);
  }
  if (t2.get$attacking() === true) {
    t4 = t1.wt2_1;
    $.getInterceptor$JSArray(t4).forEach$1(t4, new $.LevelShaper_stage2__anon13(t3, t2));
  }
  if (t1.ts_4 == null) {
    t1 = t1.wt2_1;
    t4 = $.eqB($.getInterceptor$JSStringJSArray(t1).get$length(t1), 0);
    t1 = t4;
  } else
    t1 = false;
  if (t1)
    return $.makeLiteralMap(["allfalse", t3.get$allfalse(), "alltrue", t3.get$alltrue(), "grendel", t2, "trees", this.trees_6]);
  return;
}
};

$$.LevelShaper_stage2__anon = {"":"Closure;this_10",
 call$0: function() {
  this.this_10.set$annotation_showing(false);
  return false;
}
};

$$.LevelShaper_stage2__anon0 = {"":"Closure;",
 call$1: function(tree) {
  tree.set$visible(false);
}
};

$$.LevelShaper_stage2__anon1 = {"":"Closure;",
 call$1: function(t) {
  t.set$visible(false);
}
};

$$.LevelShaper_stage2__anon2 = {"":"Closure;box_0",
 call$1: function(tree) {
  tree.set$alpha(this.box_0.ta_3);
}
};

$$.LevelShaper_stage2__anon3 = {"":"Closure;box_0",
 call$1: function(t) {
  t.set$alpha(this.box_0.ta_3);
}
};

$$.LevelShaper_stage2__anon4 = {"":"Closure;box_0",
 call$1: function(t) {
  var t1 = this.box_0.ta_3;
  if (typeof t1 !== 'number')
    throw $.iae(t1);
  t.set$alpha(1 - t1);
}
};

$$.LevelShaper_stage2__anon5 = {"":"Closure;box_0",
 call$1: function(note) {
  note.set$alpha($.sub(note.get$alpha(), $.div(this.box_0.ta_3, 40)));
}
};

$$.LevelShaper_stage2__anon6 = {"":"Closure;",
 call$1: function(c) {
  if ($.gtB(c.get$alpha(), 0))
    c.set$alpha($.sub(c.get$alpha(), 0.01));
}
};

$$.LevelShaper_stage2__anon7 = {"":"Closure;",
 call$1: function(note) {
  return note.get$markedForRemoval() !== true;
}
};

$$.LevelShaper_stage2__anon8 = {"":"Closure;",
 call$1: function(tree) {
  tree.set$alpha($.sub(tree.get$alpha(), $.add($.div($.div($.mod(tree.get$x(), 13), 13), 100), 0.005)));
  if ($.leB(tree.get$alpha(), 0))
    tree.set$visible(false);
}
};

$$.LevelShaper_stage2__warriorFilter = {"":"Closure;",
 call$1: function(w) {
  if (w.get$markedForRemoval() === true)
    return false;
  return true;
}
};

$$.LevelShaper_stage2__anon9 = {"":"Closure;box_0",
 call$1: function(w) {
  if (w.get$target() == null)
    w.getTarget$1(this.box_0.wt2_1);
}
};

$$.LevelShaper_stage2__anon10 = {"":"Closure;box_0",
 call$1: function(w) {
  if (w.get$target() == null)
    w.getTarget$1(this.box_0.wt1_0);
}
};

$$.LevelShaper_stage2__anon11 = {"":"Closure;box_0,this_11,grendel_12",
 call$1: function(w) {
  var t1, t2, t3;
  if (!$.eqB(w, this.grendel_12)) {
    w.remove$0();
    t1 = w.get$x();
    t2 = w.get$y();
    t3 = this.this_11;
    w = $.Warrior$(t1, t2, "f00", t3.get$warriorDeath());
    t2 = this.box_0.wt2_1;
    $.getInterceptor$JSArray(t2).add$1(t2, w);
    w.alpha = 1;
    t2 = t3.get$scene().get$actors();
    $.getInterceptor$JSArray(t2).add$1(t2, w);
  }
}
};

$$.LevelShaper_stage2__anon12 = {"":"Closure;box_0,this_13,grendel_14",
 call$1: function(w) {
  var t1, t2, t3, w2;
  if (!$.eqB(w, this.grendel_14)) {
    w.remove$0();
    t1 = w.get$x();
    t2 = w.get$y();
    t3 = this.this_13;
    w2 = $.Warrior$(t1, t2, "f00", t3.get$warriorDeath());
    t2 = this.box_0.wt2_1;
    $.getInterceptor$JSArray(t2).add$1(t2, w2);
    w.set$alpha(1);
    t2 = t3.get$scene().get$actors();
    $.getInterceptor$JSArray(t2).add$1(t2, w2);
  }
}
};

$$.LevelShaper_stage2__anon13 = {"":"Closure;this_15,grendel_16",
 call$1: function(w) {
  var t1 = this.grendel_16;
  if ($.sqrt($.pow($.sub(w.get$x(), t1.get$x()), 2) + $.pow($.sub(w.get$y(), t1.get$y()), 2)) < 50)
    w.onHit$2(t1, 100);
}
};

$$.Warrior_getTarget_anon = {"":"Closure;this_0",
 call$1: function(w) {
  return this.this_0.distance$1(w);
}
};

$$.LevelShaper_stage1_anon = {"":"Closure;trees_0",
 call$1: function(l) {
  var t1, tree, t2;
  t1 = $.getInterceptor$JSStringJSArray(l);
  tree = $.Character$(1, "080", 266, null, "tree", 200, t1.operator$index$1(l, 0), $.neg(t1.operator$index$1(l, 1)));
  t2 = this.trees_0;
  $.getInterceptor$JSArray(t2).add$1(t2, tree);
}
};

$$.LevelShaper_stage1_anon0 = {"":"Closure;this_1,grendel_2,trees_3,meadhall_4,rng_5",
 call$0: function() {
  var t1, t2, t3;
  if ($.eqB(this.rng_5.nextInt$1(40), 1)) {
    t1 = this.this_1.get$scene().get$actors();
    t2 = $.getInterceptor$JSArray(t1);
    t3 = this.meadhall_4;
    t2.add$1(t1, $.Note$(t3.get$x(), t3.get$y()));
  }
  t1 = this.grendel_2;
  t2 = this.meadhall_4;
  if ($.sqrt($.pow($.sub(t1.get$x(), t2.get$x()), 2) + $.pow($.sub(t1.get$y(), t2.get$y()), 2)) < 500)
    return $.makeLiteralMap(["grendel", t1, "meadhall", t2, "trees", this.trees_3]);
  $.uiControl(t1, this.this_1.get$scene(), null, null, null, true);
  return;
}
};

$$.anon60 = {"":"Closure;this_0",
 call$0: function() {
  var t1, t2;
  t1 = $.window();
  t2 = this.this_0;
  t1 = t1.setInterval$2(new $._anon1(t2), 16);
  t2.set$interval(t1);
  t2.get$scene().set$interval(t1);
}
};

$$._anon1 = {"":"Closure;this_1",
 call$0: function() {
  var t1, t2, t3, t4;
  t1 = this.this_1;
  if (t1.get$annotation_showing() !== true) {
    if (t1.get$annotation_shown() !== true) {
      t2 = t1.get$grendel();
      t3 = t1.get$bull();
      t4 = $.sqrt($.pow($.sub(t2.get$x(), t3.get$x()), 2) + $.pow($.sub(t2.get$y(), t3.get$y()), 2)) < 300;
      t2 = t4;
    } else
      t2 = false;
    if (t2) {
      t1.set$annotation_shown(true);
      t1.set$annotation_showing(true);
      t2 = t1.get$scene().get$postrender();
      $.getInterceptor$JSArray(t2).add$1(t2, $.annotationRender("Dodge the bull, then hit it from behind", new $.__anon4(t1)));
    }
    $.uiControl(t1.get$grendel(), t1.get$scene(), t1.get$inbounds(), t1.get$not_inbounds(), t1.get$outbounds(), true);
    t1.controlBull$0();
    if (t1.get$bull_alive() !== true)
      t1.controlWin$0();
    t1.controlGrendelAttack$0();
    t1.get$scene().update$0();
  }
  t1.get$scene().render$0();
}
};

$$.__anon4 = {"":"Closure;this_2",
 call$0: function() {
  var t1 = this.this_2;
  t1.set$annotation_showing(false);
  $.showHealthBar(t1.get$scene(), true);
}
};

$$.__anon11 = {"":"Closure;this_3",
 call$1: function(b) {
  return b.debugDraw$1(this.this_3.get$scene());
}
};

$$.__anon12 = {"":"Closure;this_4",
 call$1: function(b) {
  return b.debugDraw$1(this.this_4.get$scene());
}
};

$$.__anon13 = {"":"Closure;this_5",
 call$1: function(b) {
  return b.debugDraw$1(this.this_5.get$scene());
}
};

$$.MenuScreen_controlTrees_anon = {"":"Closure;this_0",
 call$1: function(tree) {
  var t1, t2, t3, t4;
  t1 = tree.get$y();
  t2 = this.this_0;
  if ($.gtB(t1, $.add($.add(t2.get$scene().get$camera().get$y(), 497), 266))) {
    t1 = tree.get$y();
    t3 = $.mul(t2.get$rng().nextDouble$0(), 266);
    if (typeof t3 !== 'number')
      throw $.iae(t3);
    tree.set$y($.sub(t1, 1526 + t3));
    t4 = t2.get$rng().nextDouble$0();
    if (typeof t4 !== 'number')
      throw $.iae(t4);
    tree.set$x(1920 * t4);
    for (; t1 = $.sub(tree.get$x(), t2.get$grendel().get$x()), $.ltB($.getInterceptor$JSNumber(t1).abs$0(t1), 70);) {
      t1 = t2.get$rng().nextDouble$0();
      if (typeof t1 !== 'number')
        throw $.iae(t1);
      tree.set$x(1920 * t1);
    }
  }
}
};

$$.Closure = {"":"Object;",
 toString$0: function() {
  return "Closure";
}
};

$$.BoundClosure = {"":"Closure;self,target", call$0: function() {
  return this.self[this.target]();
}
};
$$.BoundClosure0 = {"":"Closure;self,target", call$1: function(p0) {
  return this.self[this.target](p0);
}
};
$$.BoundClosure1 = {"":"Closure;self,target", call$2: function(p0, p1) {
  return this.self[this.target](p0, p1);
}
};
$.Animation$ = function(image, gridX, gridY, animationType) {
  var t1 = new $.Animation(gridX, gridY, null, null, image, null);
  t1.Animation$4(image, gridX, gridY, animationType);
  return t1;
};

$.Animation$Seg = function(image, sizeX, sizeY, animationType) {
  var t1 = new $.Animation(null, null, sizeX, sizeY, image, null);
  t1.Animation$Seg$4(image, sizeX, sizeY, animationType);
  return t1;
};

$.Animation_frameDirection = function(dx, dy) {
  if ($.ltB($.add($.mul(dx, dx), $.mul(dy, dy)), 9))
    return 0;
  if ($.gtB($.getInterceptor$JSNumber(dx).abs$0(dx), 3))
    return $.gtB(dx, 0) ? 1 : -1;
  return $.gtB(dy, 0) ? 3 : 2;
};

$.Assets$ = function(onComplete) {
  var t1, t2;
  t1 = {};
  t2 = new $.Assets(onComplete, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null);
  t2.Assets$1(onComplete, t1);
  return t2;
};

$.Audio$ = function() {
  var t1 = new $.Audio(null);
  t1.Audio$0();
  return t1;
};

$.Character$ = function(alpha, color, height, image, name$, width, x, y) {
  var t1 = new $.Character(name$, null, width, height, x, y, alpha, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(alpha, color, height, image, name$, width, x, y);
  return t1;
};

$.Grendel$ = function(x, y) {
  var t1 = new $.Grendel(null, null, 0, false, null, null, "Grendel", null, 70, 100, x, y, 1, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(1, "0f0", 100, null, "Grendel", 70, x, y);
  t1.Grendel$2(x, y);
  return t1;
};

$.uiControl = function(char$, scene, inbounds, not_inbounds, outbounds, camera) {
  var t1, t2, t3, t4, tmp_nb;
  t1 = {};
  t1.not_inbounds_0 = not_inbounds;
  t2 = char$.get$v();
  t2.set$x($.add(t2.get$x(), $.sub($.ui.key$1("d"), $.ui.key$1("a"))));
  t2 = char$.get$v();
  t2.set$y($.add(t2.get$y(), $.sub($.ui.key$1("s"), $.ui.key$1("w"))));
  t2 = char$.get$v();
  t2.set$x($.div(t2.get$x(), 1.2));
  t2 = char$.get$v();
  t2.set$y($.div(t2.get$y(), 1.2));
  char$.set$y($.add(char$.get$y(), char$.get$v().get$y()));
  char$.set$x($.add(char$.get$x(), char$.get$v().get$x()));
  if (char$.get$attacking() === true) {
    t2 = char$.get$v().get$x();
    t2 = $.getInterceptor$JSNumber(t2).abs$0(t2);
    t3 = char$.get$v().get$y();
    t4 = $.ltB($.add(t2, $.getInterceptor$JSNumber(t3).abs$0(t3)), 15);
    t2 = t4;
  } else
    t2 = false;
  if (t2)
    char$.set$attacking(false);
  if (!(outbounds == null))
    $.getInterceptor$JSArray(outbounds).forEach$1(outbounds, new $.uiControl_anon(char$));
  if (!(inbounds == null) && !(t1.not_inbounds_0 == null)) {
    tmp_nb = $.List_List(null);
    t2 = t1.not_inbounds_0;
    t1.not_inbounds_0 = $.getInterceptor$JSArray(t2).filter$1(t2, new $.uiControl_anon0(char$, tmp_nb));
    inbounds = $.getInterceptor$JSArray(inbounds).filter$1(inbounds, new $.uiControl_anon1(t1, char$));
    t3 = $.getInterceptor$JSArray(inbounds);
    t3.addAll$1(inbounds, tmp_nb);
    if ($.eqB(t3.get$length(inbounds), 0)) {
      t2 = t1.not_inbounds_0;
      t3 = $.gtB($.getInterceptor$JSStringJSArray(t2).get$length(t2), 0);
      t2 = t3;
    } else
      t2 = false;
    if (t2) {
      t1 = t1.not_inbounds_0;
      $.getInterceptor$JSArray(t1).get$last(t1).push$2(char$, true);
    }
  }
  if (camera === true) {
    t1 = char$.get$x();
    scene.get$camera().set$x(t1);
    t1 = char$.get$y();
    scene.get$camera().set$y(t1);
  }
};

$.nextLevel = function(name$) {
  $.lastLevel = name$;
  switch (name$) {
    case "main":
    case "credits":
      $.MenuScreen$();
      break;
    case "bull":
      $.LevelBull$();
      break;
    case "shaper":
      $.LevelShaper$();
      break;
    case "dragon":
      $.LevelDragon$();
      break;
    case "ork":
      $.LevelOrk$();
      break;
    case "beowulf":
      $.LevelBeowulf$();
      break;
    case "beowulf2":
      $.LevelBeowulf2$();
      break;
    case "ending":
      $.LevelEnding$();
      break;
  }
};

$.zodiacIntro = function(zodiac_img, scene, callback) {
  var t1, t2;
  t1 = {};
  t1.t_0 = 0;
  t1.interval_1 = null;
  t2 = scene.get$postrender();
  $.getInterceptor$JSArray(t2).add$1(t2, new $.zodiacIntro_anon(t1, zodiac_img, callback));
  t1.interval_1 = $.window().setInterval$2(new $.zodiacIntro_anon0(scene), 16);
};

$.whiteScreen = function(context, alpha) {
  context.set$globalAlpha(alpha);
  context.set$fillStyle("#fff");
  context.fillRect$4(0, 0, 1920, 994);
  context.set$globalAlpha(1);
};

$.enemyHealth = function(a) {
  $._enemyHealth = a;
  $.audio.play$1("hit");
};

$.enemyHealth0 = function() {
  return $._enemyHealth;
};

$.grendel_hurt = function(scene, damage) {
  var t1, t2;
  t1 = {};
  if ($.gtB($.sub($.grendelHealth, damage), 0)) {
    t1.t_0 = 0;
    t2 = scene.get$postrender();
    $.getInterceptor$JSArray(t2).add$1(t2, new $.grendel_hurt_anon(t1));
    $.grendelHealth = $.sub($.grendelHealth, damage);
    $.audio.play$1("hurt");
  } else {
    scene.cleanUp$0();
    $.DeathMenu$();
  }
};

$.showHealthBar = function(scene, enemy_bar) {
  var t1;
  $.grendelHealth = 100;
  $.enemyHealth(100);
  t1 = scene.get$postrender();
  $.getInterceptor$JSArray(t1).add$1(t1, new $.showHealthBar_anon(enemy_bar, 480, 40));
};

$.annotationRender = function(say, callback) {
  var t1 = {};
  t1.p_0 = -800;
  t1.t_1 = 0;
  return new $.annotationRender_anon(t1, say, callback);
};

$.main = function() {
  $.audio = $.Audio$();
  $.ui = $.UISystem$();
  $.assets = $.Assets$(new $.main_anon());
};

$.MenuScreen$ = function() {
  var t1 = new $.MenuScreen(null, $.Random_Random(null), null, null, null, false, null, 1, 0.5, 0.6, 500, 0, -1, 5);
  t1.MenuScreen$0();
  return t1;
};

$.Note$ = function(x, y) {
  var t1 = new $.Note(null, 0.01, "note", null, 60, 60, x, y, 1, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(1, "ff0", 60, null, "note", 60, x, y);
  t1.Note$2(x, y);
  return t1;
};

$.Particle$ = function(x, y, vx, vy, size, color, decay, life, name$, starting_alpha) {
  var t1 = new $.Particle(0, life, decay, starting_alpha, name$, null, size, size, x, y, 1, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(1, color, size, null, name$, size, x, y);
  t1.Particle$10$color$decay$life$name$$starting_alpha(x, y, vx, vy, size, color, decay, life, name$, starting_alpha);
  return t1;
};

$.Scene$ = function() {
  var t1 = new $.Scene(null, null, 1, null, null, $.Vector2$(0, 0), $.List_List(null), $.List_List(null), null);
  t1.Scene$0();
  return t1;
};

$.UISystem$ = function() {
  var t1 = new $.UISystem(null, false, null, null, null, $.CONSTANT3);
  t1.UISystem$0();
  return t1;
};

$.Vector2$ = function(x, y) {
  return new $.Vector2(x, y);
};

$.Warrior$ = function(x, y, color, df) {
  var t1, t2;
  t1 = $.eqB(color, "f00") ? "red warrior" : "warrior";
  t2 = new $.Warrior(null, null, null, null, null, 30, 30, 100, df, null, null, t1, null, 80, 140, x, y, 1, null, true, false);
  t2.Character$8$alpha$color$height$image$name$$width$x$y(1, color, 140, null, t1, 80, x, y);
  t2.Warrior$4(x, y, color, df);
  return t2;
};

$.ArcParticle$ = function(name$, x, y, fadeout, height, power, rotate, rotation, rotation_rate, size_avg, size_dif, width) {
  var t1, t2, t3;
  t1 = width == null ? size_avg : width;
  t2 = height == null ? size_avg : height;
  t3 = new $.ArcParticle(0, 0, null, rotate, fadeout, rotation, rotation_rate, name$, null, t1, t2, x, y, 1, null, true, false);
  t3.Character$8$alpha$color$height$image$name$$width$x$y(1, "888", t2, null, name$, t1, x, y);
  t3.ArcParticle$12$fadeout$height$power$rotate$rotation$rotation_rate$size_avg$size_dif$width(name$, x, y, fadeout, height, power, rotate, rotation, rotation_rate, size_avg, size_dif, width);
  return t3;
};

$.BloodParticle$ = function(x, y, power) {
  var t1 = new $.BloodParticle(0, 0, null, "blood", null, 50, 50, x, y, 1, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(1, "f00", 50, null, "blood", 50, x, y);
  t1.BloodParticle$3(x, y, power);
  return t1;
};

$.CircleBound$ = function(x, y, radius) {
  return new $.CircleBound(radius, 2, x, y);
};

$.DeathMenu$ = function() {
  var t1, t2;
  t1 = {};
  t2 = new $.DeathMenu(null);
  t2.DeathMenu$0(t1);
  return t2;
};

$.DragonPart$ = function(leader, x, y, t) {
  var t1 = new $.DragonPart(t, leader, "Dragon Part", null, 50, 50, x, y, 1, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(1, "f00", 50, null, "Dragon Part", 50, x, y);
  t1.DragonPart$4(leader, x, y, t);
  return t1;
};

$.GearParticle$ = function(x, y, power) {
  var t1 = new $.GearParticle(0, 0, null, "gear particle", null, 50, 50, x, y, 1, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(1, "888", 50, null, "gear particle", 50, x, y);
  t1.GearParticle$3(x, y, power);
  return t1;
};

$.LevelBeowulf$ = function() {
  var t1 = new $.LevelBeowulf(null, null, null, null, null, null, null, null, null, false, false, null, true, 0, false, false, false, $.Random_Random(null), null, null, 0, null, 0, false);
  t1.LevelBeowulf$0();
  return t1;
};

$.LevelBeowulf2$ = function() {
  var t1, t2;
  t1 = {};
  t2 = new $.LevelBeowulf2(500, $.Random_Random(null), null, null, null, false, null, $.List_List(null), null, true, null, 0.01, 0.01, 5, 400, 15, 0, 0, 0);
  t2.LevelBeowulf2$0(t1);
  return t2;
};

$.LevelBull$ = function() {
  var t1 = new $.LevelBull(null, null, null, null, null, null, null, null, true, null, $.Random_Random(null), false, false, 120, 5, 0, 5, 10, 0, false, 0);
  t1.LevelBull$0();
  return t1;
};

$.LevelDragon$ = function() {
  var t1, t2;
  t1 = {};
  t2 = new $.LevelDragon(null, null, null, null, null, 20, false, false, null, null, null, false, false, $.Random_Random(null), $.List_List(null), null, null, null, null, null, $.List_List(null), $.List_List(null));
  t2.LevelDragon$0(t1);
  return t2;
};

$.LevelEnding$ = function() {
  var t1 = new $.LevelEnding($.Random_Random(null), null, null, null, null, null, null, null, 0, 0, null, null, null, null, null);
  t1.LevelEnding$0();
  return t1;
};

$.LevelOrk$ = function() {
  var t1 = new $.LevelOrk(null, null, null, null, null, null, 0, false, null, null, null, null, false, false, $.Random_Random(null), 0, 200, 0, 0, 0, false, 0, 5);
  t1.LevelOrk$0();
  return t1;
};

$.LevelShaper$ = function() {
  var t1 = new $.LevelShaper(null, 0, null, $.Random_Random(null), null, null, false, false, null);
  t1.LevelShaper$0();
  return t1;
};

$.OrkNote$ = function(central, rad) {
  var t1 = new $.OrkNote(true, central, rad, null, null, "note", null, 50, 50, 0, 0, 0, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(0, "0f0", 50, null, "note", 50, 0, 0);
  t1.OrkNote$2(central, rad);
  return t1;
};

$.OrkWarrior$ = function(x, y, target) {
  var t1 = new $.OrkWarrior(target, "warrior", null, 60, 80, x, y, 0, null, true, false);
  t1.Character$8$alpha$color$height$image$name$$width$x$y(0, "f00", 80, null, "warrior", 60, x, y);
  return t1;
};

$.RectBound$ = function(x, y, width, height) {
  return new $.RectBound(width, height, 2, x, y);
};

$.StoneParticle$ = function(x, y, power) {
  var t1, t2, t3, t4;
  t1 = $.sub($.mul($.Random_Random(null).nextDouble$0(), 0.2), 0.1);
  t2 = 30;
  t3 = 30;
  t4 = new $.StoneParticle(0, 0, null, true, true, null, t1, "stone particle", null, t2, t3, x, y, 1, null, true, false);
  t4.Character$8$alpha$color$height$image$name$$width$x$y(1, "888", t3, null, "stone particle", t2, x, y);
  t4.ArcParticle$12$fadeout$height$power$rotate$rotation$rotation_rate$size_avg$size_dif$width("stone particle", x, y, true, null, power, true, null, t1, 30, 10, null);
  return t4;
};

$.Strings__toJsStringArray = function(strings) {
  var t1, length$, i, string, array;
  if (typeof strings !== 'string' && (typeof strings !== 'object' || strings === null || strings.constructor !== Array && !strings.is$JavaScriptIndexingBehavior()))
    return $.Strings__toJsStringArray$bailout(1, strings);
  $.checkNull(strings);
  t1 = $.getInterceptor$JSStringJSArray(strings);
  length$ = strings.length;
  if ($.isJsArray(strings)) {
    for (i = 0; i < length$; ++i) {
      if (i >= strings.length)
        throw $.ioore(i);
      string = strings[i];
      if (!(typeof string === 'string'))
        throw $.$$throw($.ArgumentError$(string));
    }
    array = strings;
  } else {
    array = $.List_List(length$);
    for (i = 0; i < length$; ++i) {
      if (i >= strings.length)
        throw $.ioore(i);
      string = strings[i];
      if (!(typeof string === 'string'))
        throw $.$$throw($.ArgumentError$(string));
      array[i] = string;
    }
  }
  return array;
};

$.Strings__toJsStringArray$bailout = function(state0, env0, env1, env2, env3) {
  switch (state0) {
    case 1:
      strings = env0;
      break;
    case 2:
      length$ = env2;
      t1 = env1;
      strings = env0;
      break;
    case 3:
      length$ = env3;
      t1 = env2;
      array = env1;
      strings = env0;
      break;
  }
  switch (state0) {
    case 0:
    case 1:
      state0 = 0;
      $.checkNull(strings);
      t1 = $.getInterceptor$JSStringJSArray(strings);
      length$ = t1.get$length(strings);
    case 2:
      state0 = 0;
    case 3:
      var strings, t1, length$, i, string, array;
      if (state0 === 0 && $.isJsArray(strings)) {
        for (i = 0; $.ltB(i, length$); ++i) {
          string = t1.operator$index$1(strings, i);
          if (!(typeof string === 'string'))
            throw $.$$throw($.ArgumentError$(string));
        }
        array = strings;
      } else
        switch (state0) {
          case 0:
            array = $.List_List(length$);
          case 3:
            state0 = 0;
            for (i = 0; $.ltB(i, length$); ++i) {
              string = t1.operator$index$1(strings, i);
              if (!(typeof string === 'string'))
                throw $.$$throw($.ArgumentError$(string));
              $.indexSet(array, i, string);
            }
        }
      return array;
  }
};

$.add = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a + b : $.add$slow(a, b);
};

$.sub = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a - b : $.sub$slow(a, b);
};

$.div = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a / b : $.div$slow(a, b);
};

$.mul = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a * b : $.mul$slow(a, b);
};

$.gt = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a > b : $.gt$slow(a, b);
};

$.lt = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a < b : $.lt$slow(a, b);
};

$.gtB = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a > b : $.gt$slow(a, b) === true;
};

$.geB = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a >= b : $.ge$slow(a, b) === true;
};

$.ltB = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a < b : $.lt$slow(a, b) === true;
};

$.leB = function(a, b) {
  return typeof a === 'number' && typeof b === 'number' ? a <= b : $.le$slow(a, b) === true;
};

$.indexSet = function(a, index, value) {
  var key;
  if (a.constructor === Array && !a.immutable$list) {
    key = index >>> 0;
    if (key === index && key < a.length) {
      a[key] = value;
      return;
    }
  }
  $.indexSet$slow(a, index, value);
};

$.checkNumbers = function(a, b) {
  if (typeof a === 'number')
    if (typeof b === 'number')
      return true;
    else
      throw $.$$throw($.ArgumentError$(b));
  return false;
};

$.isJsArray = function(value) {
  return !(value == null) && value.constructor === Array;
};

$.add$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a + b;
  return a.operator$add$1(b);
};

$.div$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a / b;
  return a.operator$div$1(b);
};

$.mul$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a * b;
  return a.operator$mul$1(b);
};

$.sub$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a - b;
  return a.operator$sub$1(b);
};

$.mod = function(a, b) {
  var result;
  if ($.checkNumbers(a, b)) {
    result = a % b;
    if (result === 0)
      return 0;
    if (result > 0)
      return result;
    if (b < 0)
      return result - b;
    else
      return result + b;
  }
  return a.operator$mod$1(b);
};

$.tdiv = function(a, b) {
  if ($.checkNumbers(a, b))
    return $.CONSTANT2.truncate$0(a / b);
  return a.operator$tdiv$1(b);
};

$.eq = function(a, b) {
  if (a == null)
    return b == null;
  if (b == null)
    return false;
  if (typeof a === "object")
    if (!!a.operator$eq$1)
      return a.operator$eq$1(b);
  return a === b;
};

$.eqB = function(a, b) {
  if (a == null)
    return b == null;
  if (b == null)
    return false;
  if (typeof a === "object")
    if (!!a.operator$eq$1)
      return a.operator$eq$1(b) === true;
  return a === b;
};

$.gt$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a > b;
  return a.operator$gt$1(b);
};

$.ge$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a >= b;
  return a.operator$ge$1(b);
};

$.lt$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a < b;
  return a.operator$lt$1(b);
};

$.le$slow = function(a, b) {
  if ($.checkNumbers(a, b))
    return a <= b;
  return a.operator$le$1(b);
};

$.and = function(a, b) {
  if ($.checkNumbers(a, b))
    return (a & b) >>> 0;
  return a.operator$and$1(b);
};

$.neg = function(a) {
  if (typeof a === "number")
    return -a;
  return a.operator$negate$0();
};

$.indexSet$slow = function(a, index, value) {
  if (!(a == null) && a.constructor === Array) {
    if (!(typeof index === 'number' && Math.floor(index) === index))
      throw $.$$throw($.ArgumentError$(index));
    if (index < 0 || $.geB(index, $.getInterceptor$JSStringJSArray(a).get$length(a)))
      throw $.$$throw($.RangeError$value(index));
    $.checkMutable(a, "indexed set");
    a[index] = value;
    return;
  }
  a.operator$indexSet$2(index, value);
};

$.checkMutable = function(list, reason) {
  if (!!(list.immutable$list))
    throw $.$$throw($.UnsupportedError$(reason));
};

$.checkGrowable = function(list, reason) {
  if (!!(list.fixed$length))
    throw $.$$throw($.UnsupportedError$(reason));
};

$.S = function(value) {
  var res = $.getInterceptor(value).toString$0(value);
  if (!(typeof res === 'string'))
    throw $.$$throw($.ArgumentError$(value));
  return res;
};

$.ListIterator$ = function(list) {
  return new $.ListIterator(0, list);
};

$.Primitives_objectHashCode = function(object) {
  var hash = object.$identityHash;
  if (hash == null) {
    hash = $.add($.Primitives_hashCodeSeed, 1);
    $.Primitives_hashCodeSeed = hash;
    object.$identityHash = hash;
  }
  return hash;
};

$.Primitives_objectTypeName = function(object) {
  var name$, decompiled, t1;
  name$ = $.constructorNameFallback(object);
  if ($.eqB(name$, "Object")) {
    decompiled = String(object.constructor).match(/^\s*function\s*(\S*)\s*\(/)[1];
    if (typeof decompiled === 'string')
      name$ = decompiled;
  }
  t1 = $.getInterceptor$JSString(name$);
  return t1.charCodeAt$1(name$, 0) === 36 ? t1.substring$1(name$, 1) : name$;
};

$.Primitives_objectToString = function(object) {
  return "Instance of '" + $.S($.Primitives_objectTypeName(object)) + "'";
};

$.Primitives_newList = function(length$) {
  var result;
  if (length$ == null)
    return new Array();
  if (!(typeof length$ === 'number' && Math.floor(length$) === length$) || length$ < 0)
    throw $.$$throw($.ArgumentError$(length$));
  result = new Array(length$);
  result.fixed$length = true;
  return result;
};

$.iae = function(argument) {
  throw $.$$throw($.ArgumentError$(argument));
};

$.ioore = function(index) {
  throw $.$$throw($.RangeError$value(index));
};

$.checkNull = function(object) {
  if (object == null)
    throw $.$$throw($.ArgumentError$(null));
  return object;
};

$.checkNum = function(value) {
  if (!(typeof value === 'number'))
    throw $.$$throw($.ArgumentError$(value));
  return value;
};

$.checkString = function(value) {
  if (!(typeof value === 'string'))
    throw $.$$throw($.ArgumentError$(value));
  return value;
};

$.$$throw = function(ex) {
  var jsError;
  if (ex == null)
    ex = $.CONSTANT;
  jsError = new Error();
  jsError.name = ex;
  jsError.description = ex;
  jsError.dartException = ex;
  jsError.toString = $.toStringWrapper.call$0;
  throw jsError;
};

$.toStringWrapper = function() {
  var t1 = this.dartException;
  return $.getInterceptor(t1).toString$0(t1);
};

$.unwrapException = function(ex) {
  var message, type, name$, ieErrorCode, ieFacilityNumber, t1;
  if ("dartException" in ex)
    return ex.dartException;
  message = ex.message;
  if (ex instanceof TypeError) {
    type = ex.type;
    name$ = ex.arguments ? ex.arguments[0] : "";
    if (message.indexOf("JSNull") !== -1 || $.eqB(type, "property_not_function") || $.eqB(type, "called_non_callable") || $.eqB(type, "non_object_property_call") || $.eqB(type, "non_object_property_load"))
      return $.NoSuchMethodError$(null, name$, [], $.makeLiteralMap([]), null);
    else if ($.eqB(type, "undefined_method"))
      return $.NoSuchMethodError$("", name$, [], $.makeLiteralMap([]), null);
    ieErrorCode = ex.number & 0xffff;
    ieFacilityNumber = ex.number>>16 & 0x1FFF;
    if (typeof message === 'string')
      if ($.CONSTANT1.endsWith$1(message, "is null") === true || $.CONSTANT1.endsWith$1(message, "is undefined") === true || $.CONSTANT1.endsWith$1(message, "is null or undefined") === true || $.CONSTANT1.endsWith$1(message, "of null") === true)
        return $.NoSuchMethodError$(null, "<unknown>", [], $.makeLiteralMap([]), null);
      else {
        if (message.indexOf(" has no method ") === -1)
          if (message.indexOf(" is not a function") === -1)
            t1 = ieErrorCode === 438 && ieFacilityNumber === 10;
          else
            t1 = true;
        else
          t1 = true;
        if (t1)
          return $.NoSuchMethodError$("", "<unknown>", [], $.makeLiteralMap([]), null);
      }
    return $.Exception_Exception(typeof message === 'string' ? message : "");
  }
  if (ex instanceof RangeError) {
    if (typeof message === 'string' && message.indexOf("call stack") !== -1)
      return $.StackOverflowError$();
    return $.ArgumentError$(null);
  }
  if (typeof InternalError == 'function' && ex instanceof InternalError)
    if (typeof message === 'string' && message === "too much recursion")
      return $.StackOverflowError$();
  return ex;
};

$.makeLiteralMap = function(keyValuePairs) {
  var iterator, result;
  iterator = $.CONSTANT0.iterator$0(keyValuePairs);
  result = $.LinkedHashMap_LinkedHashMap();
  for (; iterator.get$hasNext() === true;)
    $.indexSet(result, iterator.next$0(), iterator.next$0());
  return result;
};

$.invokeClosure = function(closure, isolate, numberOfArguments, arg1, arg2) {
  if ($.eqB(numberOfArguments, 0))
    return new $.invokeClosure_anon(closure).call$0();
  else if ($.eqB(numberOfArguments, 1))
    return new $.invokeClosure_anon0(closure, arg1).call$0();
  else if ($.eqB(numberOfArguments, 2))
    return new $.invokeClosure_anon1(closure, arg1, arg2).call$0();
  else
    throw $.$$throw($.Exception_Exception("Unsupported number of arguments for wrapped closure"));
};

$.convertDartClosureToJS = function(closure, arity) {
  var function$;
  if (closure == null)
    return;
  function$ = closure.$identity;
  if (!!function$)
    return function$;
  function$ = function() {
    return $.invokeClosure.call$5(closure, $, arity, arguments[0], arguments[1]);
  };
  closure.$identity = function$;
  return function$;
};

$.throwCyclicInit = function(staticName) {
  throw $.$$throw($.RuntimeError$("Cyclic initialization for static " + $.S(staticName)));
};

$.typeNameInChrome = function(obj) {
  return $.typeNameInWebKitCommon(obj.constructor.name);
};

$.typeNameInSafari = function(obj) {
  return $.typeNameInWebKitCommon($.constructorNameFallback(obj));
};

$.typeNameInWebKitCommon = function(tag) {
  var name$ = tag;
  if (name$ === "Window")
    return "DOMWindow";
  if (name$ === "CanvasPixelArray")
    return "Uint8ClampedArray";
  if (name$ === "WebKitMutationObserver")
    return "MutationObserver";
  if (name$ === "AudioChannelMerger")
    return "ChannelMergerNode";
  if (name$ === "AudioChannelSplitter")
    return "ChannelSplitterNode";
  if (name$ === "AudioGainNode")
    return "GainNode";
  if (name$ === "AudioPannerNode")
    return "PannerNode";
  if (name$ === "JavaScriptAudioNode")
    return "ScriptProcessorNode";
  if (name$ === "Oscillator")
    return "OscillatorNode";
  if (name$ === "RealtimeAnalyserNode")
    return "AnalyserNode";
  return name$;
};

$.typeNameInOpera = function(obj) {
  var name$ = $.constructorNameFallback(obj);
  if (name$ === "Window")
    return "DOMWindow";
  return name$;
};

$.typeNameInFirefox = function(obj) {
  var name$ = $.constructorNameFallback(obj);
  if (name$ === "Window")
    return "DOMWindow";
  if (name$ === "CSS2Properties")
    return "CSSStyleDeclaration";
  if (name$ === "DataTransfer")
    return "Clipboard";
  if (name$ === "DragEvent")
    return "MouseEvent";
  if (name$ === "GeoGeolocation")
    return "Geolocation";
  if (name$ === "MouseScrollEvent")
    return "WheelEvent";
  if (name$ === "OfflineResourceList")
    return "DOMApplicationCache";
  if (name$ === "WorkerMessageEvent")
    return "MessageEvent";
  if (name$ === "XMLDocument")
    return "Document";
  return name$;
};

$.typeNameInIE = function(obj) {
  var name$ = $.constructorNameFallback(obj);
  if (name$ === "Window")
    return "DOMWindow";
  if (name$ === "Document") {
    if (!!obj.xmlVersion)
      return "Document";
    return "HTMLDocument";
  }
  if (name$ === "ApplicationCache")
    return "DOMApplicationCache";
  if (name$ === "CanvasPixelArray")
    return "Uint8ClampedArray";
  if (name$ === "DataTransfer")
    return "Clipboard";
  if (name$ === "DragEvent")
    return "MouseEvent";
  if (name$ === "HTMLDDElement")
    return "HTMLElement";
  if (name$ === "HTMLDTElement")
    return "HTMLElement";
  if (name$ === "HTMLTableDataCellElement")
    return "HTMLTableCellElement";
  if (name$ === "HTMLTableHeaderCellElement")
    return "HTMLTableCellElement";
  if (name$ === "HTMLPhraseElement")
    return "HTMLElement";
  if (name$ === "MSStyleCSSProperties")
    return "CSSStyleDeclaration";
  if (name$ === "MouseWheelEvent")
    return "WheelEvent";
  if (name$ === "Position")
    return "Geoposition";
  if (name$ === "Object")
    if (window.DataView && (obj instanceof window.DataView))
      return "DataView";
  return name$;
};

$.constructorNameFallback = function(object) {
  var constructor$, name$, t1, string;
  if (object == null)
    return "Null";
  constructor$ = object.constructor;
  if (typeof(constructor$) === "function") {
    name$ = constructor$.name;
    if (typeof name$ === 'string')
      t1 = !(name$ === "") && !(name$ === "Object") && !(name$ === "Function.prototype");
    else
      t1 = false;
    if (t1)
      return name$;
  }
  string = Object.prototype.toString.call(object);
  return string.substring(8, string.length - 1);
};

$.alternateTag = function(object, tag) {
  if (!!/^HTML[A-Z].*Element$/.test(tag)) {
    if (Object.prototype.toString.call(object) === "[object Object]")
      return;
    return "HTMLElement";
  }
  return;
};

$.callHasOwnProperty = function(function$, object, property) {
  return function$.call(object, property);
};

$.getFunctionForTypeNameOf = function() {
  if (!(typeof(navigator) === "object"))
    return $.typeNameInChrome;
  var userAgent = navigator.userAgent;
  if (userAgent.indexOf("Chrome") !== -1 || userAgent.indexOf("DumpRenderTree") !== -1)
    return $.typeNameInChrome;
  else if (userAgent.indexOf("Firefox") !== -1)
    return $.typeNameInFirefox;
  else if (userAgent.indexOf("MSIE") !== -1)
    return $.typeNameInIE;
  else if (userAgent.indexOf("Opera") !== -1)
    return $.typeNameInOpera;
  else if (userAgent.indexOf("AppleWebKit") !== -1)
    return $.typeNameInSafari;
  else
    return $.constructorNameFallback;
};

$.getTypeNameOf = function(obj) {
  if ($._getTypeNameOf == null)
    $._getTypeNameOf = $.getFunctionForTypeNameOf();
  return $._getTypeNameOf.call$1(obj);
};

$.toStringForNativeObject = function(obj) {
  return "Instance of " + $.getTypeNameOf(obj);
};

$.hashCodeForNativeObject = function(object) {
  return $.Primitives_objectHashCode(object);
};

$.defineProperty = function(obj, property, value) {
  Object.defineProperty(obj, property, {value: value, enumerable: false, writable: true, configurable: true});
};

$.dynamicBind = function(obj, name$, methods, arguments$) {
  var tag, hasOwnPropertyFunction, method, secondTag, proto;
  tag = $.getTypeNameOf(obj);
  hasOwnPropertyFunction = Object.prototype.hasOwnProperty;
  method = $.dynamicBindLookup(hasOwnPropertyFunction, tag, methods);
  if (method == null) {
    secondTag = $.alternateTag(obj, tag);
    if (!(secondTag == null))
      method = $.dynamicBindLookup(hasOwnPropertyFunction, secondTag, methods);
  }
  if (method == null)
    method = $.lookupDynamicClass(hasOwnPropertyFunction, methods, $.getTypeNameOf($.CONSTANT8));
  proto = Object.getPrototypeOf(obj);
  if (method == null)
    method = function () {if (Object.getPrototypeOf(this) === proto) {throw new TypeError(name$ + " is not a function");} else {return Object.prototype[name$].apply(this, arguments);}};
  if (!$.callHasOwnProperty(hasOwnPropertyFunction, proto, name$))
    $.defineProperty(proto, name$, method);
  return method.apply(obj, arguments$);
};

$.dynamicBindLookup = function(hasOwnPropertyFunction, tag, methods) {
  var method, i, entry;
  method = $.lookupDynamicClass(hasOwnPropertyFunction, methods, tag);
  if (method == null && !($._dynamicMetadata0() == null))
    for (i = 0; i < $._dynamicMetadata0().length; ++i) {
      entry = $._dynamicMetadata0()[i];
      if ($.callHasOwnProperty(hasOwnPropertyFunction, entry.get$_set(), tag)) {
        method = $.lookupDynamicClass(hasOwnPropertyFunction, methods, entry.get$_tag());
        if (!(method == null))
          break;
      }
    }
  return method;
};

$.lookupDynamicClass = function(hasOwnPropertyFunction, methods, className) {
  return $.callHasOwnProperty(hasOwnPropertyFunction, methods, className) ? methods[className] : null;
};

$.dynamicFunction = function(name$) {
  var f, methods, dartMethod, bind;
  f = Object.prototype[name$];
  if (!(f == null) && !!f.methods)
    return f.methods;
  methods = {};
  dartMethod = Object.getPrototypeOf($.CONSTANT8)[name$];
  if (!(dartMethod == null))
    methods["Object"] = dartMethod;
  bind = function() {return $.dynamicBind.call$4(this, name$, methods, Array.prototype.slice.call(arguments));};
  bind.methods = methods;
  $.defineProperty(Object.prototype, name$, bind);
  return methods;
};

$.MetaInfo$ = function(_tag, _tags, _set) {
  return new $.MetaInfo(_tag, _tags, _set);
};

$._dynamicMetadata0 = function() {
  if (typeof($dynamicMetadata) === "undefined") {
    var t1 = [];
    $._dynamicMetadata(t1);
  }
  return $dynamicMetadata;
};

$._dynamicMetadata = function(table) {
  $dynamicMetadata = table;
};

$.buildDynamicMetadata = function(inputTable) {
  var result, i, tag, tags, set, tagNames, j;
  result = [];
  for (i = 0; i < inputTable.length; ++i) {
    tag = inputTable[i][0];
    tags = inputTable[i][1];
    set = {};
    tagNames = tags.split("|");
    for (j = 0; j < tagNames.length; ++j)
      set[tagNames[j]] = true;
    result.push($.MetaInfo$(tag, tags, set));
  }
  return result;
};

$.dynamicSetMetadata = function(inputTable) {
  var t1 = $.buildDynamicMetadata(inputTable);
  $._dynamicMetadata(t1);
};

$.regExpExec = function(regExp, str) {
  var result = $.regExpGetNative(regExp).exec(str);
  if (result == null)
    return;
  return result;
};

$.regExpTest = function(regExp, str) {
  return $.regExpGetNative(regExp).test(str);
};

$.regExpGetNative = function(regExp) {
  var r = regExp._re;
  return r == null ? regExp._re = $.regExpMakeNative(regExp, false) : r;
};

$.regExpMakeNative = function(regExp, global, exception) {
  var pattern, multiLine, ignoreCase, sb, t1, t2, e;
  pattern = regExp.get$pattern();
  multiLine = regExp.get$multiLine();
  ignoreCase = regExp.get$ignoreCase();
  $.checkString(pattern);
  sb = $.StringBuffer_StringBuffer("");
  if (multiLine === true) {
    t1 = sb;
    $.getInterceptor$JSArray(t1).add$1(t1, "m");
  }
  if (ignoreCase === true) {
    t1 = sb;
    $.getInterceptor$JSArray(t1).add$1(t1, "i");
  }
  if (global === true) {
    t1 = sb;
    $.getInterceptor$JSArray(t1).add$1(t1, "g");
  }
  try {
    t1 = pattern;
    t2 = sb;
    t1 = new RegExp(t1, $.getInterceptor(t2).toString$0(t2));
    return t1;
  } catch (exception) {
    t1 = $.unwrapException(exception);
    e = t1;
    throw $.$$throw($.IllegalJSRegExpException$(pattern, String(e)));
  }

};

$.JSSyntaxRegExp$ = function(pattern, ignoreCase, multiLine) {
  return new $.JSSyntaxRegExp(pattern, multiLine, ignoreCase);
};

$.JSSyntaxRegExp__globalVersionOf = function(other) {
  var t1, t2, re;
  t1 = other.get$pattern();
  t2 = other.get$multiLine();
  re = $.JSSyntaxRegExp$(t1, other.get$ignoreCase(), t2);
  re._re = $.regExpMakeNative(re, true);
  return re;
};

$._MatchImplementation$ = function(pattern, str, start, end, _groups) {
  return new $._MatchImplementation(pattern, str, start, end, _groups);
};

$._AllMatchesIterable$ = function(_re, _str) {
  return new $._AllMatchesIterable(_re, _str);
};

$._AllMatchesIterator$ = function(re, _str) {
  return new $._AllMatchesIterator($.JSSyntaxRegExp__globalVersionOf(re), _str, null, false);
};

$.StringMatch$ = function(start, str, pattern) {
  return new $.StringMatch(start, str, pattern);
};

$.allMatchesInStringUnchecked = function(needle, haystack) {
  var result, t1, length$, patternLength, startIndex, position, endIndex;
  result = $.List_List(null);
  t1 = $.getInterceptor$JSStringJSArray(haystack);
  length$ = t1.get$length(haystack);
  patternLength = needle.length;
  for (startIndex = 0; true;) {
    position = t1.indexOf$2(haystack, needle, startIndex);
    if ($.eqB(position, -1))
      break;
    result.push($.StringMatch$(position, haystack, needle));
    endIndex = $.add(position, patternLength);
    if ($.eqB(endIndex, length$))
      break;
    else
      startIndex = $.eqB(position, endIndex) ? $.add(startIndex, 1) : endIndex;
  }
  return result;
};

$.stringContainsUnchecked = function(receiver, other, startIndex) {
  var substr, t1;
  if (typeof other === 'string')
    return !$.eqB($.CONSTANT1.indexOf$2(receiver, other, startIndex), -1);
  else if (typeof other === 'object' && other !== null && !!other.is$JSSyntaxRegExp)
    return other.hasMatch$1($.CONSTANT1.substring$1(receiver, startIndex));
  else {
    substr = $.CONSTANT1.substring$1(receiver, startIndex);
    t1 = $.getInterceptor$JSString(other).allMatches$1(other, substr);
    return $.getInterceptor$JSArray(t1).iterator$0(t1).get$hasNext();
  }
};

$.stringReplaceJS = function(receiver, replacer, to) {
  return receiver.replace(replacer, to.replace('$', '$$$$'));
};

$.stringReplaceAllUnchecked = function(receiver, from, to) {
  var result, length$, t1, i;
  if (from === "")
    if (receiver === "")
      return to;
    else {
      result = $.StringBuffer_StringBuffer("");
      length$ = receiver.length;
      t1 = $.getInterceptor$JSArray(result);
      t1.add$1(result, to);
      for (i = 0; i < length$; ++i) {
        if (i >= receiver.length)
          throw $.ioore(i);
        t1.add$1(result, receiver[i]);
        t1.add$1(result, to);
      }
      return t1.toString$0(result);
    }
  else
    return $.stringReplaceJS(receiver, $.regExpMakeNative($.JSSyntaxRegExp$(from.replace($.regExpMakeNative($.get$quoteRegExp(), true), "\\$&"), false, false), true), to);
};

$.stringJoinUnchecked = function(array, separator) {
  return array.join(separator);
};

$.Arrays_copy = function(src, srcStart, dst, dstStart, count) {
  var i, j, t1, t2, t3;
  if (typeof dst !== 'object' || dst === null || (dst.constructor !== Array || !!dst.immutable$list) && !dst.is$JavaScriptIndexingBehavior())
    return $.Arrays_copy$bailout(1, src, srcStart, dst, dstStart, count);
  if (srcStart < dstStart)
    for (i = srcStart + count - 1, j = dstStart + count - 1, t1 = src.length, t2 = dst.length; i >= srcStart; --i, --j) {
      if (i < 0 || i >= t1)
        throw $.ioore(i);
      t3 = src[i];
      if (j < 0 || j >= t2)
        throw $.ioore(j);
      dst[j] = t3;
    }
  else
    for (t1 = src.length, t2 = dst.length, j = dstStart, i = srcStart; i < srcStart + count; ++i, ++j) {
      if (i < 0 || i >= t1)
        throw $.ioore(i);
      t3 = src[i];
      if (j < 0 || j >= t2)
        throw $.ioore(j);
      dst[j] = t3;
    }
};

$.Arrays_copy$bailout = function(state0, src, srcStart, dst, dstStart, count) {
  var i, j;
  if (srcStart < dstStart)
    for (i = srcStart + count - 1, j = dstStart + count - 1; i >= srcStart; --i, --j) {
      if (i < 0 || i >= src.length)
        throw $.ioore(i);
      $.indexSet(dst, j, src[i]);
    }
  else
    for (j = dstStart, i = srcStart; i < srcStart + count; ++i, ++j) {
      if (i < 0 || i >= src.length)
        throw $.ioore(i);
      $.indexSet(dst, j, src[i]);
    }
};

$.Arrays_indexOf = function(a, element, startIndex, endIndex) {
  var i;
  if (startIndex >= a.length)
    return -1;
  if (startIndex < 0)
    startIndex = 0;
  for (i = startIndex; i < endIndex; ++i) {
    if (i < 0 || i >= a.length)
      throw $.ioore(i);
    if ($.eqB(a[i], element))
      return i;
  }
  return -1;
};

$.Collections_forEach = function(iterable, f) {
  var t1;
  for (t1 = $.getInterceptor$JSArray(iterable).iterator$0(iterable); t1.get$hasNext() === true;)
    f.call$1(t1.next$0());
};

$.Collections_some = function(iterable, f) {
  var t1;
  for (t1 = $.getInterceptor$JSArray(iterable).iterator$0(iterable); t1.get$hasNext() === true;)
    if (f.call$1(t1.next$0()) === true)
      return true;
  return false;
};

$.Collections_map = function(source, destination, f) {
  var t1;
  for (t1 = $.getInterceptor$JSArray(source).iterator$0(source); t1.get$hasNext() === true;)
    destination.push(f.call$1(t1.next$0()));
  return destination;
};

$.Collections_filter = function(source, destination, f) {
  var t1, t2;
  for (t1 = $.getInterceptor$JSArray(source).iterator$0(source); t1.get$hasNext() === true;) {
    t2 = t1.next$0();
    if (f.call$1(t2) === true)
      destination.push(t2);
  }
  return destination;
};

$.Collections_collectionToString = function(c) {
  var result = $.StringBuffer_StringBuffer("");
  $.Collections__emitCollection(c, result, $.List_List(null));
  return $.getInterceptor(result).toString$0(result);
};

$.Collections__emitCollection = function(c, result, visiting) {
  var t1, isList, t2, t3, first, t4;
  t1 = $.getInterceptor$JSArray(visiting);
  t1.add$1(visiting, c);
  isList = typeof c === 'object' && c !== null && (c.constructor === Array || c.is$List());
  t2 = $.getInterceptor$JSArray(result);
  t2.add$1(result, isList ? "[" : "{");
  for (t3 = $.getInterceptor$JSArray(c).iterator$0(c), first = true; t3.get$hasNext() === true; first = false) {
    t4 = t3.next$0();
    if (!first)
      t2.add$1(result, ", ");
    $.Collections__emitObject(t4, result, visiting);
  }
  t2.add$1(result, isList ? "]" : "}");
  t1.removeLast$0(visiting);
};

$.Collections__emitObject = function(o, result, visiting) {
  var t1;
  if (typeof o === 'object' && o !== null && (o.constructor === Array || o.is$Collection()))
    if ($.Collections__containsRef(visiting, o)) {
      t1 = $.getInterceptor$JSArray(result);
      t1.add$1(result, typeof o === 'object' && o !== null && (o.constructor === Array || o.is$List()) ? "[...]" : "{...}");
    } else
      $.Collections__emitCollection(o, result, visiting);
  else if (typeof o === 'object' && o !== null && o.is$Map())
    if ($.Collections__containsRef(visiting, o))
      $.getInterceptor$JSArray(result).add$1(result, "{...}");
    else
      $.Maps__emitMap(o, result, visiting);
  else
    $.getInterceptor$JSArray(result).add$1(result, o);
};

$.Collections__containsRef = function(c, ref) {
  var t1, t2;
  for (t1 = $.getInterceptor$JSArray(c).iterator$0(c); t1.get$hasNext() === true;) {
    t2 = t1.next$0();
    if (t2 == null ? ref == null : t2 === ref)
      return true;
  }
  return false;
};

$.Maps_mapToString = function(m) {
  var result = $.StringBuffer_StringBuffer("");
  $.Maps__emitMap(m, result, $.List_List(null));
  return $.getInterceptor(result).toString$0(result);
};

$.Maps__emitMap = function(m, result, visiting) {
  var t1, t2, t3;
  t1 = {};
  t2 = $.getInterceptor$JSArray(visiting);
  t2.add$1(visiting, m);
  t3 = $.getInterceptor$JSArray(result);
  t3.add$1(result, "{");
  t1.first_0 = true;
  $.getInterceptor$JSArray(m).forEach$1(m, new $.Maps__emitMap_anon(t1, result, visiting));
  t3.add$1(result, "}");
  t2.removeLast$0(visiting);
};

$.Error_safeToString = function(object) {
  var t1;
  if (typeof object === 'number' && Math.floor(object) === object || typeof object === 'number' || typeof object === 'boolean' || null == object)
    return $.getInterceptor(object).toString$0(object);
  if (typeof object === 'string') {
    t1 = $.CONSTANT1.replaceAll$2(object, "\\", "\\\\");
    t1 = $.getInterceptor$JSString(t1).replaceAll$2(t1, "\n", "\\n");
    t1 = $.getInterceptor$JSString(t1).replaceAll$2(t1, "\r", "\\r");
    return "\"" + $.S($.getInterceptor$JSString(t1).replaceAll$2(t1, "\"", "\\\"")) + "\"";
  }
  return $.Primitives_objectToString(object);
};

$.ArgumentError$ = function(message) {
  return new $.ArgumentError(message);
};

$.RangeError$value = function(value) {
  return new $.RangeError("value " + $.S(value));
};

$.NoSuchMethodError$ = function(_receiver, _memberName, _arguments, _namedArguments, existingArgumentNames) {
  return new $.NoSuchMethodError(_receiver, _memberName, _arguments, _namedArguments, existingArgumentNames);
};

$.UnsupportedError$ = function(message) {
  return new $.UnsupportedError(message);
};

$.StateError$ = function(message) {
  return new $.StateError(message);
};

$.StackOverflowError$ = function() {
  return new $.StackOverflowError();
};

$.RuntimeError$ = function(message) {
  return new $.RuntimeError(message);
};

$.Exception_Exception = function(message) {
  return $._ExceptionImplementation$(message);
};

$._ExceptionImplementation$ = function(message) {
  return new $._ExceptionImplementation(message);
};

$.FormatException$ = function(message) {
  return new $.FormatException(message);
};

$.IllegalJSRegExpException$ = function(_pattern, _errmsg) {
  return new $.IllegalJSRegExpException(_pattern, _errmsg);
};

$.List_List = function(length$) {
  return $.Primitives_newList(length$);
};

$.HashMap_HashMap = function() {
  return $._HashMapImpl$();
};

$.LinkedHashMap_LinkedHashMap = function() {
  return $._LinkedHashMapImpl$();
};

$._HashMapImpl$ = function() {
  var t1 = new $._HashMapImpl(null, null, null, null, null);
  t1._HashMapImpl$0();
  return t1;
};

$._HashMapImpl__computeLoadLimit = function(capacity) {
  return $.tdiv(capacity * 3, 4);
};

$._HashMapImpl__nextProbe = function(currentProbe, numberOfProbes, length$) {
  return $.and($.add(currentProbe, numberOfProbes), $.sub(length$, 1));
};

$._KeyValuePair$ = function(key, value) {
  return new $._KeyValuePair(key, value);
};

$._LinkedHashMapImpl$ = function() {
  var t1 = new $._LinkedHashMapImpl(null, null);
  t1._LinkedHashMapImpl$0();
  return t1;
};

$.Queue_Queue = function() {
  return $.DoubleLinkedQueue$();
};

$.DoubleLinkedQueueEntry$ = function(e) {
  var t1 = new $.DoubleLinkedQueueEntry(null, null, null);
  t1.DoubleLinkedQueueEntry$1(e);
  return t1;
};

$._DoubleLinkedQueueEntrySentinel$ = function() {
  var t1 = new $._DoubleLinkedQueueEntrySentinel(null, null, null);
  t1.DoubleLinkedQueueEntry$1(null);
  t1._DoubleLinkedQueueEntrySentinel$0();
  return t1;
};

$.DoubleLinkedQueue$ = function() {
  var t1 = new $.DoubleLinkedQueue(null);
  t1.DoubleLinkedQueue$0();
  return t1;
};

$._DoubleLinkedQueueIterator$ = function(_sentinel) {
  var t1 = new $._DoubleLinkedQueueIterator(_sentinel, null);
  t1._DoubleLinkedQueueIterator$1(_sentinel);
  return t1;
};

$.RegExp_RegExp = function(pattern, ignoreCase, multiLine) {
  return $.JSSyntaxRegExp$(pattern, ignoreCase, multiLine);
};

$.StringBuffer_StringBuffer = function(content$) {
  return $._StringBufferImpl$(content$);
};

$._StringBufferImpl$ = function(content$) {
  var t1 = new $._StringBufferImpl(null, null);
  t1._StringBufferImpl$1(content$);
  return t1;
};

$.window = function() {
  return window;
};

$.document = function() {
  return document;
};

$.BodyElementEvents$ = function(_ptr) {
  return new $.BodyElementEvents(_ptr);
};

$.CanvasElement_CanvasElement = function(height, width) {
  var e = $.document().$$dom_createElement$1("canvas");
  if (!(width == null))
    e.set$width(width);
  if (!(height == null))
    e.set$height(height);
  return e;
};

$._browserPrefix = function() {
  if ($._cachedBrowserPrefix == null)
    if ($._Device_isFirefox() === true)
      $._cachedBrowserPrefix = "-moz-";
    else if ($._Device_isIE() === true)
      $._cachedBrowserPrefix = "-ms-";
    else if ($._Device_isOpera() === true)
      $._cachedBrowserPrefix = "-o-";
    else
      $._cachedBrowserPrefix = "-webkit-";
  return $._cachedBrowserPrefix;
};

$.DocumentEvents$ = function(_ptr) {
  return new $.DocumentEvents(_ptr);
};

$.ElementEvents$ = function(_ptr) {
  return new $.ElementEvents(_ptr);
};

$.Events$ = function(_ptr) {
  return new $.Events(_ptr);
};

$.EventListenerList$ = function(_ptr, _type) {
  return new $.EventListenerList(_ptr, _type);
};

$.FrameSetElementEvents$ = function(_ptr) {
  return new $.FrameSetElementEvents(_ptr);
};

$.ImageElement_ImageElement = function(height, src, width) {
  var e = $.document().$$dom_createElement$1("img");
  if (!(src == null))
    e.set$src(src);
  if (!(width == null))
    e.set$width(width);
  if (!(height == null))
    e.set$height(height);
  return e;
};

$.InputElementEvents$ = function(_ptr) {
  return new $.InputElementEvents(_ptr);
};

$.MediaElementEvents$ = function(_ptr) {
  return new $.MediaElementEvents(_ptr);
};

$._ChildNodeListLazy$ = function(_this) {
  return new $._ChildNodeListLazy(_this);
};

$.WindowEvents$ = function(_ptr) {
  return new $.WindowEvents(_ptr);
};

$._Device_userAgent = function() {
  return $.window().get$navigator().get$userAgent();
};

$._Device_isOpera = function() {
  var t1 = $._Device_userAgent();
  return $.getInterceptor$JSString(t1).contains$2(t1, "Opera", 0);
};

$._Device_isIE = function() {
  var t1, t2;
  if ($._Device_isOpera() !== true) {
    t1 = $._Device_userAgent();
    t2 = $.getInterceptor$JSString(t1).contains$2(t1, "MSIE", 0) === true;
    t1 = t2;
  } else
    t1 = false;
  return t1;
};

$._Device_isFirefox = function() {
  var t1 = $._Device_userAgent();
  return $.getInterceptor$JSString(t1).contains$2(t1, "Firefox", 0);
};

$._convertNativeToDart_EventTarget = function(e) {
  if ("setInterval" in e)
    return $._DOMWindowCrossFrame__createSafe(e);
  else
    return e;
};

$._DOMWindowCrossFrame$ = function(_window) {
  return new $._DOMWindowCrossFrame(_window);
};

$._DOMWindowCrossFrame__createSafe = function(w) {
  var t1 = $.window();
  if (w == null ? t1 == null : w === t1)
    return w;
  else
    return $._DOMWindowCrossFrame$(w);
};

$.FixedSizeListIterator$ = function(array) {
  return new $.FixedSizeListIterator($.getInterceptor$JSStringJSArray(array).get$length(array), array, 0);
};

$.Lists_indexOf = function(a, element, startIndex, endIndex) {
  var i;
  if (typeof a !== 'string' && (typeof a !== 'object' || a === null || a.constructor !== Array && !a.is$JavaScriptIndexingBehavior()))
    return $.Lists_indexOf$bailout(1, a, element, startIndex, endIndex);
  if (typeof startIndex !== 'number')
    return $.Lists_indexOf$bailout(1, a, element, startIndex, endIndex);
  if (typeof endIndex !== 'number')
    return $.Lists_indexOf$bailout(1, a, element, startIndex, endIndex);
  if (startIndex >= a.length)
    return -1;
  if (startIndex < 0)
    startIndex = 0;
  for (i = startIndex; i < endIndex; ++i) {
    if (i !== (i | 0))
      throw $.iae(i);
    if (i < 0 || i >= a.length)
      throw $.ioore(i);
    if ($.eqB(a[i], element))
      return i;
  }
  return -1;
};

$.Lists_indexOf$bailout = function(state0, a, element, startIndex, endIndex) {
  var t1, i;
  t1 = $.getInterceptor$JSStringJSArray(a);
  if ($.geB(startIndex, t1.get$length(a)))
    return -1;
  if ($.ltB(startIndex, 0))
    startIndex = 0;
  for (i = startIndex; $.ltB(i, endIndex); i = $.add(i, 1))
    if ($.eqB(t1.operator$index$1(a, i), element))
      return i;
  return -1;
};

$.Lists_getRange = function(a, start, length$, accumulator) {
  var end, i;
  if (typeof a !== 'string' && (typeof a !== 'object' || a === null || a.constructor !== Array && !a.is$JavaScriptIndexingBehavior()))
    return $.Lists_getRange$bailout(1, a, start, length$, accumulator);
  if (length$ < 0)
    throw $.$$throw($.ArgumentError$("length"));
  if (start < 0)
    throw $.$$throw($.RangeError$value(start));
  end = start + length$;
  if (end > a.length)
    throw $.$$throw($.RangeError$value(end));
  for (i = start; i < end; ++i) {
    if (i >= a.length)
      throw $.ioore(i);
    accumulator.push(a[i]);
  }
  return accumulator;
};

$.Lists_getRange$bailout = function(state0, a, start, length$, accumulator) {
  var end, t1, i;
  if (length$ < 0)
    throw $.$$throw($.ArgumentError$("length"));
  if (start < 0)
    throw $.$$throw($.RangeError$value(start));
  end = start + length$;
  t1 = $.getInterceptor$JSStringJSArray(a);
  if ($.gtB(end, t1.get$length(a)))
    throw $.$$throw($.RangeError$value(end));
  for (i = start; i < end; ++i)
    accumulator.push(t1.operator$index$1(a, i));
  return accumulator;
};

$.atan2 = function(a, b) {
  return Math.atan2($.checkNum(a), $.checkNum(b));
};

$.pow = function(x, exponent) {
  $.checkNum(x);
  $.checkNum(exponent);
  return Math.pow(x, exponent);
};

$.sin = function(x) {
  return Math.sin($.checkNum(x));
};

$.cos = function(x) {
  return Math.cos($.checkNum(x));
};

$.sqrt = function(x) {
  return Math.sqrt($.checkNum(x));
};

$.Random_Random = function(seed) {
  return $.CONSTANT6;
};

$.toStringWrapper.call$0 = $.toStringWrapper;
$.toStringWrapper.$name = "toStringWrapper";
$.invokeClosure.call$5 = $.invokeClosure;
$.invokeClosure.$name = "invokeClosure";
$.typeNameInChrome.call$1 = $.typeNameInChrome;
$.typeNameInChrome.$name = "typeNameInChrome";
$.typeNameInSafari.call$1 = $.typeNameInSafari;
$.typeNameInSafari.$name = "typeNameInSafari";
$.typeNameInOpera.call$1 = $.typeNameInOpera;
$.typeNameInOpera.$name = "typeNameInOpera";
$.typeNameInFirefox.call$1 = $.typeNameInFirefox;
$.typeNameInFirefox.$name = "typeNameInFirefox";
$.typeNameInIE.call$1 = $.typeNameInIE;
$.typeNameInIE.$name = "typeNameInIE";
$.constructorNameFallback.call$1 = $.constructorNameFallback;
$.constructorNameFallback.$name = "constructorNameFallback";
$.dynamicBind.call$4 = $.dynamicBind;
$.dynamicBind.$name = "dynamicBind";
Isolate.$finishClasses($$);
$$ = {};
$.$int = {builtin$cls: '$int'};
$.String = {builtin$cls: 'String'};
$.Node = {builtin$cls: 'Node'};
$.Match = {builtin$cls: 'Match'};
$.Function = {builtin$cls: 'Function'};
$.CONSTANT4 = new Isolate.$isolateProperties.JSInt();
$.CONSTANT7 = new Isolate.$isolateProperties.JSDouble();
$.CONSTANT1 = new Isolate.$isolateProperties.JSString();
$.CONSTANT = new Isolate.$isolateProperties.NullThrownError();
$.CONSTANT5 = new Isolate.$isolateProperties._DeletedKeySentinel();
$.CONSTANT6 = new Isolate.$isolateProperties._Random();
$.CONSTANT8 = new Isolate.$isolateProperties.Object();
Isolate.makeConstantList = function(list) {
  list.immutable$list = true;
  list.fixed$length = true;
  return list;
};
$.CONSTANT9 = Isolate.makeConstantList(["backspace", "enter", "shift", "ctrl", "alt", "capslock", "esc", "space", "_0", "zero", "_1", "one", "_2", "two", "_3", "three", "_4", "four", "_5", "five", "_6", "six", "_7", "seven", "_8", "eight", "_9", "nine", "a", "b", "c", "d", "e", "f", "g", "h", "i", "j", "k", "l", "m", "n", "o", "p", "q", "r", "s", "t", "u", "v", "w", "x", "y", "z", "semicolon", "equal", "comma", "hyphen", "dash", "minus", "period", "dot", "slash", "forwardslash", "grave", "backtick", "bracketleft", "backslash", "bracketright", "singlequote", "exclamation", "at", "ampersat", "pound", "dollar", "mod", "modulo", "percent", "caret", "ampersand", "asterisk", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "colon", "plus", "pointbracketleft", "trianglebracketleft", "underscore", "pointbracketright", "trianglebracketright", "question", "questionmark", "approx", "tilde", "curleybraceleft", "pipe", "curleybraceright", "doublequote", "left", "up", "right", "down", "F1", "F2", "F3", "F4", "F5", "F6", "F7", "F8", "F9", "F10", "F11", "F12"]);
$.CONSTANT3 = new Isolate.$isolateProperties.ConstantMap(138, {backspace: 8, enter: 13, shift: 16, ctrl: 17, alt: 18, capslock: 20, esc: 27, space: 32, _0: 48, zero: 48, _1: 49, one: 49, _2: 50, two: 50, _3: 51, three: 51, _4: 52, four: 52, _5: 53, five: 53, _6: 54, six: 54, _7: 55, seven: 55, _8: 56, eight: 56, _9: 57, nine: 57, a: 65, b: 66, c: 67, d: 68, e: 69, f: 70, g: 71, h: 72, i: 73, j: 74, k: 75, l: 76, m: 77, n: 78, o: 79, p: 80, q: 81, r: 82, s: 83, t: 84, u: 85, v: 86, w: 87, x: 88, y: 89, z: 90, semicolon: 186, equal: 187, comma: 188, hyphen: 189, dash: 189, minus: 189, period: 190, dot: 190, slash: 191, forwardslash: 191, grave: 192, backtick: 192, bracketleft: 219, backslash: 220, bracketright: 221, singlequote: 222, exclamation: 49, at: 50, ampersat: 50, pound: 51, dollar: 52, mod: 53, modulo: 53, percent: 53, caret: 54, ampersand: 55, asterisk: 56, A: 65, B: 66, C: 67, D: 68, E: 69, F: 70, G: 71, H: 72, I: 73, J: 74, K: 75, L: 76, M: 77, N: 78, O: 79, P: 80, Q: 81, R: 82, S: 83, T: 84, U: 85, V: 86, W: 87, X: 88, Y: 89, Z: 90, colon: 186, plus: 187, pointbracketleft: 188, trianglebracketleft: 188, underscore: 189, pointbracketright: 190, trianglebracketright: 190, question: 191, questionmark: 191, approx: 192, tilde: 192, curleybraceleft: 219, pipe: 220, curleybraceright: 221, doublequote: 222, left: 37, up: 38, right: 39, down: 40, F1: 112, F2: 113, F3: 114, F4: 115, F5: 116, F6: 117, F7: 118, F8: 119, F9: 120, F10: 121, F11: 122, F12: 123}, Isolate.$isolateProperties.CONSTANT9);
$.CONSTANT0 = new Isolate.$isolateProperties.JSArray();
$.CONSTANT2 = new Isolate.$isolateProperties.JSNumber();
$.lastLevel = "main";
$.grendelHealth = 100;
$._enemyHealth = 100;
$.healthBarOn = true;
$.FPS = 60;
$.ZODIAC_TIME = 30;
$.DEBUG_MODE = false;
$.HUMAN_SIZE_X = 80;
$.GAME_SIZE_X = 1920;
$.GAME_SIZE_Y = 994;
$.GRENDEL_SIZE_Y = 100;
$.TREE_SIZE_X = 200;
$.TREE_SIZE_Y = 266;
$.BUSH_SIZE_X = 150;
$.BUSH_SIZE_Y = 80;
$.Animation_RUN_UP = 2;
$.Animation_RUN_SIDE = 1;
$.Animation_STAND = 0;
$.Animation_RUN_DOWN = 3;
$.GRENDEL_SIZE_X = 70;
$.ANIM_TIME = 4;
$.Animation_ANIM_4DIRECTION = 0;
$.GOLD_SIZE_Y = 80;
$.Animation_ANIM_2FRAME_CUBE = 1;
$.BULL_SIZE_Y = 100;
$.Animation_ANIM_4DIRECTION_2FRAME = 2;
$.Animation_ANIM_4DIRECTION_4FRAME = 3;
$.Animation_ANIM_3FRAME = 4;
$.Animation_ANIM_STANDLR = 5;
$.Animation_ANIM_2FRAME = 6;
$.HUMAN_SIZE_Y = 140;
$.GOLD_SIZE_X = 60;
$.OrkWarrior_SPEED = 5;
$.LevelBull_AREA = 500;
$._HashMapImpl__DELETED_KEY = Isolate.$isolateProperties.CONSTANT5;
$._HashMapImpl__INITIAL_CAPACITY = 8;
$.BULL_SIZE_X = 140;
$.Primitives_hashCodeSeed = 0;
$.Primitives_DOLLAR_CHAR_VALUE = 36;
$._getTypeNameOf = null;
$._cachedBrowserPrefix = null;
$.LevelDragon_DRAGON_SPEED = 5;
$.LevelDragon_AREA_SIZE = 750;
$.PI = 3.141592653589793;
$.ui = null;
$.assets = null;
$.audio = null;
$.getInterceptor$JSStringJSArray = function(receiver) {
  if (typeof receiver == 'string')
    return $.JSString.prototype;
  if (receiver == null)
    return void 0;
  if (receiver.constructor == Array)
    return $.JSArray.prototype;
  return $.ObjectInterceptor.prototype;
};
$.getInterceptor$JSString = function(receiver) {
  if (typeof receiver == 'string')
    return $.JSString.prototype;
  if (receiver == null)
    return void 0;
  return $.ObjectInterceptor.prototype;
};
$.getInterceptor$JSNumber = function(receiver) {
  if (typeof receiver == 'number')
    return $.JSNumber.prototype;
  if (receiver == null)
    return void 0;
  return $.ObjectInterceptor.prototype;
};
$.getInterceptor = function(receiver) {
  if (typeof receiver == 'number') {
    if (Math.floor(receiver) == receiver)
      return $.JSInt.prototype;
    return $.JSDouble.prototype;
  }
  if (typeof receiver == 'string')
    return $.JSString.prototype;
  if (receiver == null)
    return $.JSNull.prototype;
  if (typeof receiver == 'function')
    return $.JSFunction.prototype;
  if (typeof receiver == 'boolean')
    return $.JSBool.prototype;
  if (receiver.constructor == Array)
    return $.JSArray.prototype;
  return $.ObjectInterceptor.prototype;
};
$.getInterceptor$JSArray = function(receiver) {
  if (receiver == null)
    return void 0;
  if (receiver.constructor == Array)
    return $.JSArray.prototype;
  return $.ObjectInterceptor.prototype;
};
Isolate.$lazy($, 'quoteRegExp', 'quoteRegExp', 'get$quoteRegExp', function() {
  return $.JSSyntaxRegExp$("[-[\\]{}()*+?.,\\\\^$|#\\s]", false, false);
});
var $ = null;
Isolate.$finishClasses($$);
$$ = {};
Isolate = Isolate.$finishIsolateConstructor(Isolate);
var $ = new Isolate();
$.$defineNativeClass = function(cls, desc) {
  var fields = desc[''];
  var fields_array = fields ? fields.split(',') : [];
  for (var i = 0; i < fields_array.length; i++) {
    $.$generateAccessor(fields_array[i], desc);
  }
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  for (var method in desc) {
    if (method) {        if (hasOwnProperty.call(desc, method)) {
        $.dynamicFunction(method)[cls] = desc[method];
      }
    }
  }
};

(function(table) {
  for (var key in table) {
    $.defineProperty(Object.prototype, key, table[key]);
  }
})({
 toString$0: function() { return $.toStringForNativeObject(this); },
 get$hashCode: function() { return $.hashCodeForNativeObject(this); },
 is$Collection: function() { return false; },
 is$JavaScriptIndexingBehavior: function() { return false; },
 is$Map: function() { return false; },
 is$List: function() { return false; }
});

$.$defineNativeClass('HTMLAnchorElement', {"":"name>,target=",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('HTMLAppletElement', {"":"height=,name>,width="
});

$.$defineNativeClass('HTMLAreaElement', {"":"target="
});

$.$defineNativeClass('Attr', {"":"name>,value="
});

$.$defineNativeClass('HTMLBaseElement', {"":"target="
});

$.$defineNativeClass('HTMLBodyElement', {
 get$on: function() {
  return $.BodyElementEvents$(this);
}
});

$.$defineNativeClass('HTMLButtonElement', {"":"name>,value="
});

$.$defineNativeClass('HTMLCanvasElement', {"":"height=,width=",
 getContext$1: function(contextId) {
  return this.getContext(contextId);
}
});

$.$defineNativeClass('CanvasRenderingContext2D', {"":"fillStyle<,font<,globalAlpha<,textAlign<",
 arc$6: function(x, y, radius, startAngle, endAngle, anticlockwise) {
  return this.arc(x,y,radius,startAngle,endAngle,anticlockwise);
},
 beginPath$0: function() {
  return this.beginPath();
},
 closePath$0: function() {
  return this.closePath();
},
 drawImage$9: function(canvas_OR_image_OR_video, sx_OR_x, sy_OR_y, sw_OR_width, height_OR_sh, dx, dy, dw, dh) {
  return this.drawImage(canvas_OR_image_OR_video,sx_OR_x,sy_OR_y,sw_OR_width,height_OR_sh,dx,dy,dw,dh);
},
 drawImage$3: function(canvas_OR_image_OR_video, sx_OR_x, sy_OR_y) {
  return this.drawImage(canvas_OR_image_OR_video, sx_OR_x, sy_OR_y);
},
 drawImage$5: function(canvas_OR_image_OR_video, sx_OR_x, sy_OR_y, sw_OR_width, height_OR_sh) {
  return this.drawImage(canvas_OR_image_OR_video, sx_OR_x, sy_OR_y, sw_OR_width, height_OR_sh);
},
 fill$0: function() {
  return this.fill();
},
 fillRect$4: function(x, y, width, height) {
  return this.fillRect(x,y,width,height);
},
 fillText$4: function(text, x, y, maxWidth) {
  return this.fillText(text,x,y,maxWidth);
},
 fillText$3: function(text, x, y) {
  return this.fillText(text, x, y);
},
 restore$0: function() {
  return this.restore();
},
 rotate$1: function(angle) {
  return this.rotate(angle);
},
 save$0: function() {
  return this.save();
},
 scale$2: function(sx, sy) {
  return this.scale(sx,sy);
},
 translate$2: function(tx, ty) {
  return this.translate(tx,ty);
}
});

$.$defineNativeClass('CharacterData', {"":"length>",
 remove$0: function() {
  return this.remove();
}
});

$.$defineNativeClass('CSSStyleDeclaration', {"":"length>",
 _getPropertyValue$1: function(propertyName) {
  return this.getPropertyValue(propertyName);
},
 getPropertyValue$1: function(propertyName) {
  var propValue = this._getPropertyValue$1(propertyName);
  return !(propValue == null) ? propValue : "";
},
 setProperty$3: function(propertyName, value, priority) {
  this.setProperty(propertyName, value, priority);
  if (!!this.setAttribute)
    this.setAttribute(propertyName, value);
},
 get$clear: function() {
  return this.getPropertyValue$1("clear");
},
 clear$0: function() {
  return this.get$clear().call$0();
},
 get$filter: function() {
  return this.getPropertyValue$1($.S($._browserPrefix()) + "filter");
},
 filter$1: function(arg0) {
  return this.get$filter().call$1(arg0);
},
 set$font: function(value) {
  this.setProperty$3("font", value, "");
},
 get$height: function() {
  return this.getPropertyValue$1("height");
},
 set$height: function(value) {
  this.setProperty$3("height", value, "");
},
 set$src: function(value) {
  this.setProperty$3("src", value, "");
},
 set$textAlign: function(value) {
  this.setProperty$3("text-align", value, "");
},
 get$width: function() {
  return this.getPropertyValue$1("width");
},
 set$width: function(value) {
  this.setProperty$3("width", value, "");
}
});

$.$defineNativeClass('DeviceOrientationEvent', {"":"alpha>"
});

$.$defineNativeClass('Document', {"":"$$dom_body:body~",
 get$on: function() {
  return $.DocumentEvents$(this);
},
 $$dom_createElement$1: function(tagName) {
  return this.createElement(tagName);
},
 $$dom_getElementById$1: function(elementId) {
  return this.getElementById(elementId);
},
 $$dom_querySelector$1: function(selectors) {
  return this.querySelector(selectors);
},
 query$1: function(selectors) {
  if ($.RegExp_RegExp("^#[_a-zA-Z]\\w*$", false, false).hasMatch$1(selectors) === true)
    return this.$$dom_getElementById$1($.CONSTANT1.substring$1(selectors, 1));
  return this.$$dom_querySelector$1(selectors);
}
});

$.$defineNativeClass('DocumentFragment', {
 query$1: function(selectors) {
  return this.$$dom_querySelector$1(selectors);
},
 get$translate: function() {
  return false;
},
 translate$2: function(arg0, arg1) {
  return this.get$translate().call$2(arg0, arg1);
},
 get$on: function() {
  return $.ElementEvents$(this);
},
 $$dom_querySelector$1: function(selectors) {
  return this.querySelector(selectors);
}
});

$.$defineNativeClass('DocumentType', {"":"name>",
 remove$0: function() {
  return this.remove();
}
});

$.$defineNativeClass('DOMError', {"":"name>"
});

$.$defineNativeClass('DOMException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('Element', {
 query$1: function(selectors) {
  return this.$$dom_querySelector$1(selectors);
},
 get$on: function() {
  if (Object.getPrototypeOf(this).hasOwnProperty('get$on')) {
    return $.ElementEvents$(this);
  } else {
    return Object.prototype.get$on.call(this);
  }
},
 translate$2: function(arg0, arg1) {
  return this.translate.call$2(arg0, arg1);
},
 $$dom_querySelector$1: function(selectors) {
  return this.querySelector(selectors);
}
});

$.$defineNativeClass('HTMLEmbedElement', {"":"height=,name>,src<,width="
});

$.$defineNativeClass('Event', {
 get$target: function() {
  return $._convertNativeToDart_EventTarget(this.target);
}
});

$.$defineNativeClass('EventException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('EventTarget', {
 get$on: function() {
  if (Object.getPrototypeOf(this).hasOwnProperty('get$on')) {
    return $.Events$(this);
  } else {
    return Object.prototype.get$on.call(this);
  }
},
 $$dom_addEventListener$3: function(type, listener, useCapture) {
  if (Object.getPrototypeOf(this).hasOwnProperty('$$dom_addEventListener$3')) {
    return this.addEventListener(type,$.convertDartClosureToJS(listener, 1),useCapture);
  } else {
    return Object.prototype.$$dom_addEventListener$3.call(this, type, listener, useCapture);
  }
}
});

$.$defineNativeClass('HTMLFieldSetElement', {"":"name>"
});

$.$defineNativeClass('FileException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('HTMLFormElement', {"":"length>,name>,target="
});

$.$defineNativeClass('HTMLFrameElement', {"":"height>,name>,src<,width>"
});

$.$defineNativeClass('HTMLFrameSetElement', {
 get$on: function() {
  return $.FrameSetElementEvents$(this);
}
});

$.$defineNativeClass('HTMLCollection', {
 get$length: function() {
  if (Object.getPrototypeOf(this).hasOwnProperty('get$length')) {
    return this.length;
  } else {
    return Object.prototype.get$length.call(this);
  }
},
 operator$index$1: function(index) {
  return this[index];
},
 operator$indexSet$2: function(index, value) {
  throw $.$$throw($.UnsupportedError$("Cannot assign element of immutable List."));
},
 iterator$0: function() {
  return $.FixedSizeListIterator$(this);
},
 add$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addLast$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addAll$1: function(collection) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 forEach$1: function(f) {
  return $.Collections_forEach(this, f);
},
 map$1: function(f) {
  return $.Collections_map(this, [], f);
},
 filter$1: function(f) {
  return $.Collections_filter(this, [], f);
},
 some$1: function(f) {
  return $.Collections_some(this, f);
},
 get$isEmpty: function() {
  return $.eq($.getInterceptor$JSStringJSArray(this).get$length(this), 0);
},
 set$length: function(value) {
  if (Object.getPrototypeOf(this).hasOwnProperty('set$length')) {
    throw $.$$throw($.UnsupportedError$("Cannot resize immutable List."));
  } else {
    return Object.prototype.set$length.call(this, value);
  }
},
 clear$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot clear immutable List."));
},
 indexOf$2: function(element, start) {
  return $.Lists_indexOf(this, element, start, $.getInterceptor$JSStringJSArray(this).get$length(this));
},
 indexOf$1: function(element) {
  return this.indexOf$2(element, 0);
},
 get$last: function() {
  return this.operator$index$1($.sub(this.get$length(), 1));
},
 removeAt$1: function(pos) {
  throw $.$$throw($.UnsupportedError$("Cannot removeAt on immutable List."));
},
 removeLast$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot removeLast on immutable List."));
},
 removeRange$2: function(start, rangeLength) {
  throw $.$$throw($.UnsupportedError$("Cannot removeRange on immutable List."));
},
 getRange$2: function(start, rangeLength) {
  return $.Lists_getRange(this, start, rangeLength, []);
},
 is$List: function() { return true; },
 is$Collection: function() { return true; },
 is$JavaScriptIndexingBehavior: function() { return true; }
});

$.$defineNativeClass('HTMLDocument', {
 get$body: function() {
  return $.document().get$$$dom_body();
}
});

$.$defineNativeClass('HTMLOptionsCollection', {
 get$length: function() {
  return this.length;
},
 set$length: function(value) {
  this.length = value;
}
});

$.$defineNativeClass('XMLHttpRequestException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('HTMLIFrameElement', {"":"height=,name>,src<,width="
});

$.$defineNativeClass('HTMLImageElement', {"":"height=,src<,width=,x>,y>"
});

$.$defineNativeClass('HTMLInputElement', {"":"height=,name>,pattern>,src<,value=,width=",
 get$on: function() {
  return $.InputElementEvents$(this);
}
});

$.$defineNativeClass('KeyboardEvent', {
 get$keyCode: function() {
  return this.keyCode;
}
});

$.$defineNativeClass('HTMLKeygenElement', {"":"name>"
});

$.$defineNativeClass('HTMLLIElement', {"":"value="
});

$.$defineNativeClass('HTMLMapElement', {"":"name>"
});

$.$defineNativeClass('HTMLMarqueeElement', {"":"height=,width="
});

$.$defineNativeClass('HTMLMediaElement', {"":"src<",
 get$on: function() {
  return $.MediaElementEvents$(this);
},
 load$0: function() {
  return this.load();
},
 get$load: function() {
  return new $.BoundClosure(this, 'load$0');
},
 play$0: function() {
  return this.play();
}
});

$.$defineNativeClass('HTMLMetaElement', {"":"name>"
});

$.$defineNativeClass('HTMLMeterElement', {"":"value="
});

$.$defineNativeClass('MouseEvent', {"":"x>,y>"
});

$.$defineNativeClass('NamedNodeMap', {
 get$length: function() {
  return this.length;
},
 operator$index$1: function(index) {
  return this[index];
},
 operator$indexSet$2: function(index, value) {
  throw $.$$throw($.UnsupportedError$("Cannot assign element of immutable List."));
},
 iterator$0: function() {
  return $.FixedSizeListIterator$(this);
},
 add$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addLast$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addAll$1: function(collection) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 forEach$1: function(f) {
  return $.Collections_forEach(this, f);
},
 map$1: function(f) {
  return $.Collections_map(this, [], f);
},
 filter$1: function(f) {
  return $.Collections_filter(this, [], f);
},
 some$1: function(f) {
  return $.Collections_some(this, f);
},
 get$isEmpty: function() {
  return $.eq($.getInterceptor$JSStringJSArray(this).get$length(this), 0);
},
 set$length: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot resize immutable List."));
},
 clear$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot clear immutable List."));
},
 indexOf$2: function(element, start) {
  return $.Lists_indexOf(this, element, start, $.getInterceptor$JSStringJSArray(this).get$length(this));
},
 indexOf$1: function(element) {
  return this.indexOf$2(element, 0);
},
 get$last: function() {
  return this.operator$index$1($.sub(this.get$length(), 1));
},
 removeAt$1: function(pos) {
  throw $.$$throw($.UnsupportedError$("Cannot removeAt on immutable List."));
},
 removeLast$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot removeLast on immutable List."));
},
 removeRange$2: function(start, rangeLength) {
  throw $.$$throw($.UnsupportedError$("Cannot removeRange on immutable List."));
},
 getRange$2: function(start, rangeLength) {
  return $.Lists_getRange(this, start, rangeLength, []);
},
 is$List: function() { return true; },
 is$Collection: function() { return true; },
 is$JavaScriptIndexingBehavior: function() { return true; }
});

$.$defineNativeClass('Navigator', {"":"userAgent>"
});

$.$defineNativeClass('Node', {"":"$$dom_childNodes:childNodes~,text:textContent|",
 get$nodes: function() {
  return $._ChildNodeListLazy$(this);
},
 remove$0: function() {
  if (Object.getPrototypeOf(this).hasOwnProperty('remove$0')) {
    var t1 = this.parentNode;
    if (!(t1 == null))
      t1.$$dom_removeChild$1(this);
  } else {
    return Object.prototype.remove$0.call(this);
  }
},
 $$dom_addEventListener$3: function(type, listener, useCapture) {
  return this.addEventListener(type,$.convertDartClosureToJS(listener, 1),useCapture);
},
 $$dom_appendChild$1: function(newChild) {
  return this.appendChild(newChild);
},
 $$dom_removeChild$1: function(oldChild) {
  return this.removeChild(oldChild);
},
 $$dom_replaceChild$2: function(newChild, oldChild) {
  return this.replaceChild(newChild,oldChild);
}
});

$.$defineNativeClass('NodeList', {
 get$length: function() {
  return this.length;
},
 operator$index$1: function(index) {
  return this[index];
},
 operator$indexSet$2: function(index, value) {
  throw $.$$throw($.UnsupportedError$("Cannot assign element of immutable List."));
},
 iterator$0: function() {
  return $.FixedSizeListIterator$(this);
},
 add$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addLast$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addAll$1: function(collection) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 forEach$1: function(f) {
  return $.Collections_forEach(this, f);
},
 map$1: function(f) {
  return $.Collections_map(this, [], f);
},
 filter$1: function(f) {
  return $.Collections_filter(this, [], f);
},
 some$1: function(f) {
  return $.Collections_some(this, f);
},
 get$isEmpty: function() {
  return $.eq($.getInterceptor$JSStringJSArray(this).get$length(this), 0);
},
 set$length: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot resize immutable List."));
},
 clear$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot clear immutable List."));
},
 indexOf$2: function(element, start) {
  return $.Lists_indexOf(this, element, start, $.getInterceptor$JSStringJSArray(this).get$length(this));
},
 indexOf$1: function(element) {
  return this.indexOf$2(element, 0);
},
 get$last: function() {
  return this.operator$index$1($.sub(this.get$length(), 1));
},
 removeAt$1: function(pos) {
  throw $.$$throw($.UnsupportedError$("Cannot removeAt on immutable List."));
},
 removeLast$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot removeLast on immutable List."));
},
 removeRange$2: function(start, rangeLength) {
  throw $.$$throw($.UnsupportedError$("Cannot removeRange on immutable List."));
},
 getRange$2: function(start, rangeLength) {
  return $.Lists_getRange(this, start, rangeLength, []);
},
 is$List: function() { return true; },
 is$Collection: function() { return true; },
 is$JavaScriptIndexingBehavior: function() { return true; }
});

$.$defineNativeClass('HTMLObjectElement', {"":"height=,name>,width="
});

$.$defineNativeClass('HTMLOptionElement', {"":"value="
});

$.$defineNativeClass('HTMLOutputElement', {"":"name>,value="
});

$.$defineNativeClass('HTMLParamElement', {"":"name>,value="
});

$.$defineNativeClass('ProcessingInstruction', {"":"target>"
});

$.$defineNativeClass('HTMLProgressElement', {"":"value="
});

$.$defineNativeClass('RadioNodeList', {"":"value="
});

$.$defineNativeClass('RangeException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('HTMLScriptElement', {"":"src<"
});

$.$defineNativeClass('HTMLSelectElement', {"":"length=,name>,value="
});

$.$defineNativeClass('HTMLSourceElement', {"":"src<"
});

$.$defineNativeClass('Storage', {
 containsKey$1: function(key) {
  return !(this.$$dom_getItem$1(key) == null);
},
 operator$index$1: function(key) {
  return this.$$dom_getItem$1(key);
},
 operator$indexSet$2: function(key, value) {
  this.$$dom_setItem$2(key, value);
},
 clear$0: function() {
  return this.$$dom_clear$0();
},
 forEach$1: function(f) {
  var i, key;
  for (i = 0; true; ++i) {
    key = this.$$dom_key$1(i);
    if (key == null)
      return;
    f.call$2(key, this.operator$index$1(key));
  }
},
 get$length: function() {
  return this.length;
},
 get$isEmpty: function() {
  return this.$$dom_key$1(0) == null;
},
 $$dom_clear$0: function() {
  return this.clear();
},
 $$dom_getItem$1: function(key) {
  return this.getItem(key);
},
 $$dom_key$1: function(index) {
  return this.key(index);
},
 $$dom_setItem$2: function(key, data) {
  return this.setItem(key,data);
},
 is$Map: function() { return true; }
});

$.$defineNativeClass('StorageEvent', {"":"key>",
 key$1: function(arg0) {
  return this.key.call$1(arg0);
}
});

$.$defineNativeClass('HTMLTextAreaElement', {"":"name>,value="
});

$.$defineNativeClass('HTMLTrackElement', {"":"src<"
});

$.$defineNativeClass('UIEvent', {"":"pageX>,pageY>"
});

$.$defineNativeClass('Uint8Array', {
 get$length: function() {
  return this.length;
},
 operator$index$1: function(index) {
  return this[index];
},
 operator$indexSet$2: function(index, value) {
  this[index] = value;
},
 iterator$0: function() {
  return $.FixedSizeListIterator$(this);
},
 add$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addLast$1: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 addAll$1: function(collection) {
  throw $.$$throw($.UnsupportedError$("Cannot add to immutable List."));
},
 forEach$1: function(f) {
  return $.Collections_forEach(this, f);
},
 map$1: function(f) {
  return $.Collections_map(this, [], f);
},
 filter$1: function(f) {
  return $.Collections_filter(this, [], f);
},
 some$1: function(f) {
  return $.Collections_some(this, f);
},
 get$isEmpty: function() {
  return $.eq($.getInterceptor$JSStringJSArray(this).get$length(this), 0);
},
 set$length: function(value) {
  throw $.$$throw($.UnsupportedError$("Cannot resize immutable List."));
},
 clear$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot clear immutable List."));
},
 indexOf$2: function(element, start) {
  return $.Lists_indexOf(this, element, start, $.getInterceptor$JSStringJSArray(this).get$length(this));
},
 indexOf$1: function(element) {
  return this.indexOf$2(element, 0);
},
 get$last: function() {
  return this.operator$index$1($.sub(this.get$length(), 1));
},
 removeAt$1: function(pos) {
  throw $.$$throw($.UnsupportedError$("Cannot removeAt on immutable List."));
},
 removeLast$0: function() {
  throw $.$$throw($.UnsupportedError$("Cannot removeLast on immutable List."));
},
 removeRange$2: function(start, rangeLength) {
  throw $.$$throw($.UnsupportedError$("Cannot removeRange on immutable List."));
},
 getRange$2: function(start, rangeLength) {
  return $.Lists_getRange(this, start, rangeLength, []);
},
 is$List: function() { return true; },
 is$Collection: function() { return true; },
 is$JavaScriptIndexingBehavior: function() { return true; }
});

$.$defineNativeClass('HTMLVideoElement', {"":"height=,width="
});

$.$defineNativeClass('DOMWindow', {"":"innerHeight>,innerWidth>,name>,navigator>",
 get$on: function() {
  return $.WindowEvents$(this);
},
 $$dom_addEventListener$3: function(type, listener, useCapture) {
  return this.addEventListener(type,$.convertDartClosureToJS(listener, 1),useCapture);
},
 clearInterval$1: function(handle) {
  return this.clearInterval(handle);
},
 setInterval$2: function(handler, timeout) {
  return this.setInterval($.convertDartClosureToJS(handler, 0),timeout);
}
});

$.$defineNativeClass('XPathException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('SVGAElement', {"":"target>"
});

$.$defineNativeClass('SVGCursorElement', {"":"x>,y>"
});

$.$defineNativeClass('SVGFEBlendElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEColorMatrixElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEComponentTransferElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFECompositeElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEConvolveMatrixElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEDiffuseLightingElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEDisplacementMapElement', {"":"height>,width>,x>,y>",
 scale$2: function(arg0, arg1) {
  return this.scale.call$2(arg0, arg1);
}
});

$.$defineNativeClass('SVGFEDropShadowElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEFloodElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEGaussianBlurElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEImageElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEMergeElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEMorphologyElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEOffsetElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFEPointLightElement', {"":"x>,y>"
});

$.$defineNativeClass('SVGFESpecularLightingElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFESpotLightElement', {"":"x>,y>"
});

$.$defineNativeClass('SVGFETileElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFETurbulenceElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGFilterElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGForeignObjectElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGGlyphRefElement', {"":"x=,y="
});

$.$defineNativeClass('SVGImageElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGMaskElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGPatternElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGRectElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGException', {"":"name>",
 toString$0: function() {
  return this.toString();
}
});

$.$defineNativeClass('SVGSVGElement', {"":"height>,width>,x>,y>"
});

$.$defineNativeClass('SVGTextPositioningElement', {"":"x>,y>",
 rotate$1: function(arg0) {
  return this.rotate.call$1(arg0);
}
});

$.$defineNativeClass('SVGUseElement', {"":"height>,width>,x>,y>"
});

// 99 dynamic classes.
// 234 classes
// 21 !leaf
(function() {
  var v0_MouseEvent = 'MouseEvent|WheelEvent', v1_MediaElement = 'HTMLMediaElement|HTMLVideoElement|HTMLAudioElement', v2_TextPositioningElement = 'SVGTextPositioningElement|SVGAltGlyphElement|SVGTRefElement|SVGTSpanElement|SVGTextElement', v3_UIEvent = [v0_MouseEvent, 'UIEvent|TextEvent|TouchEvent|CompositionEvent|SVGZoomEvent|KeyboardEvent'].join('|'), v4_Element = [v1_MediaElement, v2_TextPositioningElement, 'Element|HTMLStyleElement|HTMLTableCaptionElement|HTMLTableCellElement|HTMLTableColElement|HTMLTableElement|HTMLTableRowElement|HTMLTableSectionElement|HTMLTextAreaElement|HTMLTitleElement|HTMLTrackElement|HTMLUListElement|HTMLUnknownElement|SVGElement|SVGAElement|SVGAltGlyphDefElement|SVGTextContentElement|SVGTextPathElement|SVGAltGlyphItemElement|SVGAnimationElement|SVGAnimateColorElement|SVGAnimateElement|SVGAnimateMotionElement|SVGAnimateTransformElement|SVGSetElement|SVGCircleElement|SVGClipPathElement|SVGComponentTransferFunctionElement|SVGFEFuncBElement|SVGFEFuncGElement|SVGFEFuncAElement|SVGFEFuncRElement|SVGDefsElement|SVGDescElement|SVGEllipseElement|SVGFEBlendElement|SVGFEConvolveMatrixElement|SVGFEColorMatrixElement|SVGFEComponentTransferElement|SVGFEFloodElement|SVGFECompositeElement|SVGFEImageElement|SVGFEDisplacementMapElement|SVGFEMergeNodeElement|SVGFEDropShadowElement|SVGFEPointLightElement|SVGFESpecularLightingElement|SVGFESpotLightElement|SVGFETileElement|SVGFETurbulenceElement|SVGFilterElement|SVGFontElement|SVGFontFaceElement|SVGFontFaceFormatElement|SVGFontFaceNameElement|SVGFEDiffuseLightingElement|SVGFEOffsetElement|SVGFEDistantLightElement|SVGFontFaceUriElement|SVGCursorElement|SVGFEMorphologyElement|SVGFontFaceSrcElement|SVGGlyphRefElement|SVGFEMergeElement|SVGGElement|SVGGlyphElement|SVGMarkerElement|SVGMaskElement|SVGMetadataElement|SVGMissingGlyphElement|SVGGradientElement|SVGLinearGradientElement|SVGRadialGradientElement|SVGHKernElement|SVGForeignObjectElement|SVGPathElement|SVGImageElement|SVGMPathElement|SVGFEGaussianBlurElement|SVGLineElement|SVGPatternElement|SVGPolygonElement|SVGPolylineElement|SVGRectElement|SVGScriptElement|SVGStopElement|SVGStyleElement|SVGSwitchElement|SVGSymbolElement|SVGSVGElement|SVGTitleElement|SVGUseElement|SVGVKernElement|SVGViewElement|HTMLElement|HTMLAnchorElement|HTMLAppletElement|HTMLAreaElement|HTMLBRElement|HTMLBaseElement|HTMLBaseFontElement|HTMLBodyElement|HTMLButtonElement|HTMLCanvasElement|HTMLContentElement|HTMLDListElement|HTMLDataListElement|HTMLDetailsElement|HTMLDirectoryElement|HTMLDivElement|HTMLEmbedElement|HTMLFieldSetElement|HTMLFontElement|HTMLFormElement|HTMLFrameElement|HTMLFrameSetElement|HTMLHRElement|HTMLHeadElement|HTMLHeadingElement|HTMLHtmlElement|HTMLIFrameElement|HTMLImageElement|HTMLInputElement|HTMLKeygenElement|HTMLLIElement|HTMLLabelElement|HTMLLegendElement|HTMLLinkElement|HTMLMapElement|HTMLMarqueeElement|HTMLMenuElement|HTMLMetaElement|HTMLMeterElement|HTMLModElement|HTMLOListElement|HTMLObjectElement|HTMLOptGroupElement|HTMLOptionElement|HTMLOutputElement|HTMLParagraphElement|HTMLParamElement|HTMLPreElement|HTMLProgressElement|HTMLQuoteElement|HTMLScriptElement|HTMLSelectElement|HTMLShadowElement|HTMLSourceElement|HTMLSpanElement'].join('|'), v5_CharacterData = 'CharacterData|Text|CDATASection|Comment', v6_Document = 'Document|SVGDocument|HTMLDocument', v7_DocumentFragment = 'DocumentFragment|ShadowRoot', v8_Node = [v4_Element, v5_CharacterData, v6_Document, v7_DocumentFragment, 'Node|Attr|DocumentType|EntityReference|Notation|ProcessingInstruction'].join('|');
  $.dynamicSetMetadata([['Document', v6_Document], ['DocumentFragment', v7_DocumentFragment], ['MouseEvent', v0_MouseEvent], ['UIEvent', v3_UIEvent], ['Uint8Array', 'Uint8Array|Uint8ClampedArray'], ['HTMLMediaElement', v1_MediaElement], ['SVGTextPositioningElement', v2_TextPositioningElement], ['Element', v4_Element], ['Event', [v3_UIEvent, 'Event|StorageEvent|TrackEvent|WebKitTransitionEvent|WebGLContextEvent|IDBVersionChangeEvent|IDBVersionChangeEvent|WebKitAnimationEvent|DeviceMotionEvent|CloseEvent|DeviceOrientationEvent|BeforeLoadEvent|ErrorEvent|CustomEvent|HashChangeEvent|AudioProcessingEvent|ProgressEvent|XMLHttpRequestProgressEvent|OfflineAudioCompletionEvent|MediaKeyEvent|MediaStreamEvent|MediaStreamTrackEvent|MessageEvent|MutationEvent|OverflowEvent|PageTransitionEvent|PopStateEvent|RTCDataChannelEvent|RTCIceCandidateEvent|SpeechInputEvent|SpeechRecognitionError|SpeechRecognitionEvent'].join('|')], ['CharacterData', v5_CharacterData], ['Node', v8_Node], ['EventTarget', [v8_Node, 'EventTarget|DOMWindow'].join('|')], ['HTMLCollection', 'HTMLCollection|HTMLFormControlsCollection|HTMLOptionsCollection'], ['NodeList', 'NodeList|RadioNodeList']]);
})();


//
// BEGIN invoke [main].
//
if (typeof document !== 'undefined' && document.readyState !== 'complete') {
  document.addEventListener('readystatechange', function () {
    if (document.readyState == 'complete') {
      if (typeof dartMainRunner === 'function') {
        dartMainRunner(function() { $.main(); });
      } else {
        $.main();
      }
    }
  }, false);
} else {
  if (typeof dartMainRunner === 'function') {
    dartMainRunner(function() { $.main(); });
  } else {
    $.main();
  }
}
//
// END invoke [main].
//

function init() {
Isolate.$isolateProperties = {};
function generateAccessor(field, prototype) {
  var len = field.length;
  var lastCharCode = field.charCodeAt(len - 1);
  var needsAccessor = (lastCharCode & 63) >= 60;
  if (needsAccessor) {
    var needsGetter = (lastCharCode & 3) > 0;
    var needsSetter = (lastCharCode & 2) == 0;
    var renaming = (lastCharCode & 64) != 0;
    var accessorName = field = field.substring(0, len - 1);
    if (renaming) {
      var divider = field.indexOf(":");
      accessorName = field.substring(0, divider);
      field = field.substring(divider + 1);
    }
    if (needsGetter) {
      var getterString = "return this." + field + ";";
      prototype["get$" + accessorName] = new Function(getterString);
    }
    if (needsSetter) {
      var setterString = "this." + field + " = v;";
      prototype["set$" + accessorName] = new Function("v", setterString);
    }
  }
  return field;
};
Isolate.$isolateProperties.$generateAccessor = generateAccessor;
Isolate.$defineClass = function(cls, fields, prototype) {
  var constructor;
  if (typeof fields == 'function') {
    constructor = fields;
  } else {
    var str = "function " + cls + "(";
    var body = "";
    for (var i = 0; i < fields.length; i++) {
      if (i != 0) str += ", ";
      var field = fields[i];
      field = generateAccessor(field, prototype);
      str += field;
      body += "this." + field + " = " + field + ";\n";
    }
    str += ") {" + body + "}\n";
    str += "return " + cls + ";";
    constructor = new Function(str)();
  }
  constructor.prototype = prototype;
  constructor.builtin$cls = cls;
  return constructor;
};
var supportsProto = false;
var tmp = Isolate.$defineClass('c', ['f?'], {}).prototype;
if (tmp.__proto__) {
  tmp.__proto__ = {};
  if (typeof tmp.get$f !== 'undefined') supportsProto = true;
}
Isolate.$pendingClasses = {};
Isolate.$finishClasses = function(collectedClasses) {
  var hasOwnProperty = Object.prototype.hasOwnProperty;
  for (var cls in collectedClasses) {
    if (hasOwnProperty.call(collectedClasses, cls)) {
      var desc = collectedClasses[cls];
      var fields = desc[''], supr;
      if (typeof fields == 'string') {
        var s = fields.split(';'); supr = s[0];
        fields = s[1] == '' ? [] : s[1].split(',');
      } else {
        supr = desc['super'];
      }
      Isolate.$isolateProperties[cls] = Isolate.$defineClass(cls, fields, desc);
      if (supr) Isolate.$pendingClasses[cls] = supr;
    }
  }
  var pendingClasses = Isolate.$pendingClasses;
  Isolate.$pendingClasses = {};
  var finishedClasses = {};
  function finishClass(cls) {
    var hasOwnProperty = Object.prototype.hasOwnProperty;
    if (hasOwnProperty.call(finishedClasses, cls)) return;
    finishedClasses[cls] = true;
    var superclass = pendingClasses[cls];
    if (!superclass) return;
    finishClass(superclass);
    var constructor = Isolate.$isolateProperties[cls];
    var superConstructor = Isolate.$isolateProperties[superclass];
    var prototype = constructor.prototype;
    if (supportsProto) {
      prototype.__proto__ = superConstructor.prototype;
      prototype.constructor = constructor;
    } else {
      function tmp() {};
      tmp.prototype = superConstructor.prototype;
      var newPrototype = new tmp();
      constructor.prototype = newPrototype;
      newPrototype.constructor = constructor;
      for (var member in prototype) {
        if (!member) continue;          if (hasOwnProperty.call(prototype, member)) {
          newPrototype[member] = prototype[member];
        }
      }
    }
  }
  for (var cls in pendingClasses) finishClass(cls);
};
Isolate.$lazy = function(prototype, staticName, fieldName, getterName, lazyValue) {
  var getter = new Function("{ return $." + fieldName + ";}");
  var sentinelUndefined = {};
  var sentinelInProgress = {};
  prototype[fieldName] = sentinelUndefined;
  prototype[getterName] = function() {
    var result = $[fieldName];
    try {
      if (result === sentinelUndefined) {
        $[fieldName] = sentinelInProgress;
        try {
          result = $[fieldName] = lazyValue();
        } catch (e) {
          if ($[fieldName] === sentinelInProgress) {
            $[fieldName] = null;
          }
          throw e;
        }
      } else if (result === sentinelInProgress) {
        $.throwCyclicInit(staticName);
      }
      return result;
    } finally {
      $[getterName] = getter;
    }
  };
};
Isolate.$finishIsolateConstructor = function(oldIsolate) {
  var isolateProperties = oldIsolate.$isolateProperties;
  var isolatePrototype = oldIsolate.prototype;
  var str = "{\n";
  str += "var properties = Isolate.$isolateProperties;\n";
  for (var staticName in isolateProperties) {
    if (Object.prototype.hasOwnProperty.call(isolateProperties, staticName)) {
      str += "this." + staticName + "= properties." + staticName + ";\n";
    }
  }
  str += "}\n";
  var newIsolate = new Function(str);
  newIsolate.prototype = isolatePrototype;
  isolatePrototype.constructor = newIsolate;
  newIsolate.$isolateProperties = isolateProperties;
  return newIsolate;
};
}

//@ sourceMappingURL=Grendel_2d.dart.js.map